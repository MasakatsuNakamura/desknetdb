(function(c){var d=neo.core.readyNamespace("neo.webdb.pg_dbRecordSearchRelKey");if(!d){return}var b="詳細検索で指定した条件をクリアし、新しく検索を行います。\nよろしいですか？";var a=neo.webdb.pg_dbRecordSearchRelKey={LAYOUT_TYPE_TABLE:"l",LAYOUT_TYPE_DETAIL:"d",ID_OPEN_COL_MENU_BTN:"col_menu-open",PFX_CLS_ROW_ID:"table_layout-row_id_",PFX_CLS_COL_ID:"column-id_",PFX_CLS_ITEM_ID:"table_layout-item_id_",CLS_TABLE_ROW:"table-row",CLS_DISABLED_ROW:"table-row-disabled",CMD_SIMPLE_SEARCH:"simplesearchajax",MODE_STRING_RECORD_SEARCH_KEY:"record_search_rel_key",CMD_LIST_COUNT:"dbrecordlistcount",_tmHideColOperationButtons:null,_getTmHideColOperationButtons:function(){return this._tmHideColOperationButtons},_setTmHideColOperationButtons:function(e){return this._tmHideColOperationButtons=e},_panel:null,_getPanel:function(){return this._panel||this._initPanel()},_initPanel:function(){var f={page:this,tableId:this.getTableId(),windowId:this.getWindowId()};var e=new neo.webdb.pg_dbRecordSearchRelKey.Panel(f);e.initialize();return this._panel=e},_dlgVisibleColsSetting:null,_getDlgVisibleColsSetting:function(){return this._dlgVisibleColsSetting||this._initDlgVisibleColsSetting()},_initDlgVisibleColsSetting:function(){var f={elDlg:this._getElDlgVisibleColsSetting(),page:this};var e=new neo.webdb.pg_view.DlgVisibleColsSetting(f);e.initialize();return this._dlgVisibleColsSetting=e},_colMenu:null,_getColMenu:function(){return this._colMenu||this._initColMenu()},_initColMenu:function(){var f={elOpenBtn:this._getElOpenColMenuBtn(),elScroller:this._getElTableScroller(),elMenu:this._getElColMenu(),page:this};var e=new neo.webdb.pg_view.ColMenu(f);e.initialize();return this._colMenu=e},_colResizer:null,_getColResizer:function(){return this._colResizer||this._initColResizer()},_initColResizer:function(){var f={elGrip:this._getElColResizeGrip(),elTopContainer:this._getElTopTableContainer(),elGripPad:this._getElPadUnderColResizeGrip(),elScroller:this._getElTableScroller(),elTable:this._getElTable(),elTopTable:this._getElTopTable(),page:this};var e=new neo.webdb.pg_view.ColResizer(f);e.initialize();return this._colResizer=e},_table:null,_getTable:function(){return this._table||this._initTable()},_initTable:function(){var e={elFixedGroup:this._getElFixedGroup(),elLeftContainer:this._getElLeftTableContainer(),elLeftInnerContainer:this._getElLeftTableInnerContainer(),elLeftTable:this._getElLeftTable(),elFrame:this._getElTableFrame(),elMargin:this._getElTableMargin(),elMainTitle:this._getElMainTitle(),elOperationPanel:this._getElOperationPanel(),elScroller:this._getElTableScroller(),elTable:this._getElTable(),elTopContainer:this._getElTopTableContainer(),elTopLeftContainer:this._getElTopLeftTableContainer(),elTopLeftTable:this._getElTopLeftTable(),elTopTable:this._getElTopTable(),dlgVisibleCols:this._getDlgVisibleColsSetting(),defFixedId:this._getPageSetting().fixedId,page:this};return this._table=new neo.webdb.pg_dbRecordSearchRelKey.Table(e)},_objImgSizeAdjust:null,_getObjImgSizeAdjust:function(){return this._objImgSizeAdjust||this._initObjImgSizeAdjust()},_initObjImgSizeAdjust:function(){var h=this._getPageSetting();var g=h.layoutType;var i;if(g=="l"){i=neo.webdb.Record.ImageColumnSizeAdjustment.MODE_LIST}else{if(g=="d"){i=neo.webdb.Record.ImageColumnSizeAdjustment.MODE_LIST_DETAIL}}var f={mode:i,recordlist:this};var e=new neo.webdb.Record.ImageColumnSizeAdjustment(f);return this._objImgSizeAdjust=e},_elOperationPanel:null,_getElOperationPanel:function(){return this._elOperationPanel||this._initElOperationPanel()},_initElOperationPanel:function(){return this._elOperationPanel=c("#operation_panel-section")},_elPanelTabs:null,_getElPanelTabs:function(){return this._elPanelTabs||this._initElPanelTabs()},_initElPanelTabs:function(){return this._elPanelTabs=c("#operation-menu-list")},_elNumOfRows:null,_getElNumOfRows:function(){return this._elNumOfRows||this._initElNumOfRows()},_initElNumOfRows:function(){return this._elNumOfRows=c("#menu-view-num_of_rows")},_elSetVisibleCols:null,_getElSetVisibleCols:function(){return this._elSetVisibleCols||this._initElSetVisibleCols()},_initElSetVisibleCols:function(){return this._elSetVisibleCols=c("#menu-view-visible_cols-set")},_elSelSearchFilter:null,_getElSelSearchFilter:function(){return this._elSelSearchFilter||this._initElSelSearchFilter()},_initElSelSearchFilter:function(){return this._elSelSearchFilter=c("[name=filterid]")},_elTxtSearchWord:null,_getElTxtSearchWord:function(){return this._elTxtSearchWord||this._initElTxtSearchWord()},_initElTxtSearchWord:function(){return this._elTxtSearchWord=c("[name=keyword]")},_elFixedGroup:null,_getElFixedGroup:function(){return this._elFixedGroup||this._initElFixedGroup()},_initElFixedGroup:function(){return this._elFixedGroup=c("#table-fixed")},_elTableScroller:null,_getElTableScroller:function(){return this._elTableScroller||this._initElTableScroller()},_initElTableScroller:function(){return this._elTableScroller=c("#table-scroller")},_elTableMargin:null,_getElTableMargin:function(){return this._elTableMargin||this._initElTableMargin()},_initElTableMargin:function(){return this._elTableMargin=c("#table-margin")},_elTableFrame:null,_getElTableFrame:function(){return this._elTableFrame||this._initElTableFrame()},_initElTableFrame:function(){return this._elTableFrame=c("#table-frame")},_elTable:null,_getElTable:function(){return this._elTable||this._initElTable()},_initElTable:function(){return this._elTable=c("#table")},_elTableOuter:null,_getElTableOuter:function(){return this._elTableOuter||this._initElTableOuter()},_initElTableOuter:function(){return this._elTableOuter=c("#table-outer_table")},_elTopLeftTableContainer:null,_getElTopLeftTableContainer:function(){return this._elTopLeftTableContainer||this._initElTopLeftTableContainer()},_initElTopLeftTableContainer:function(){return this._elTopLeftTableContainer=c("#part_table-top_left-container")},_elTopLeftTable:null,_getElTopLeftTable:function(){return this._elTopLeftTable||this._initElTopLeftTable()},_initElTopLeftTable:function(){return this._elTopLeftTable=c("#part_table-top_left")},_elTopTableContainer:null,_getElTopTableContainer:function(){return this._elTopTableContainer||this._initElTopTableContainer()},_initElTopTableContainer:function(){return this._elTopTableContainer=c("#part_table-top-container")},_elTopTable:null,_getElTopTable:function(){return this._elTopTable||this._initElTopTable()},_initElTopTable:function(){return this._elTopTable=c("#part_table-top")},_elLeftTableContainer:null,_getElLeftTableContainer:function(){return this._elLeftTableContainer||this._initElLeftTableContainer()},_initElLeftTableContainer:function(){return this._elLeftTableContainer=c("#part_table-left-container")},_elLeftTableInnerContainer:null,_getElLeftTableInnerContainer:function(){return this._elLeftTableInnerContainer||this._initElLeftTableInnerContainer()},_initElLeftTableInnerContainer:function(){return this._elLeftTableInnerContainer=c("#part_table-left-inner_container")},_elLeftTable:null,_getElLeftTable:function(){return this._elLeftTable||this._initElLeftTable()},_initElLeftTable:function(){return this._elLeftTable=c("#part_table-left")},_elOpenColMenuBtn:null,_getElOpenColMenuBtn:function(){return this._elOpenColMenuBtn||this._initElOpenColMenuBtn()},_initElOpenColMenuBtn:function(){return this._elOpenColMenuBtn=c("#"+a.ID_OPEN_COL_MENU_BTN)},_elColMenu:null,_getElColMenu:function(){return this._elColMenu||this._initElColMenu()},_initElColMenu:function(){return this._elColMenu=c("#col_menu")},_elHideCol:null,_getElHideCol:function(){return this._elHideCol||this._initElHideCol()},_initElHideCol:function(){return this._elHideCol=c("#col_menu-hide")},_elFixCol:null,_getElFixCol:function(){return this._elFixCol||this._initElFixCol()},_initElFixCol:function(){return this._elFixCol=c("#col_menu-fix")},_elFreeCol:null,_getElFreeCol:function(){return this._elFreeCol||this._initElFreeCol()},_initElFreeCol:function(){return this._elFreeCol=c("#col_menu-free")},_elColResizeGrip:null,_getElColResizeGrip:function(){return this._elColResizeGrip||this._initElColResizeGrip()},_initElColResizeGrip:function(){return this._elColResizeGrip=c("#col_grip").appendTo("body")},_elPadUnderColResizeGrip:null,_getElPadUnderColResizeGrip:function(){return this._elPadUnderColResizeGrip||this._initElPadUnderColResizeGrip()},_initElPadUnderColResizeGrip:function(){return this._elPadUnderColResizeGrip=c("#col_grip-pad").appendTo("body")},_elDlgVisibleColsSetting:null,_getElDlgVisibleColsSetting:function(){return this._elDlgVisibleColsSetting||this._initElDlgVisibleColsSetting()},_initElDlgVisibleColsSetting:function(){return this._elDlgVisibleColsSetting=c("#visible_cols_setting")},_elSelectRecord:null,_getElSelectRecord:function(){return this._elSelectRecord||this._initElSelectRecord()},_initElSelectRecord:function(){return this._elSelectRecord=c(".btn-record_select")},_elDispTabButton:null,_getElDispTabButton:function(){return this._elDispTabButton||this._initElDispTabButton()},_initElDispTabButton:function(){return this._elDispTabButton=c("#menu-view-open")},_elMainTitle:null,_getElMainTitle:function(){return this._elMainTitle||this._initElMainTitle()},_initElMainTitle:function(){return this._elMainTitle=c("#main-title")},_elGetCount:null,_getElGetCount:function(){return this._elGetCount||this._initElGetCount()},_initElGetCount:function(){return this._elGetCount=c("#getcnt")},_elGetCountWait:null,_getElGetCountWait:function(){return this._elGetCountWait||this._initElGetCountWait()},_initElGetCountWait:function(){return this._elGetCountWait=c("#getcntwait")},_elHitCount:null,_getElHitCount:function(){return this._elHitCount||this._initElHitCount()},_initElHitCount:function(){return this._elHitCount=c("#hitcnt")},_getPageSetting:function(){return window.neo_webdb_pg_record_search_rel_key},_getColumns:function(){return window.neo_webdb_columns},constructor:function(){},initialize:function(){var n=this._getTable();n.initialize();var f=this._getElMainTitle();var h=f.outerHeight(true);var k=this._getElOperationPanel();var j=k.outerHeight(true);var e=document.documentElement.clientHeight;var l=e-h-j;var i=this._getElTableScroller();i.height(l);var m=this._getObjImgSizeAdjust();m.initialize();this.updateTableSize();this._hook();var g=c(window);this.__bind(g,"load","Window")},_hook:function(){var e={};e=c(window);this.__bind(e,"resize");e=c(document);this.__bind(e,"mousedown");e=this._getElPanelTabs();e.webdbTabs();e=this._getElSetVisibleCols();this.__bind(e,"click","SetVisibleCols");e=this._getElNumOfRows();this.__bind(e,"change","NumOfRows");e=this._getElSelSearchFilter();this.__bind(e,"change","SearchFilter");e=c("#simple_search");this.__bind(e,"submit","SimpleSearch");if(!this.isTableLayoutType()){e=this._getElSelectRecord();this.__bind(e,"click","SelectRecord")}e=this._getElGetCount();this.__bind(e,"click","GetCount")},hookInTable:function(){element=this._getElTableScroller();this.__bind(element,"scroll");if(c.browser.msie&&c.browser.version<=6){element=this._getElTable()}else{element=this._getElTopTable().add(this._getElTopLeftTable())}this.__bind(element,"mouseover","PartTable");this.__bind(element,"mouseout","PartTable");element=this._getElOpenColMenuBtn();this.__bind(element,"mouseover","OpenColMenuBtn");this.__bind(element,"mouseout","OpenColMenuBtn");this.__bind(element,"click","OpenColMenuBtn");element=this._getElHideCol();this.__bind(element,"click","HideCol");element=this._getElFixCol();this.__bind(element,"click","FixCol");element=this._getElFreeCol();this.__bind(element,"click","FreeCol");element=this._getElColResizeGrip();this.__bind(element,"mouseover","ColResizeGrip");this.__bind(element,"mouseout","ColResizeGrip");element=this._getElSelectRecord();this.__bind(element,"click","SelectRecord")},hookInDetailLayout:function(){var e=this._getElTableOuter();this.__bind(e,"click","DetailLayout")},setNumOfRows:function(){var g=this._getElNumOfRows();var f=g.val();var e=this._getPanel();e.setNumOfRows(f)},setVisibleCols:function(){var e=this._getPanel();e.setVisibleCols()},disableRow:function(i){var h=this._getElTable();var f=this._getElLeftTable();var e=this.getElRowOf(i,h).add(this.getElRowOf(i,f));var g=a.CLS_DISABLED_ROW;e.addClass(g)},enableRow:function(i){var h=this._getElTable();var f=this._getElLeftTable();var e=this.getElRowOf(i,h).add(this.getElRowOf(i,f));var g=a.CLS_DISABLED_ROW;e.removeClass(g)},adjustSize:function(){this.minimizeColResizeGrip();this.updateTableSectionSize();this.updateColResizeGripSize()},updateTableSectionSize:function(){var e=this._getTable();e.updateSectionSize()},minimizeColResizeGrip:function(){var e=this._getColResizer();e.minimize()},updateColResizeGripSize:function(){var e=this._getColResizer();e.updateAllSize()},adjustToTableScrolling:function(){var e=this._getTable();e.scroll()},openDlgVisibleColsSetting:function(){var e=this._getDlgVisibleColsSetting();e.open()},updateColVisibilitySetting:function(){var e=this._getDlgVisibleColsSetting();e._reset()},showColOperationButtons:function(g){var e=this._getTmHideColOperationButtons();clearTimeout(e);var f=this._getColResizer();if(f.isResizing()){return}this.showOpenColMenuBtn(g);this.showColResizeGrip(g)},setColVisibilityBy:function(f){var e=this._getTable();e.setColVisibilityBy(f)},saveColVisibility:function(){var e=this._getTable();e.saveColVisibility()},saveColWidth:function(g,e){var f=this._getTable();f.saveColWidth(g,e)},showColOperationButtons:function(g){var e=this._getTmHideColOperationButtons();clearTimeout(e);var f=this._getColResizer();if(f.isResizing()){return}this.showOpenColMenuBtn(g);this.showColResizeGrip(g)},hideColOperationButtons:function(){var f=this;var e=setTimeout(function(){f.hideOpenColMenuBtn();f.hideColResizeGrip()},1);this._setTmHideColOperationButtons(e)},showOpenColMenuBtn:function(f){var e=this._getColMenu();e.showOpenBtn(f)},hideOpenColMenuBtn:function(){var e=this._getColMenu();e.hideOpenBtn()},showColMenu:function(f){var e=this._getColMenu();e.show()},hideColMenu:function(f){var e=this._getColMenu();e.hide(f)},showColResizeGrip:function(f){var e=this._getColResizer();e.show(f)},hideColResizeGrip:function(){var e=this._getColResizer();e.hide()},showPadUnderColResizeGrip:function(){var e=this._getColResizer();e.showPad()},hidePadUnderColResizeGrip:function(){var e=this._getColResizer();e.hidePadLater()},hideCol:function(f){var e=this._getTable();e.hideCol(f)},fixCol:function(f){var e=this._getTable();e.fixCol(f)},freeCol:function(){var e=this._getTable();e.freeCol()},updateBadgePos:function(){},updateTableSize:function(){if(this.isTableLayoutType()){var e=this._getTable();e.updateSize()}this.updateSelectsColumnCellSize()},updateSelectsColumnCellSize:function(){var i=c(".layout-item-data_selects .selects_list tr");var f=i.parents(".table-data_cell");var h=i.parents(".table_layout-cell_box");for(var g=0;g<i.length;g++){var e=f.eq(g).height();if(!e){continue}i.eq(g).height(e);i.eq(g).css("display","");h.eq(g).css("margin","0px");h.eq(g).css("max-height","9999px")}},updateColVisibilitySetting:function(){var e=this._getDlgVisibleColsSetting();e._reset()},getColVisibilityList:function(e){var g=this._getTable();var f;if(e){f=g.initColVisibilityList()}else{f=g.getColVisibilityList()}return f},adjustToTableScrolling:function(){var e=this._getTable();e.scroll()},isTableLayoutType:function(){var f=this._getPageSetting();var e=f.layoutType;return(e==neo.webdb.pg_dbRecordSearchRelKey.LAYOUT_TYPE_TABLE)},getTableScrolling:function(){var f=this._getElTableScroller();var e={left:f.scrollLeft(),top:f.scrollTop()};return e},getRowIdOf:function(j){var f=j.closest("."+a.CLS_TABLE_ROW);if(f.length<1){return null}var i=new RegExp(" "+a.PFX_CLS_ROW_ID+"(-?\\d*) ");var g=" "+f.attr("class")+" ";var e=g.match(i);if(e){var h=e[1];return h}return null},getColIdOf:function(j){var f=j.closest("td, th");if(f.length<1){return null}var i=new RegExp(" "+a.PFX_CLS_COL_ID+"(-?\\d*) ");var g=" "+f[0].className+" ";var e=g.match(i);if(e){var h=e[1];return h}return null},getItemIdOf:function(j){var f=j.closest("td, th");if(f.length<1){return null}var h=new RegExp(" "+a.PFX_CLS_ITEM_ID+"(-?\\d*) ");var g=" "+f[0].className+" ";var e=g.match(h);if(e){var i=e[1];return i}return null},getItemIdFromColId:function(g){var f=this._getElTable();var e=a.PFX_CLS_COL_ID+g;var h=f.find("th."+e);var i=this.getItemIdOf(h);return i},getElAllTables:function(){var h=this._getElTopLeftTable();var g=this._getElTopTable();var e=this._getElLeftTable();var f=this._getElTable().add(h).add(g).add(e);return f},getColIdFromItemId:function(i){var f=this._getElTable();var e=a.PFX_CLS_ITEM_ID+i;var h=f.find("th."+e);var g=this.getColIdOf(h);return g},getElColCellsOf:function(h,g){if(!g){g=this.getElAllTables()}var e=a.PFX_CLS_COL_ID+h;var f=g.find(">tr, >tbody>tr").children("."+e);return f},_decideKey:function(h){var e=window;if(parent){e=parent}var g=e.opener;if(!g){return}var i=this._getPageSetting();if(g.onChildWindowCallBackDecideRelKey){var f={windowId:i.windowId,result:{relKey:h}};g.onChildWindowCallBackDecideRelKey(f)}e.close()},getColumn:function(g){var e=this._getColumns();var f=e[g];if(!f){throw new Error('neo.pg_dbRecordSearchRelKey.getColumn : Unkown column ID : "'+g+'".')}return f},isColVisible:function(f){var e=this._getTable();return e.isColVisible(f)},getColVisibilityList:function(e){var g=this._getTable();var f;if(e){f=g.initColVisibilityList()}else{f=g.getColVisibilityList()}return f},getTableId:function(){var e=this._getPageSetting();return e.tableId},getWindowId:function(){var e=this._getPageSetting();return e.windowId},getRowHeight:function(){var e=this._getPageSetting();return e.rowHeight},getSearchType:function(){var e=this._getPageSetting();return e.searchType},_submitSimpleSearch:function(){var g=this.getWindowId();var e={url:neo.webdb.getMainUrl(),getSendData:this.__closure(function(){var h={};h.cmd=neo.webdb.pg_dbRecordSearchRelKey.CMD_SIMPLE_SEARCH;h.tid=this.getTableId();h.filterid=this._getElSelSearchFilter().val();h.keyword=this._getElTxtSearchWord().val();h.wid=this.getWindowId();h.mode=neo.webdb.pg_dbRecordSearchRelKey.MODE_STRING_RECORD_SEARCH_KEY;return h}),onsuccess:function(h,j){var i=neo.webdb.getMainUrl()+"?pg=dbrecordsearchrelkey&wid="+g+"&sv_row=0";location.href=i}};var f=new neo.webdb.Ajax(e);f.initialize();f.sendRequest()},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onresize:function(e){this.hideColMenu();this.adjustSize()},onmousedown:function(f){var g=c(f.target);if(g.closest("#col_menu").length<1){var e=g.closest(".table-title_cell");this.hideColMenu(e)}},onchangeNumOfRows:function(e){this.setNumOfRows()},onclickSetVisibleCols:function(e){this.setVisibleCols()},onscroll:function(e){if(this.isTableLayoutType()){this.hideColOperationButtons();this.hideColMenu();this.adjustToTableScrolling()}},onmouseoverPartTable:function(e){var g=c(e.target);var f=g.closest(".table-title_cell");if(f.length>0&&!f.hasClass("selectable_table-checkbox-cell")&&!f.hasClass("table-operations_cell")){this.showColOperationButtons(f);return}},onmouseoutPartTable:function(e){this.hideColOperationButtons()},onmouseoverOpenColMenuBtn:function(e){this.showColOperationButtons()},onmouseoutOpenColMenuBtn:function(e){this.hideColOperationButtons()},onclickOpenColMenuBtn:function(e){this.showColMenu()},onclickHideCol:function(g){this.hideColMenu();var e=this._getColMenu();var f=e.getCurId();this.hideCol(f)},onclickFixCol:function(g){this.hideColMenu();var e=this._getColMenu();var f=e.getCurId();this.fixCol(f)},onclickFreeCol:function(g){this.hideColMenu();var e=this._getColMenu();var f=e.getCurId();this.freeCol(f)},onmouseoverColResizeGrip:function(e){this.showColOperationButtons();this.showPadUnderColResizeGrip()},onmouseoutColResizeGrip:function(e){this.hideColOperationButtons();this.hidePadUnderColResizeGrip()},onclickSelectRecord:function(e){var f=c(arguments[arguments.length-1]);var g=this.getRowIdOf(f);this._decideKey(g)},onsubmitSimpleSearch:function(i){i.preventDefault();var h=this.getSearchType();if(h=="advance"){var g=b;var e=this;var f={onok:function(){e._submitSimpleSearch()}};neo.webdb.confirm(g,f)}else{this._submitSimpleSearch()}},onchangeSearchFilter:function(i){i.preventDefault();var h=this.getSearchType();if(h=="advance"){var g=b;var e=this;var f={onok:function(){e._submitSimpleSearch()},oncancel:function(){e._getElSelSearchFilter().val("")}};neo.webdb.confirm(g,f)}else{this._submitSimpleSearch()}},onclickGetCount:function(h){var f=this._getElGetCount();var j=this._getElGetCountWait();var e=this._getElHitCount();f.hide();j.show();var g={url:neo.webdb.getMainUrl(),getSendData:this.__closure(function(){var k={};k.cmd=neo.webdb.pg_dbRecordSearchRelKey.CMD_LIST_COUNT;k.wid=neo.webdb.getWindowId();k.tid=this.getTableId();return k}),onsuccess:function(k,l){var m=k.result.count||"";j.hide();e.find("b").text(m);e.show()},onerror:function(k,l){j.hide();f.show()}};var i=new neo.webdb.Ajax(g);i.initialize();i.sendRequest()},onclickDetailLayout:function(g){var h=c(g.target);if(h.hasClass("data_image")){var e=h.attr("src");if(e){var f={fileName:h.attr("alt")};neo.webdb.image(e,f)}return}},onloadWindow:function(f){var e=this;setTimeout(function(){e.updateSelectsColumnCellSize()},20)},bunpei:null};c(document).ready(function(){a.initialize()})})(jQuery);