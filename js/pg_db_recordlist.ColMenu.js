(function(a){var c=neo.core.readyNamespace("neo.webdb.pg_view.ColMenu");if(!c){return}var b=neo.webdb.pg_view.ColMenu=new neo.core.Class({classProperties:{CLS_OPEN_MENU_BTN_ACTIVE:"col_menu-open-active",defaultSetting:{}},properties:{setting:null,_showing:null,_isShowing:function(){return this._showing},_setShowing:function(d){return this._showing=d},_elCurCell:null,_getElCurCell:function(){return this._elCurCell},_setElCurCell:function(d){return this._elCurCell=d},_getPage:function(){return this.setting.page},_getElScroller:function(){return this.setting.elScroller},_getElOpenBtn:function(){return this.setting.elOpenBtn},_getElMenu:function(){return this.setting.elMenu},__constructor:function(d){this.setting=d||{}},initialize:function(){this._initSetting();this._initElementBelonging()},_initSetting:function(){var d=this._getDefaultSetting();this.setting=a.extend({},d,this.setting)},_getDefaultSetting:function(){return a.extend({},b.defaultSetting)},_initElementBelonging:function(){var e=this._getElOpenBtn();var d=this._getElMenu();a("body").append(e).append(d)},showOpenBtn:function(e){if(this._isShowing()){return}if(e){this._setElCurCell(e)}else{e=this._getElCurCell()}var d=this._getElOpenBtn();d.show();this._updateBtnPos(e)},_updateBtnPos:function(k){var i=this._getPage();var l=neo.webdb.getRect(k,true);var f=this._getElOpenBtn();var j={height:f.outerHeight(),width:f.outerWidth()};var g=1;var e=0;if(a.browser.mozilla){g-=1;e-=1}var d={left:(l.left+l.width)-j.width+g,top:l.top+e};if(!a.browser.msie||a.browser.version>6){var h=this._getElScroller();if(d.left+j.width>h[0].clientWidth){d.left=-9999}}f.css(d)},hideOpenBtn:function(){if(!this._isShowing()){var d=this._getElOpenBtn();d.hide()}},show:function(){var d=this._getElMenu();d.show();this._updatePos();this._makeBtnActive(true);this._setShowing(true)},_updatePos:function(){var j=this._getElOpenBtn();var i=this._getPage();var d=neo.webdb.getRect(j,true);var f=this._getElMenu();var e={height:f.outerHeight(),width:f.outerWidth()};var h=-1;var g={left:(d.left+d.width)-e.width,top:(d.top+d.height)+h};f.css(g)},hide:function(d){if(!this._isShowing()){return}var e=this._getElMenu();e.hide();this._makeBtnActive(false);this._setShowing(false);if(!d||d.length<1){this.hideOpenBtn()}else{var f=this._getElCurCell();if(d[0]!=f[0]){this.showOpenBtn(d)}}},_makeBtnActive:function(f){var e=this._getElOpenBtn();var d=b.CLS_OPEN_MENU_BTN_ACTIVE;if(f){e.addClass(d)}else{e.removeClass(d)}},getCurId:function(){var e=this._getElCurCell();var f=null;if(e){var d=this._getPage();f=d.getItemIdOf(e)}return f}}})})(jQuery);