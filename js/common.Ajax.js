(function(b){var d=neo.core.readyNamespace("neo.webdb.Ajax");if(!d){return}var c=neo.Ajax;var a=neo.webdb.Ajax=new neo.core.Class({superClass:c,classProperties:{defaults:{dataType:"json",traditional:true},__constructor:function(){this._overwrite()},_overwrite:function(){var e=[];for(var f=0;f<e.length;f++){var g=e[f];neo.core.overwriteMethod(g,NeoDialog,WebdbDialog)}},getInstance:function(e){return NeoDialog.getInstance(e)},setInstance:function(f,e){return NeoDialog.setInstance(f,e)},initialize:function(){this._setDefaults()},_setDefaults:function(){}},properties:{setting:null,__constructor:function(e){this.setting=e||{}},initialize:function(){this._initSetting()},_initSetting:function(){this.options=b.extend({},a.defaults,this.setting)},sendRequest:function(){var f=this._getAjaxOptions();if(!f){return}try{b.ajax(f)}catch(g){}},_getAjaxOptions:function(){var f=b.extend({},this.options);f.data={};if(typeof this.setting.getSendData=="function"){f.data=this.setting.getSendData()}if(f.data.url){f.url=f.data.url;delete f.data.url}if(!f.type){f.type=this._getHttpType(f.data)}if(f.cache==null){f.cache=false}f.success=this.__closure(this.onAjaxSuccess);f.error=this.__closure(this.onAjaxError);if(typeof this.setting.onbeforesend=="function"){var e=this.setting.onbeforesend(f);if(e===false){this.onfinish();return null}}return f},_getErrorMessage:function(f){var e;if(f.errorno!=null){if(f.errormessage!=null&&f.errormessage!=""){e=f.errormessage}else{e=" ["+f.errorno+"]"}}else{switch(f.statusText){case"error":e=neo.Ajax.ajaxMessages.errHttp[f.xhr.status];break;case"parsererror":e=neo.Ajax.ajaxMessages.parsererror;break}if(!e){e=neo.Ajax.ajaxMessages.defaultMessage}}return e},_showError:function(f,e){neo.webdb.alert(f,e)},__closure:neo.core.getClosure,beforeAjaxSend:function(){},onAjaxSuccess:function(e,g){var f=arguments[arguments.length-1];if(!e||!e.result){var h={response:e,statusText:"parsererror"};this.onerror(f,h)}else{if(e.result.status!="ok"){var h={errorno:e.result.errorno,errormessage:e.result.errormessage,response:e,statusText:g};this.onerror(f,h)}else{if(typeof this.setting.onsuccess=="function"){this.setting.onsuccess(e,f)}this.onfinish()}}},onAjaxError:function(h,g,f){var e=arguments[arguments.length-1];var i={xhr:h,statusText:g};this.onerror(e,i)},onerror:function(f,h){var g=this._getErrorMessage(h);var e=null;if(typeof this.setting.onerror=="function"){e=this.setting.onerror(g,f,h)}this.onfinish();if(e===false){return}var f={onok:f.afterShowError};this._showError(g,f)},onfinish:function(){if(typeof this.setting.onfinish=="function"){var e=this.setting.onfinish()}}}});a.__constructor();b(document).ready(function(){a.initialize()})})(jQuery);