(function(c){var d=neo.core.readyNamespace("neo.webdb.dbset_column_user");if(!d){return}var b="（未選択）";var a=neo.webdb.dbset_column_user={_elBtnOk:null,_getElBtnOk:function(){return this._elBtnOk||this._initElBtnOk()},_initElBtnOk:function(){return this._elBtnOk=c("#btnok")},_userSelectDialog:null,_getUserSelectDialogSetting:function(){var e=this;var g=c("[name=def]");var h=c("[name=uname]");var f={single:true,selectedUsers:[{id:g.val(),name:h.text()}],callbackOnChange:function(i){var j=i[0];if(j){g.val(j.id);h.text(j.name)}else{g.val("");h.text(b)}}};return f},constructor:function(){},initialize:function(){this._hook()},_hook:function(){elBtnOk=this._getElBtnOk();this.__bind(elBtnOk,"click","Ok");var e=c('[name="user-select_btn"]');var f=this._getUserSelectDialogSetting();this._userSelectDialog=neo.webdb.bindUserSelectDialog(e,f)},updateSetting:function(){this._buttonOff();var f=this;var e=c("#form");var g={url:e.attr("action"),getSendData:function(){var k=e.serialize();var l=c(":checkbox:enabled:not(:checked)");for(var j=0;j<l.size();j++){k+="&"+l.eq(j).attr("name")+"="}var m=c(":radio:enabled:not(:checked)");for(var j=0;j<m.size();j++){k+="&"+m.eq(j).attr("name")+"="}return k},onsuccess:function(){var i=c("input[name='bp']").val();location.href=i},onerror:function(){f._buttonOn()}};var h=new neo.webdb.Ajax(g);h.initialize();h.sendRequest()},_buttonOff:function(){var e;e=this._getElBtnOk();e.attr("disabled","disabled").removeClass("btn")},_buttonOn:function(){var e;e=this._getElBtnOk();e.removeAttr("disabled").addClass("btn")},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onclickOk:function(e){e.preventDefault();this.updateSetting()}};c(document).ready(function(){a.initialize()})})(jQuery);