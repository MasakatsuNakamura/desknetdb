(function(d){var h=neo.core.readyNamespace("neo.webdb.pg_set_importcsv2");if(!h){return}var g="が複数選択されています。\n";var f="は１つまでしか指定できません。";var e="(なし)";var b="列目";var a="重複";var c=neo.webdb.pg_set_importcsv2={_elBtnNext:null,_getElBtnNext:function(){return this._elBtnNext||this._initElBtnNext()},_initElBtnNext:function(){return this._elBtnNext=d("#btnnext")},_elBtnBack:null,_getElBtnBack:function(){return this._elBtnBack||this._initElBtnBack()},_initElBtnBack:function(){return this._elBtnBack=d("#btnback")},_elChkboxInHeader:null,_getElChkboxInHeader:function(){return this._elChkboxInHeader||this._initElChkboxInHeader()},_initElChkboxInHeader:function(){return this._elChkboxInHeader=d("#chkboxinheader")},_elSelCol:null,_getElSelCol:function(){return this._elSelCol||this._initElSelCol()},_initElSelCol:function(){return this._elSelCol=d("select.pulldown-column-importcsv")},_elDivAssign:null,_getElDivAssign:function(){return this._elDivAssign||this._initElDivAssign()},_initElDivAssign:function(){return this._elDivAssign=d("div.importcsv-assign")},constructor:function(){},initialize:function(){this._hook();this.resetList()},_hook:function(){var i;i=this._getElBtnNext();this.__bind(i,"click","Next");i=this._getElBtnBack();this.__bind(i,"click","Back");i=this._getElChkboxInHeader();this.__bind(i,"click","InHeader");i=this._getElSelCol();this.__bind(i,"change","Col")},saveSetting:function(){var i=d("#importcsv-form");var j={url:i.attr("action"),getSendData:function(){return i.serialize()},onsuccess:function(){var l=d("input[name='np']").val();location.href=l},onerror:function(){}};var k=new neo.webdb.Ajax(j);k.initialize();k.sendRequest()},resetList:function(){var k=this._getElSelCol();var r=this._getElDivAssign();r.text(e);var l;var p;var q;var s=[];var m=[];for(var o=0;o<k.length;o++){l=k.eq(o).val();if(l=="noimport"){continue}for(var n=0;n<s.length;n++){if(l==s[n]){m.push(l);break}}s.push(l);p=k.eq(o).attr("data-id");q=p+b;r.filter('[data-id="'+l+'"]').text(q)}d("table#csv_preview_table").find("th").removeClass("sel-dup");d("table.credb-col_table").find("td").removeClass("sel-dup");for(var o=0;o<m.length;o++){for(var n=0;n<k.length;n++){l=k.eq(n).val();if(l==m[o]){k.eq(n).closest("th").addClass("sel-dup")}}r.filter('[data-id="'+m[o]+'"]').text(a)}},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onclickNext:function(j){j.preventDefault();var i=d("#tbladmins").find("option");i.attr("selected","selected");this.saveSetting()},onclickBack:function(j){j.preventDefault();var i=d("input[name='bp']").val();location.href=i},onclickInHeader:function(j){var i=this._getElChkboxInHeader();if(!!i.attr("checked")==true){d("#send_inheader").val("1")}else{d("#send_inheader").val("0")}},onchangeCol:function(m){var l=d(arguments[arguments.length-1]);var j=l.val();if(j!="noimport"){var n=l.find("option:selected").text();var p=this._getElSelCol();var o=0;for(var k=0;k<p.length;k++){if(p.eq(k).val()==j){o++;if(o>1){var q=n+g;neo.webdb.alert(q);break}}}}this.resetList()},banpei:null};d(document).ready(function(){c.initialize()})})(jQuery);