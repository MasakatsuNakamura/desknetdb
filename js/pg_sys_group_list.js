(function(b){var c=neo.core.readyNamespace("neo.webdb.sysGroupList");if(!c){return}var a=neo.webdb.sysGroupList={_objDel:null,_getObjDel:function(){return this._objDel||this._initObjDel()},_initObjDel:function(){var e={};var d=new a.Del(e);return this._objDel=d},_elGroupTable:null,_getElGroupTable:function(){return this._elGroupTable||this._initElGroupTable()},_initElGroupTable:function(){return this._elGroupTable=b("#grouplist")},_elSelectArea:null,_getSelectArea:function(){return this._elSelectArea||this._initElSelectArea()},_initElSelectArea:function(){return this._elSelectArea=b("#del-selectarea")},_elBtnEntry:null,_getElBtnEntry:function(){return this._elBtnEntry||this._initElBtnEntry()},_initElBtnEntry:function(){return this._elBtnEntry=b("[name=s_entry]")},_elBtnDel:null,_getElBtnDel:function(){return this._elBtnDel||this._initElBtnDel()},_initElBtnDel:function(){return this._elBtnDel=b("[name=s_del]")},_elBtnSelGroup:null,_getElBtnSelGroup:function(){return this._elBtnSelGroup||this._initElBtnSelGroup()},_initElBtnSelGroup:function(){return this._elBtnSelGroup=b("[name=s_selgroup]")},_elStartSorting:null,_getElStartSorting:function(){return this._elStartSorting||this._initElStartSorting()},_initElStartSorting:function(){return this._elStartSorting=b("#group-start_sorting")},_elStopSorting:null,_getElStopSorting:function(){return this._elStopSorting||this._initElStopSorting()},_initElStopSorting:function(){return this._elStopSorting=b("#group-stop_sorting")},constructor:function(){},initialize:function(){this._hook();var f=b(".sortable_table");var e={prevPage:true,nextPage:true,ondrop:function(g,h){a.modSeqnoGroupList(h)}};f.webdbSelectableTable().webdbSortableTable(e);if(f.webdbSortableTable("beforeReloadingIsSortMode")){this.startSorting()}else{this.stopSorting()}var d=f.find(".nolist_cell");if(d.length>0){d.height(d.height())}},_hook:function(){var d;d=this._getElBtnEntry();this.__bind(d,"click","Entry");d=this._getElBtnDel();this.__bind(d,"click","Del");d=this._getElBtnSelGroup();this.selectGroupBind(d);d=this._getElStartSorting();this.__bind(d,"click","StartSorting");d=this._getElStopSorting();this.__bind(d,"click","StopSorting")},selectGroupBind:function(e){var d={selectedGroups:this.GetShowGrp(),havingAll:true,havingFree:false,single:true,callbackOnChange:function(i){var h=neo.webdb.getAdminUrl();var g=b("[name=pg]").val();var f="";if(i.length>0&&i[0].id!="*"){f=i[0].id}var j=h+"?pg="+g+"&sv_gid="+f+"&sv_row=0";location.href=j}};neo.webdb.bindGroupSelectDialog(e,d)},GetShowGrp:function(){var e=b("[name=sv_gid]");var f=b("#showgrp");var d=[];if(e.val().length>0){d[0]={id:e.val(),name:f.html()}}else{d[0]={id:"*",name:"すべて"}}return d},entry:function(){location.href=location.pathname+"?pg=sysgroupentry"},del:function(){var e=this._getObjDel();var g=this._getCheckedIds();var d=this._getCheckedSelectArea();var h="削除してよろしいですか？";var f={onok:function(){e.exec(g,d)}};neo.webdb.confirm(h,f)},_getCheckedIds:function(){var f=this._getElGroupTable();var d=f.find(".selectable_table-checkbox-cell :checked");var e=b.map(d,function(g){return b(g).val()});return e},_getCheckedSelectArea:function(){var d=this._getSelectArea();return d.val()},modSeqnoGroupList:function(i){var e=b("#grouplist-form");var d=b("input[name='chkgid']").val();var g=b("input[name='sv_gid']").val();var f={url:e.attr("action"),getSendData:function(){var n=b('input[name="currow"]').val();var j=parseInt(n)+i.insertIntoIndex;var l=i.elTargetRow.find('input[type="checkbox"]:checked');var m="cmd=grouplistmodseq&tgtrow="+j+"&gid="+g;for(var k=0;k<l.size();k++){m+="&chkgid="+l.eq(k).val()}return m},onsuccess:function(){if(i.pageMoved){var j=e.attr("action")+"?pg=sysgrouplist";location.href=j}},onerror:function(){}};var h=new neo.webdb.Ajax(f);h.initialize();h.sendRequest()},startSorting:function(){var f=b(".sortable_table");f.webdbSortableTable("start");var d=this._getElStartSorting();d.hide();var e=this._getElStopSorting();e.show()},stopSorting:function(){var f=b(".sortable_table");f.webdbSortableTable("stop");var d=this._getElStartSorting();d.show();var e=this._getElStopSorting();e.hide()},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onclickEntry:function(d){this.entry()},onclickDel:function(d){this.del()},onclickStartSorting:function(d){d.preventDefault();this.startSorting()},onclickStopSorting:function(d){d.preventDefault();this.stopSorting()}};b(document).ready(function(){a.initialize()})})(jQuery);