(function(b){var c=neo.core.readyNamespace("neo.webdb.dbsetbasicset");if(!c){return}var a=neo.webdb.dbsetbasicset={_elBtnOk:null,_getElBtnOk:function(){return this._elBtnOk||this._initElBtnOk()},_initElBtnOk:function(){return this._elBtnOk=b("#btnok")},_elBtnAdd:null,_getElBtnAdd:function(){return this._elBtnAdd||this._initElBtnAdd()},_initElBtnAdd:function(){return this._elBtnAdd=b("#btnadd")},_elBtnDel:null,_getElBtnDel:function(){return this._elBtnDel||this._initElBtnDel()},_initElBtnDel:function(){return this._elBtnDel=b("#btndel")},_getDbTree:function(){var d=neo.webdb.getTopWindow();return d.neo.webdb.pg_frame._getDbTree()},constructor:function(){},initialize:function(){this._hook();this._hookSelectUser()},_hook:function(){elBtnOk=this._getElBtnOk();this.__bind(elBtnOk,"click","Ok");elBtnDel=this._getElBtnDel();this.__bind(elBtnDel,"click","DelAdminUser")},_hookSelectUser:function(){var d=this._getElBtnAdd();var e={selectedUsers:this.selectedUsers(),freeVisibility:true,selectedUserVisibility:true,single:false,updateIdList:this.__closure(this.selectedUsers),callbackOnChange:this.__closure(this.onchangeUser)};neo.webdb.bindUserSelectDialog(d,e)},selectedUsers:function(){var f=[];var d=b("#tbladmins").find("option");for(var e=0;e<d.length;e++){var g=d.eq(e);if(g.val()==""){break}f[e]={id:g.val(),name:g.text()}}return f},onchangeUser:function(e){var d=b("#tbladmins");d.children().remove();if(e.length<=0){return}for(var g=0;g<e.length;g++){var h=b("<option />").attr("title",e[g].name).text(e[g].name);h.val(e[g].id);d.append(h)}var f='<option value="" disabled="disabled">&nbsp;</option>';d.append(f)},updateTableSet:function(){var d=b("#form");var e={url:neo.webdb.getDbSettingUrl(),getSendData:function(){var j=d.serialize();var h=b("#tbladmins");for(var g=0;g<h.children().length;g++){j+="&tbladmins="+h.children().eq(g).val()}return j},onsuccess:this.__closure(function(h){var k=null;var g=b("[name=tblname]").val();var m=b("[name=status]:checked").val();var j=this._getDbTree();if(h.result.newtid){k=h.result.newtid;j.appendElDbItem(k,g);j.modifyDbService(k,m)}else{k=b("[name=tid]").val();j.modifyDbName(k,g);j.modifyDbService(k,m)}var l=neo.core.splitParam(location.href);var i=l.fpg;if(i){location.href=i+"&tid="+k}else{history.back()}}),onerror:function(){}};var f=new neo.webdb.Ajax(e);f.initialize();f.sendRequest()},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onclickOk:function(d){d.preventDefault();this.updateTableSet()},onclickDelAdminUser:function(e){var d=b("#tbladmins");d.children().remove(":selected")}};b(document).ready(function(){a.initialize()})})(jQuery);