(function(b){var c=neo.core.readyNamespace("neo.webdb.pg_view.advancedSearch");if(!c){return}var a=neo.webdb.pg_view.advancedSearch={_freeFilter:null,_getFreeFilter:function(){return this._freeFilter||this._initFreeFilter()},_initFreeFilter:function(){var d=this._getFilterMan();var g=d.getConditionManipulatorMan();var e=neo.webdb.pg_view.advancedSearch.Filter.Manager.ID_FREE;var f={conditionManipulatorMan:g,editable:true,elConditionsContainer:this._getElConditionsContainer(),elDetail:this._getElFreeFilter(),id:e};return this._freeFilter=new a.FreeFilter(f)},_filterMan:null,_getFilterMan:function(){return this._filterMan||this._initFilterMan()},_initFilterMan:function(){var d={columns:neo_webdb_columns,editable:true,elConditionsContainer:this._getElConditionsContainer(),filterDetails:neo_webdb_Filter_details};return this._filterMan=new a.Filter.Manager(d)},_elFreeFilter:null,_getElFreeFilter:function(){return this._elFreeFilter||this._initElFreeFilter()},_initElFreeFilter:function(){return this._elFreeFilter=b(".search-free_form")},_elFilterSelector:null,_getElFilterSelector:function(){return this._elFilterSelector||this._initElFilterSelector()},_initElFilterSelector:function(){var d=b(".search-filter_selector");d.val("");return this._elFilterSelector=d},_elBtnExecSearch:null,_getElBtnExecSearch:function(){return this._elBtnExecSearch||this._initElBtnExecSearch()},_initElBtnExecSearch:function(){return this._elBtnExecSearch=b("#btn-exec-search")},_elConditionsContainer:null,_getElConditionsContainer:function(){return this._elConditionsContainer||this._initElConditionsContainer()},_initElConditionsContainer:function(){return this._elConditionsContainer=b("#filter_condition-container")},constructor:function(){},initialize:function(){var e=this._getFreeFilter();e.initialize();var d=this._getFilterMan();d.initialize();this._setPreSearchCondition();this._hook();var g;for(var f in neo_webdb_Filter_presearch){g=neo_webdb_Filter_presearch[f];break}if(!g){e.addCondition()}},_hook:function(){var d;d=this._getElFilterSelector();this.__bind(d,"change","SelectFilter");d=this._getElBtnExecSearch();this.__bind(d,"click","ExecSearch")},_setPreSearchCondition:function(){var h=this._getElFilterSelector();var d=this._getFilterMan();for(var g in neo_webdb_Filter_presearch){detail=neo_webdb_Filter_presearch[g];if(!detail){continue}if(g=="*new*"){this._getFreeFilter().resetCondition(detail)}else{var f=d.getElFilter(g,detail.name);if(f){f.insertBefore(h);var e=d._details.get(g);e.resetCondition(detail)}}}},addFilter:function(){var h=this._getElFilterSelector();var g=h.val();var e=h.children('[value="'+g+'"]').text();h.val("");var d=this._getFilterMan();var f=d.getElFilter(g,e);if(f){f.insertBefore(h)}},execSearch:function(){this._buttonOff();var d=this;var h=this._getSearchiQuery();var f=neo_webdb_cmdurl+"&"+h;var e={url:location.pathname,getSendData:(function(){var i=f;return function(){return i}})(),onsuccess:function(){location.href=neo_webdb_nexturl},onerror:function(){d._buttonOn()}};var g=new neo.webdb.Ajax(e);g.initialize();g.sendRequest()},_getSearchiQuery:function(){var e=this._getFreeFilter();var g=e.getQuery(0);var d=this._getFilterMan();var h=d.getQuery();var f=g+"&"+h;return f},_buttonOff:function(){var d;d=this._getElBtnExecSearch();d.attr("disabled","disabled").removeClass("btn")},_buttonOn:function(){var d;d=this._getElBtnExecSearch();d.removeAttr("disabled").addClass("btn")},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onchangeSelectFilter:function(d){this.addFilter()},onclickExecSearch:function(d){this.execSearch()}};b(document).ready(function(){a.initialize()})})(jQuery);