(function(b){var e=neo.core.readyNamespace("neo.webdb.db_credbtemplate2");if(!e){return}var d="が複数選択されています。\n";var c="は１つまでしか指定できません。";var a=neo.webdb.db_credbtemplate2={_elBtnNext:null,_getElBtnNext:function(){return this._elBtnNext||this._initElBtnNext()},_initElBtnNext:function(){return this._elBtnNext=b("#btnnext")},_elBtnBack:null,_getElBtnBack:function(){return this._elBtnBack||this._initElBtnBack()},_initElBtnBack:function(){return this._elBtnBack=b("#btnback")},_elBtnAdd:null,_getElBtnAdd:function(){return this._elBtnAdd||this._initElBtnAdd()},_initElBtnAdd:function(){return this._elBtnAdd=b("#btnadd")},_elBtnDel:null,_getElBtnDel:function(){return this._elBtnDel||this._initElBtnDel()},_initElBtnDel:function(){return this._elBtnDel=b("#btndel")},constructor:function(){},initialize:function(){this._hook();this._hookSelectUser()},_hook:function(){elBtnNext=this._getElBtnNext();this.__bind(elBtnNext,"click","Next");elBtnBack=this._getElBtnBack();this.__bind(elBtnBack,"click","Back");elBtnAdd=this._getElBtnAdd();this.__bind(elBtnAdd,"click","Add");elBtnDel=this._getElBtnDel();this.__bind(elBtnDel,"click","Del")},_hookSelectUser:function(){var f=this._getElBtnAdd();var g={selectedUsers:this.selectedUsers(),freeVisibility:true,selectedUserVisibility:true,single:false,updateIdList:this.__closure(this.selectedUsers),callbackOnChange:this.__closure(this.onchangeUser)};neo.webdb.bindUserSelectDialog(f,g)},selectedUsers:function(){var h=[];var f=b("#tbladmins").find("option");for(var g=0;g<f.length;g++){var j=f.eq(g);if(j.val()==""){break}h[g]={id:j.val(),name:j.text()}}return h},onchangeUser:function(g){var f=b("#tbladmins");f.children().remove();if(g.length<=0){return}for(var j=0;j<g.length;j++){var k=b("<option />").attr("title",g[j].name).text(g[j].name);k.val(g[j].id);f.append(k)}var h='<option value="" disabled="disabled">&nbsp;</option>';f.append(h)},chkSetting:function(){var f=b("#credbtemplate-form");var g={url:f.attr("action"),getSendData:function(){return f.serialize()},onsuccess:function(){var i=b("input[name='np']").val();location.href=i},onerror:function(){}};var h=new neo.webdb.Ajax(g);h.initialize();h.sendRequest()},__closure:neo.core.getClosure,__bind:neo.jq.bindListener,onclickNext:function(g){g.preventDefault();var f=b("#tbladmins").find("option");f.attr("selected","selected");this.chkSetting()},onclickBack:function(g){g.preventDefault();var f=b("input[name='bp']").val();location.href=f},onclickAdd:function(f){f.preventDefault()},onclickDel:function(g){g.preventDefault();var f=b("#tbladmins");f.children().remove(":selected")}};b(document).ready(function(){a.initialize()})})(jQuery);