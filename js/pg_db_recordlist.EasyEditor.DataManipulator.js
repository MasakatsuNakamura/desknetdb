(function(c){var d=neo.core.readyNamespace("neo.webdb.pg_view.EasyEditor.DataManipulator");if(!d){return}var b=neo.webdb.pg_view;var a=neo.webdb.pg_view.EasyEditor.DataManipulator=new neo.core.Class({classProperties:{defaultSetting:{}},properties:{setting:null,_data:null,_getData:function(){return this.setting.data},_setData:function(e){return this.setting.data=e},_colManiplator:null,_getColManiplator:function(){return this._colManiplator||this._initColManiplator()},_initColManiplator:function(){var e=this._getColId();var f=this._getPage();var g=f.getColumnManipulator(e);return this._colManiplator=g},_elForm:null,getElForm:function(){return this._elForm||this._initElForm()},_initElForm:function(){return this._elForm=c("<div></div>")},_tmpnm:"",getTempNum:function(){return this._tmpnm},_isHook:false,_isElFormOk:false,_backupElForm:null,_getRowId:function(){return this.setting.data.recordid},_getColId:function(){return this.setting.data.column_id},_getPage:function(){return this.setting.page},__constructor:function(e){this.setting=e||{}},initialize:function(){this._initSetting()},_initSetting:function(){var e=this._getDefaultSetting();this.setting=c.extend({},e,this.setting)},_getDefaultSetting:function(){return c.extend({},a.defaultSetting)},getValues:function(){var f=this.getElForm();var e=this._getFromForm(f);return e},_getFromForm:function(f){var g=this._getColManiplator();if(!g){return null}var e=g.getColumnMap(f);return e},getErrorMessage:null,decide:function(){var f=this.getValues();var e=this._getData();if(!f){return}f.column_id=e.column_id;f.recordid=e.recordid;f.tid=e.tid;this._setData(f)},clearForm:function(){this._isElFormOk=false;this._tmpnm="";var e=this._getColManiplator();if(!e){return}e.cleanColumn(this._backupElForm);this._backupElForm=this.getElForm().clone()},cancel:function(){},reset:function(){this._restoreElFormFromBackup();this._tmpnm="";var f=this.getElForm();var e=this._getData();this._setToForm(f,e)},_setToForm:function(g,f){var e=this;var h={recordId:this._getRowId(),isEasyEditMode:true};var i=this._getColManiplator();if(!i){return}i.setting.callbackOnSetTmpnm=function(j){e._tmpnm=j};i.setting.callbackOnGetTmpnm=function(){return e._tmpnm};i.setColumnId(g,f.column_id);if(!this._isHook){i.hookColumn(g,h);this._isHook=true}},_restoreElFormFromBackup:function(){if(!this._backupElForm){return}var e=this._backupElForm.clone();if(this._elForm){this._elForm.replaceWith(e)}this._elForm=e;this._isElFormOk=true;this._isHook=false},loadElFormPrototype:function(l){var e=this._getColId();var g=this._getRowId();var j=this._getPage();var f=j.getTableId();var k=j.getViewId();var h=j.getColumn(e);var n=this;var o={callbackOnSuccess:function(r){var q=g+"_"+e;var s=r.result.recorddata[q];if(s==undefined||s==null||s==""){return}var p=c(s.element);n._backupElForm=p;l()},callbackOnError:function(q,p,r){}};var m="true";if(h.type==b.COLUMN_TYPE_RELREF){m="false"}var i=new neo.webdb.Record.GetTableDataCellElement(o);i.exec(f,g,e,k,b.LAYOUT_TYPE_DETAIL,m,"","true")}}})})(jQuery);