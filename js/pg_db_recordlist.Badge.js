(function(e){var f=neo.core.readyNamespace("neo.webdb.pg_view.Badge");if(!f){return}var d=neo.webdb.pg_view.Badge=new neo.core.Class({classProperties:{defaultSetting:{}},properties:{setting:null,_elBadge:null,_getElBadge:function(){return this._elBadge||this._initElBadge()},_initElBadge:function(){var g=this._buildElement();g.css({top:-9999}).appendTo("body");return this._elBadge=g},_elFixedBadge:null,_getElFixedBadge:function(){return this._elFixedBadge||this._initElFixedBadge()},_initElFixedBadge:function(){var h=this._getElBadge();var g=h.clone();g.css({top:-9999}).appendTo("body");return this._elFixedBadge=g},_getPage:function(){return this.setting.page},_getElCell:function(){return this.setting.elCell},_setElCell:function(g){return this.setting.elCell=g},_getElPrototype:null,__constructor:function(g){this.setting=g||{}},initialize:function(){this._initSetting()},_initSetting:function(){var g=this._getDefaultSetting();this.setting=e.extend({},g,this.setting)},_getDefaultSetting:function(){return e.extend({},d.defaultSetting)},_buildElement:function(){var h=this._getElPrototype();var g=h.clone().removeAttr("id");return g},show:function(){this.updatePos();var g=this._getElBadge().add(this._getElFixedBadge());g.fadeIn()},hide:function(){var g=this._getElBadge().add(this._getElFixedBadge());g.hide()},updatePos:function(){var g=this._getPage();var h=g.getTableScrolling();this._updateScrollablePos(h);if(!e.browser.msie||e.browser.version>6){this._updateFixedPos(h)}},_updateScrollablePos:function(j){var g=this._getElBadge();g.css({top:-9999});var h=this._getElCell();var i=this._calclatePos(j,h,g);g.appendTo(h).css(i)},_updateFixedPos:function(j){var h=this._getElFixedCell();var g=this._getElFixedBadge();if(h.length>0){var i=this._calclatePos(null,h,g);g.appendTo(h).css(i)}else{g.css({top:-9999})}},_getElFixedCell:function(){var g=this._getElCell();var k=this._getPage();var l=k.getRowIdOf(g);var i=k.getColIdOf(g);var h=k._getElLeftTable();var j=k.getElCellOf(l,i,h);return j},_calclatePos:function(n,l,g){if(!n){n={left:0,top:0}}var k=this._getPage();var h=neo.webdb.getRect(l);var i={height:g.height(),width:g.width()};var j=1;var m={left:n.left+h.left+h.width-i.width-j,top:n.top+h.top+h.height-i.height-j};return m}}});var c=neo.webdb.pg_view.EditBadge=new neo.core.Class({superClass:d,classProperties:{SHOWING_DELAY:500},properties:{_tmShow:null,_getTmShow:function(){return this._tmShow},_setTmShow:function(g){return this._tmShow=g},_scrolling:null,_getScrolling:function(){return this._scrolling},_setScrolling:function(g){return this._scrolling=g},_getElPrototype:function(){return e("#badge-edit-prototype")},show:function(n,k){var m=this._getPage();var l=m.getElRealCellOf(n,k);this._setElCell(l);this.hide();var g=this._getTmShow();clearTimeout(g);var j=c.SHOWING_DELAY;var i=this;var h=setTimeout(function(){i.__call("show")},j);this._setTmShow(h)},hide:function(){this.__call("hide");var g=this._getTmShow();clearTimeout(g);this._setTmShow(null)},edit:function(){var i=this._getElCell();var h=this._getPage();var j=h.getRowIdOf(i);var g=h.getColIdOf(i);h.editData(j,g)},updateScrolling:function(){var g=this._getPage();var h=g.getTableScrolling();this._setScrolling(h)}}});var b=neo.webdb.pg_view.ConnectingBadge=new neo.core.Class({superClass:d,properties:{_getElPrototype:function(){return e("#badge-connecting-prototype")}}});var a=neo.webdb.pg_view.ErrorBadge=new neo.core.Class({superClass:d,properties:{_getElPrototype:function(){return e("#badge-error-prototype")}}})})(jQuery);