/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){(function(b){desknets.set={PAGE_SETADMIN:"setadmin",PAGE_SETHOLIDAYCAL:"setholidaycal",PAGE_SETHOLIDAYCALENTRY:"setholidaycalentry",CMD_SETHOLIDAYCAL:"setcmdholidaycal",CMD_SETHOLIDAYCALENTRY:"setcmdholidaycalentry",CMD_SETHOLIDAYCALDEL:"setcmdholidaycaldel",PAGE_SETHOLIDAY:"setholiday",PAGE_SETHOLIDAYENTRY:"setholidayentry",PAGE_SETHOLIDAYIMP:"setholidayimp",CMD_SETHOLIDAYLENTRY:"setcmdholidayentry",CMD_SETHOLIDAY:"setcmdholiday",CMD_SETHOLIDAYLENTRYCONF:"setcmdholidayentryconf",CMD_SETHOLIDAYLDEL:"setcmdholidaydel",PAGE_SETUSERS:"setusers",CMD_SETUSERS:"setcmdusers",CMD_SETUSERDELCONF:"setcmduserdelconf",CMD_SETUSERDEL:"setcmduserdelete",CMD_SETUSERSUSPENSION:"setcmdusersuspension",CMD_SETUSERLOGINRESET:"setcmduserloginreset",CMD_SETUSERMVUSERS:"setcmdusermvusers",CMD_SETUSERSORTPOST:"setcmdusersortpost",CMD_SETUSERGRPASSIGNENTRY:"setcmdusergroupassignentry",PAGE_SETUSERENTRY:"setuserentry",CMD_SETUSERENTRY:"setcmduserentry",CMD_SETUSERIMPORT:"setcmduserimport",PAGE_SETGROUPS:"setgroups",CMD_SETGROUPS:"setcmdgroups",PAGE_SETGROUPENTRY:"setgroupentry",CMD_SETGROUPENTRY:"setcmdgroupentry",CMD_SETGROUPMVSEQNO:"setcmdgroupmvseqno",CMD_SETGROUPMVLEVEL:"setcmdgroupmvlevel",CMD_SETGROUPDELETE:"setcmdgroupdelete",CMD_SETGROUPIMPORT:"setcmdgroupimport",PAGE_SETROLES:"setroles",CMD_SETROLES:"setcmdroles",PAGE_SETROLEENTRY:"setroleentry",CMD_SETROLEMOVE:"setcmdrolemove",CMD_SETROLEDEL:"setcmdroledel",CMD_SETROLEDELCONF:"setcmdroledelconf",PAGE_SETNOTICE:"setnotice",PAGE_SETMODULES:"setmodules",CMD_SETMODULES:"setcmdmodules",CMD_SETMODULEMENU:"setcmdmodulemenu",PAGE_SETMODULEENTRY:"setmoduleentry",CMD_SETMODULEENTRY:"setcmdmoduleentry",CMD_SETMODULEENTRYMOVE:"setcmdmodulemove",PAGE_SETOPTWINDOWS:"setoptwindows",CMD_SETOPTWINDOWICONS:"setcmdoptwindowicons",PAGE_SETOPTWINDOWENTRY:"setoptwindowentry",CMD_SETOPTWINENTRY:"setcmdoptwindowentry",CMD_SETOPTWINDOWLDEL:"setcmdoptwindowdel",CMD_SETOPTWINDOWMV:"setcmdoptwindowmove",PAGE_SETLOGINWINDOW:"setloginwindow",CMD_SETLOGINWINDOWSET:"setcmdloginwindowset",CMD_SETLOGINWINDOWDEL:"setcmdloginwindowdel",CMD_SETLOGINWINDOWADD:"setcmdloginwindowadd",PAGE_SETLOGINWINPREV:"setloginwinprev",CMD_SETLOGINWINPREVMOVE:"setcmdloginwinprevmove",PAGE_SETLOGINMOBILE:"setmblogin",CMD_SETLOGINMOBILE:"setcmdmblogin",CMD_SETLOGINLOGO:"setcmdloginlogo",CMD_SETLOGINTMPLOGO:"setcmdlogintmplogo",PAGE_SETLOGINTMPLOGO:"setlogintmplogo",PAGE_SETMOBILEMODULES:"setmobilemodules",CMD_SETMOBILEMODULES:"setcmdmobilemodules",PAGE_SETMOBILEMODULEENTRY:"setmobilemoduleentry",CMD_SETMOBILEMODULEENTRY:"setcmdmobilemoduleentry",PAGE_SETLICENSELIST:"setlicenselist",CMD_SETLICENSELIST:"licenselist",PAGE_SETLICENSEINPUT:"setlicenseinput",CMD_SETLICENSEDEL:"licensecmddel",CMD_SETLICENSET:"licensecmd",PAGE_SETLICENSECLIST:"setlicensecustomerlist",CMD_SETLICENSECLIST:"licenseclist",PAGE_SETADDONUSE:"setaddonuse",CMD_SETADDONUSE:"setcmdaddonuse",PAGE_SETSSOCLIENTLIST:"setssoclientlist",CMD_SETSSOCLIENTLIST:"setcmdssoclientlist",PAGE_SETSSOCLIENTINPUT:"setssoclientinput",CMD_SETSSOCLIENTINPUT:"setcmdssoclientinput",CMD_SETSSOCLIENTDEL:"setcmdssoclientdelete",CMD_SETSSOCLIENTDELCONF:"setcmdssoclientdeleteconf",VAL_HCAL_GRPCOND_ON:"1",VAL_HCAL_GRPCOND_OFF:"0",VAL_COMMONJ_HOLIDAYCALID:"0",PRM_VAL_ALL:"all",init:function(){var c=b("#jco-pv-funcid").val();desknets.hashobserver.init(desknets.set);desknets.pageframe.setFuncSel(c);if(c=="setholidaycal"){desknets.set.setholidaycal.init()}else{if(c=="setdesign"||c=="setoffice"||c=="setlang"||c=="setaccess"||c=="setattache"||c=="setrefresh"||c=="sethelp"||c=="setloginpwdpolicy"||c=="setmobilesetmenu"||c=="setversion"||c=="setaddonuse"){desknets.set.setinput.init()}else{if(c=="setnotice"){desknets.set.setnotice.init()}else{if(c=="setmobilemodules"){desknets.set.setmobilemodules.init()}else{if(c=="setloginlogo"){desknets.set.setloginlogo.init()}else{if(c=="setusers"){desknets.set.setusers.init()}else{if(c=="setuserimport"){desknets.set.setuserimport.init()}else{if(c=="setuserexport"){desknets.set.setuserexport.init()}else{if(c=="setuserpset"){desknets.set.setuserpset.init()}else{if(c=="setuserdispitem"){desknets.set.setuserdispitem.init()}else{if(c=="setuserlistdispitem"){desknets.set.setuserlistdispitem.init()}else{if(c=="setgroups"){desknets.set.setgroups.init()}else{if(c=="setgroupimport"){desknets.set.setgroupimport.init()}else{if(c=="setgroupexport"){desknets.set.setgroupexport.init()}else{if(c=="setroles"){desknets.set.setroles.init()}else{if(c=="setroleimport"){desknets.set.setroleimport.init()}else{if(c=="setroleexport"){desknets.set.setroleexport.init()}else{if(c=="setloginwindow"){desknets.set.setloginwindow.init()}else{if(b("#sysad-login-navi").length>0){desknets.set.setloginwinprev.init()}else{if(c=="setlogin"){desknets.set.setlogin.init()}else{if(c=="setsmtp"){desknets.set.setmailserver.init()}else{if(c=="setmblogin"){desknets.set.setloginmobile.init()}else{if(c=="setmbattach"){desknets.set.setmbattach.init()}else{if(c=="setlicenselist"){desknets.set.setlicenselist.init()}else{if(c=="setsavesetting"){desknets.set.setsavesetting.init()}else{if(c=="setssoclientlist"){desknets.set.setssoclientlist.init()}else{if(!!desknets.set[c]){b(function(){desknets.set[c].init()})}}}}}}}}}}}}}}}}}}}}}}}}}}}desknets.set.subwin.init()}}})(jQuery);desknets.page(desknets.set,"setinput",desknets.PageSet,{_getNextCmd:function(){return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"subwin",null,{boIsModOptmenu:false,boIsModMenu:false,init:function(){var b=this;desknets.set.optmenuUtil.init()},banpei:null});desknets.set.optmenuUtil={_TMPL_OPTMENU:'<li class="dn-s-menu-item"><a target="opt{{id}}" href="cmd=optsetoptmenuwin&id={{id}}"><div>{{img}}</div><div>{{optname}}</div></a></li>',_TMPL_IMG:'<img height="16" width="19" src="{{icon}}" />',_TMPL_ICON:"{{referUrl}}?cmd=referdownload&item1=option_menu&filename={{id}}.{{fileext}}&mimetype={{mimetype}}&realname={{filename}}&updtime={{updtime}}",init:function(){var b=this;var c=desknets.getUrl(desknets.MODULE_REFER);b._TMPL_ICON=desknets.tmpl.replaceWordHtml(b._TMPL_ICON,"referUrl",c)},getIconUrl:function(f,d,b,e){var c=this;if(d){return c._getStoredIconUrl(f,d,b,e)}else{return"/"+desknets.DIR_RESHOME+"/images/com/dn-side_option_back.png"}},_getStoredIconUrl:function(h,d,b,g){var c=this;var f=d.replace(/^.+\./,"");var e=c._TMPL_ICON;e=desknets.tmpl.replaceWordHtml(e,"id",h);e=desknets.tmpl.replaceWordHtml(e,"filename",encodeURIComponent(d));e=desknets.tmpl.replaceWordHtml(e,"mimetype",encodeURIComponent(b));e=desknets.tmpl.replaceWordHtml(e,"fileext",encodeURIComponent(f));e=desknets.tmpl.replaceWordHtml(e,"updtime",g);return e},getOptmenu:function(f,b,d){var c=this;var e=c._TMPL_IMG;if(d){e=desknets.tmpl.replaceWordHtml(e,"icon",d)}else{e=""}return c._getStoredOptmenu(f,b,e)},_getStoredOptmenu:function(f,b,e){var c=this;var d=c._TMPL_OPTMENU;d=desknets.tmpl.replaceWordHtml(d,"id",f);d=desknets.tmpl.replaceWord(d,"optname",b);d=desknets.tmpl.replaceWordHtml(d,"img",e);return d}};desknets.set.menuUtil={_TMPL_MENU:'<li class="dn-s-menu-item{{on}}"><a href="{{cginame}}.{{ext}}?cmd={{toppage}}{{acclog}}" {{target}}>{{name}}</a></li>',getMenu:function(c,b,d,i,g,h){var j=this;var f="";var e="";if(c==2){f=" on"}else{f=""}if(g=="blank"){e='target="'+i+'"'}else{e=""}return j._getStoredMenu(b,d,i,e,f,h)},_getStoredMenu:function(c,i,e,g,f,h){var b=this;var d=b._TMPL_MENU;d=desknets.tmpl.replaceWord(d,"name",c);d=desknets.tmpl.replaceWord(d,"cginame",i);d=desknets.tmpl.replaceWord(d,"toppage",e);d=desknets.tmpl.replaceWord(d,"target",g);d=desknets.tmpl.replaceWordHtml(d,"on",f);d=desknets.tmpl.replaceWordHtml(d,"acclog",h);d=desknets.tmpl.replaceWordHtml(d,"ext",desknets.getExtension());return d}};desknets.page(desknets.set,"setusers",desknets.usetset.usetmsetusers,{initLeftTree:function(){var b=this;b._tree=a.extend({},desknets.set.usersgroupTree);b._tree.options=b._getOptionLeftTree();b._tree.init(b.$mjListPage,b._getOptionLeftTree())},treeUpdateListWidth:function(){var b=this;desknets.set.usersgroupTree.resize()},_getOptionLeftTree:function(){var b=this;var c=b.callBase("_getOptionLeftTree");c.module=desknets.chooser.MODULE;c.cmdgroups=desknets.chooser.CMD_GROUPS;c.cmdgrouptree=desknets.chooser.CMD_GROUPTREE;c.chooseTarget=["user"];return c},_getListCmd:function(){return desknets.set.PAGE_SETUSERS},_getListExecCmd:function(){return desknets.set.CMD_SETUSERS},_getListAddCmd:function(){return desknets.set.PAGE_SETUSERENTRY},_getDelCmd:function(){return desknets.set.CMD_SETUSERDELCONF},_getDelExecCmd:function(){return desknets.set.CMD_SETUSERDEL},_getMoveListCmd:function(){return desknets.set.CMD_SETUSERGRPASSIGNENTRY},_getSortableListCmd:function(){return desknets.set.CMD_SETUSERMVUSERS},_getSortPostListCmd:function(){return desknets.set.CMD_SETUSERSORTPOST},_getSuspensionCmd:function(){return desknets.set.CMD_SETUSERSUSPENSION},_getLoginResetCmd:function(){return desknets.set.CMD_SETUSERLOGINRESET},_getListEntryClass:function(){return desknets.set.setusersentry}});desknets.page(desknets.set,"usersgroupTree",desknets.usetset.usetgroupTree,{});desknets.page(desknets.set,"setusersentry",desknets.usetset.usetmsetuserentry,{_getAddExecCmd:function(){return desknets.set.CMD_SETUSERENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},_getDelCmd:function(){return desknets.set.CMD_SETUSERDELCONF},_getDelExecCmd:function(){return desknets.set.CMD_SETUSERDEL},_getSuspensionCmd:function(){return desknets.set.CMD_SETUSERSUSPENSION}});desknets.page(desknets.set,"setuserpset",desknets.PageSet,{init:function(){var b=this;var c=a(".co-m-content");b._initEventProfileSet(c);b._setEntryOffTr(c.find('input[type="checkbox"]'));b.callBase("init");if(!desknets.pageframe.isCost()){c.find(".mset-cost-data").hide()}},_initEventProfileSet:function(c){var b=this;c.delegate('input[type="checkbox"]',"change",function(d){b._setEntryOffTr(a(this))})},_setEntryOffTr:function(c){var b=this;a.each(c,function(e,g){var h=a(g);var f=h.closest("tr");if(h.hasClass("jset-pset-nocheck")){return true}var d=h.attr("name");if(h.attr("checked")){f.removeClass("co-tr-off");if(d=="lang_id"){f.next("tr").removeClass("co-tr-off")}}else{f.addClass("co-tr-off");if(d=="lang_id"){f.next("tr").addClass("co-tr-off")}}})},_getNextCmd:function(){return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"setuserdispitem",desknets.set.setuserpset,{});desknets.page(desknets.set,"setuserimport",desknets.usetset.usetmsetimport,{_getChkCmd:function(){return desknets.set.CMD_SETUSERIMPORT}});desknets.page(desknets.set,"setuserexport",desknets.usetset.usetmsetexport,{});desknets.page(desknets.set,"setuserlistdispitem",desknets.PageSet,{$mform:null,$mulayout:null,$mselarea:null,$mprev:null,mboSelDrag:false,$mchkinputmod:null,init:function(){var b=this;b.callBase("init");b.$mform=a(b._mIdPageForm);b.$mulayout=b.$mform.find(".set-ulayout-drag-set");b.$mselarea=b.$mform.find(".set-ulayout-drag");b.$mchkinputmod=b.$mform.find('input[name="chkdatemod"]');b._setupData();a(".set-ulayout-content").show();b._resetLayoutSize(0);b._setupUserViewDel();b._setupBeforeSubmit();b._resetDragSetUp();b._resetDragLayoutSize();b._setupUserViewDrag();b._makePrevDef()},_setupBeforeSubmit:function(){var b=this;b.$mform.find(".jset-ulayout-submit").click(function(){var d=b.$mform.find(".jset-ulayout-hidden");d.html("");var c=b.$mulayout.find("li");c.each(function(){var g=a(this);var f=g.find(".set-ulayout-set-item");var e=f.width();if(c.length==1){e="0"}e=Math.round(e);d.append('<input type="hidden" name="view" value="'+g.data("id")+":"+e+'" />')});b.$mform.submit()})},_setupData:function(){var d=this;var g=0;var i=d.$mform.find(".jset-ulayout-def").val();var c=i.split(",");var e=c.length;for(g=0;g<e;g++){var h=c[g].split(":");if(h.length==2){var b=d.$mselarea.find(".set-ulayout-"+h[0]);var f=b.clone();b.remove();d.$mulayout.append(f);if(h[1]=="0"){h[1]="505"}f.find(".set-ulayout-set-item").css("width",h[1]+"px")}}},_makePrevDef:function(){var c=this;var f={};f[desknets.Resource.OKButtonLabel]=function(){c.$mprev.dialog("close")};f[desknets.Resource.CancelButtonLabel]=function(){c.$mprev.dialog("close")};var e={modal:true,buttons:f,title:desknets.Resource.preview,dialogClass:"dn-dialog co-sel-dialog",width:800,resizable:false,autoOpen:false,};c.$mprev=desknets.dialog.setUp(a("#set-ulayout-prev"),e);c.$mprev.find(".co-sel-side").css("width","219px");c.$mprev.find(".co-sel-side").css("height","439px");c.$mprev.find(".co-listview-tree").css("width","219px");c.$mprev.find(".co-listview-tree").show();c.$mprev.find(".co-listview-items").show();c.$mprev.find("a").click(function(j){j.preventDefault()});c.$mform.find(".jset-ulayout-prev").click(function(j){j.preventDefault();c._makePrev();c.$mprev.dialog("open")});var d=c.$mprev.find(".co-sel-name");var b=d.eq(0);var i=d.eq(1);var h=d.eq(2);var g=c.$mform.find(".set-ulayout-Name").find(".data");b.html(g.eq(0).html());i.html(g.eq(1).html());h.html(g.eq(2).html())},_makePrev:function(){var c=this;var d=a("#set-ulayout-prev").find(".co-sel-description");var b=d.eq(0);var g=d.eq(1);var e=d.eq(2);d.html("");var f=c.$mulayout.find("li");if(f.length==1){f.each(function(){$item=a(this).find(".set-ulayout-set-item");b.append('<span class="co-sel-user-field">'+$item.find(".data").eq(0).text()+"</span>");g.append('<span class="co-sel-user-field">'+$item.find(".data").eq(1).text()+"</span>");e.append('<span class="co-sel-user-field">'+$item.find(".data").eq(2).text()+"</span>")})}else{f.each(function(){$item=a(this).find(".set-ulayout-set-item");b.append('<span style="width:'+$item.width()+'px" class="co-sel-user-field">'+$item.find(".data").eq(0).html()+"</span>");g.append('<span style="width:'+$item.width()+'px" class="co-sel-user-field">'+$item.find(".data").eq(1).html()+"</span>");e.append('<span style="width:'+$item.width()+'px" class="co-sel-user-field">'+$item.find(".data").eq(2).html()+"</span>")})}},_setupUserViewDrag:function(){var c=this;var d=function(){var e=c.$mform.find(".set-drag-this");if(e!=null&&c.mboSelDrag){e.find(".set-ulayout-set-item").css("width","100px")}a(".set-ulayout-drag-size").removeClass("set-ulayout-show-place-holder");c._resetSelSort();c._resetSelAreaSize();c._resetLayoutSize(0);c._resetDragSetUp();c._resetDragLayoutSize();c._modDataSet()};var b={dragSelector:"div",dragBetween:true,dragEnd:d,dragSelectorExclude:"input, textarea, a, .drag",placeHolderTemplate:'<li class="set-ulayout-place-holder"><div class="block"></div></li>'};c.$mform.find(".set-ulayout-drag-set, .set-ulayout-drag").dragsort(b)},_setupUserViewDel:function(){var b=this;b.$mulayout.delegate("a","click",function(c){c.preventDefault();var d=a(this).closest("li");b.$mselarea.append(d.clone());d.remove();b._resetSelSort();b._resetSelAreaSize();b._resetLayoutSize(0);b._resetDragSetUp();b._modDataSet()})},_resetSelAreaSize:function(){var b=this;b.$mselarea.find(".set-ulayout-set-item").css("width","auto")},_resetLayoutSize:function(d){var c=this;var b=500;b+=d;c.$mulayout.find("li").each(function(){b+=a(this).width()});c.$mform.find(".set-ulayout-drag-table").css("width",b+"px")},_resetDragSetUp:function(){var b=this;b._resetDragSetUpArea(b.$mulayout);b._resetDragSetUpArea(b.$mselarea)},_resetDragSetUpArea:function(c){var b=this;c.find("li").draggable({start:function(){a(".set-drag-this").removeClass("set-drag-this");a(this).addClass("set-drag-this");b.mboSelDrag=false;if(a(this).parent().hasClass("set-ulayout-drag")){b.mboSelDrag=true;if(a(".set-ulayout-place-holder").length>0){a(".set-ulayout-place-holder").css("width","100px")}}a(".set-ulayout-drag-size").addClass("set-ulayout-show-place-holder")},stop:function(){setTimeout(function(){a(this).removeClass("set-drag-this")},2000)},helper:"<div></div>",})},_resetDragLayoutSize:function(){var b=this;var c=b.$mulayout.find(".drag");c.draggable({containment:".set-ulayout-drag-size",start:function(){b.$mulayout.find(".drag.ui-draggable.ui-draggable-dragging").css("top","160px")},stop:function(){var e=a(this);var d=b.$mulayout.find(".drag.ui-draggable.ui-draggable-dragging");var f=e.closest(".set-ulayout-set-item");var h=d.offset().left-e.offset().left;var g=f.width();var i=g+h;if(i<30){i=30}b._resetLayoutSize(i-g);f.css("width",i+"px");b._modDataSet()},axis:"x",helper:"clone",cursor:"move"})},_resetSelSort:function(){var b=this;b.$mselarea.html(b.$mselarea.find("li").sort(function(d,c){return parseInt(a(d).data("sortid"),10)-parseInt(a(c).data("sortid"),10)}))},_modDataSet:function(){var b=this;b.$mchkinputmod.val("1")},_getNextCmd:function(){var b=this;return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"setgroups",desknets.PagePaneListBase,{_tree:null,_optTreeId:"data-id",_boFirst:true,_boUpdateTree:false,_beforeGid:null,_initSet:function(){var b=this;b.initLeftTree();b.callBase("_initSet")},_initSetLeftTree:function(){},initLeftTree:function(){var c=this;c._tree=a.extend({},desknets.set.groupsgroupTree);c._tree.options=c._getOptionLeftTree();var b={module:c._getRestModule(),moveCMD:c._getMoveListCmd()};c._tree.init(c.$mjListPage,c._getOptionLeftTree(),b)},_optTreeSelectFunc:function(h){var b=this;var f=h.attr(b._optTreeId);var g=b.$mjListPage.find(".jco-back-page-data");var d=b.getInputFieldName();g.find('input[name="'+d+'"]').val(f);if(b._boFirst==true){var c=desknets.paramanalyzer.getLocationHash();var d=b.getInputFieldName();b._boFirst=false;var e=desknets.paramanalyzer.getHashParams();if(!neo.isSet(e.cmd)||e.cmd==b._getListCmd()){b._setTitlePane(h)}b._firstFolder=f;b._mobjParams[d]=f;if((typeof jsonRest)!="undefined"||(neo.isSet(c)&&c.length>0)){return}b._getListAjax("0")}else{if(!neo.isSet(b._beforeGid)||b._beforeGid!=f){b._listPage("0")}}b._beforeGid=f},_hashUpdateListPage:function(c){var b=this;var d=b.getInputFieldName();var e=c[d];if(!neo.isSet(e,{blank:false})){b._firstFolder=""}b.callBase("_hashUpdateListPage",c)},_isMoveListSeqno:function(){return true},treeUpdateListWidth:function(){this._tree.resize()},treeUpdateList:function(){this._tree.updateTreeList();this._boUpdateTree=false},getInputFieldName:function(){return"pgid"},_getOptionLeftTree:function(){var b=this;var d=b.callBase("_getOptionLeftTree");var c=function(){b._getListAjax("0")};d.module=desknets.chooser.MODULE;d.cmdgroups=desknets.chooser.CMD_GROUPS;d.cmdgrouptree=desknets.chooser.CMD_GROUPTREE;d.chooseTarget=["user"];d.moveFunc=c;return d},_getSortableOptions:function(){var b=this;var c=b.callBase("_getSortableOptions");c.change=function(d){b._boUpdateTree=true;b._getListAjaxSuccess(d)};return c},_initListMain:function(){var b=this;var c=desknets.paramanalyzer.getLocationHash();if((typeof jsonRest)=="undefined"&&c==""&&b._boFirst==true){return}b.callBase("_initListMain")},changPage:function(){var b=this;if(b._boUpdateTree){b._firstFolder="";b.treeUpdateList()}b.callBase("changPage");if(neo.isSet(b._firstFolder,{blank:false})){var c=b.$mjListPage.find(".jco-back-page-data");b._firstFolder=c.find('input[name="pgid"]').val()}},_getListAjax:function(c){var b=this;if(b._boUpdateTree){b.treeUpdateList()}b.callBase("_getListAjax",c)},_listDel:function(d,c){var b=this;if(d){b._boUpdateTree=true}b.callBase("_listDel",d,c)},_inputMoveSubmit:function(c){var b=this;b._boUpdateTree=true;b.callBase("_inputMoveSubmit",c)},_startLeftMove:function(){var b=this;var d=b.$mjListPage.find(".co-listview-tree");var g=d.find("a.co-listview-item-inside.on").parent();d.css("background","#f5faff");g.children("a:first").addClass("co-tree-noselect");if(b.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){var f=g.find("li.co-listview-item");f.each(function(){var i=a(this).children("a:first");i.addClass("co-tree-noselect")})}else{var c=b.$mjListPage.find(".co-listview-scroll");var h=c.find("tr.co-tr-selected");var e=[];h.each(function(j,k){e[e.length]=a(this).find(".jco-id").val()});var f=d.find("li.co-listview-item");f.each(function(k,l){var j=a(this);if(a.inArray(j.attr(b._optTreeId),e)>=0){j.children("a:first").addClass("co-tree-noselect");var m=j.find("li.co-listview-item");m.each(function(){var i=a(this).children("a:first");i.addClass("co-tree-noselect")})}})}},_addOptDraggableList:function(){var b=this;return{stop:function(f,d){var c=b.$mjListPage.find(".co-listview-tree");b.$mjListPage.find(".ui-layout-resizer").css({"z-index":1});setTimeout(function(){c.find("a.co-listview-item-inside").removeClass("stdrag");c.find("a.co-listview-item-inside").removeClass("co-tree-noselect")},100);c.css("background","#ffffff")}}},_setDelConfirm:function(f){var c=this;var d=null;var f=c._delConfMessage();var e=c._delConfAddMessage();var b={};b.extraMessage=e;b.extraClass="co-msg-rs";d=desknets.dialog.confirm(f,function(){c._listDel(true,d);return false},b)},_delConfAddMessage:function(){return desknets.Resource.Message.set_group_delconf},_initListStartModLink:function(){var b=this;b.$mjTableList.delegate(".jco-modlink","click",function(d){d.preventDefault();var c=a(this).parent().parent().find(".jco-id").val();b.inputModPage(c)})},_getAddPageParam:function(){var b=this;var c=b.$mjListPage.find(".jco-back-page-data");var d=c.find('input[name="pgid"]').val();b._beforeGid=d;return{pgid:d}},_getDelAddPrm:function(){return this._getAddPageParam()},_getModPageParam:function(){return this._getAddPageParam()},_getListCmd:function(){return desknets.set.PAGE_SETGROUPS},_getListExecCmd:function(){return desknets.set.CMD_SETGROUPS},_getListAddCmd:function(){return desknets.set.PAGE_SETGROUPENTRY},_getListModCmd:function(){return this._getListAddCmd()},_getDelExecCmd:function(){return desknets.set.CMD_SETGROUPDELETE},_getSortableListCmd:function(){return desknets.set.CMD_SETGROUPMVSEQNO},_getMoveListCmd:function(){return desknets.set.CMD_SETGROUPMVLEVEL},_getListEntryClass:function(){return desknets.set.setgroupsentry},_getListModClass:function(){return this._getListEntryClass()}});desknets.page(desknets.set,"groupsgroupTree",desknets.groupTree,{$_moveObj:null,$_dragli:null,_boUpdate:false,_backHtml:"",_cmds:{module:"",moveCMD:""},TMPL_ITEM:'<li data-id="{{id}}" class="jstree-{{state}} co-listview-item"><a href="#" class="co-listview-item-inside {{classes}} {{subType}} {{Drag}} jco-listview-draggable jstree-drop">{{name}}</a>',init:function(e,d,b){var c=this;a.extend(c._cmds,{},b);c.callBase("init",e,d);c._createEventFolderMove(c._getListParent())},changeFolderMoveCss:function(d){var b=this;var c=b._getListParent();if(d){setTimeout(function(){c.find("a.co-listview-item-inside").addClass("stdrag")},100);c.css("background","#f5faff")}else{setTimeout(function(){c.find("a.co-listview-item-inside").removeClass("stdrag");c.find("a.co-listview-item-inside").removeClass("co-tree-noselect")},100);c.css("background","#ffffff")}},updateTreeList:function(){var b=this;var c=b.$_tree;b._boUpdate=true;c.closest(".co-listview-tree").hide();b._getSideTreeList(c)},_getItemHtmlFromItemData:function(c){var b=this;var d="";var e=a.vakata.dnd.is_drag;d=b.callBase("_getItemHtmlFromItemData",c);d=desknets.tmpl.replaceWordHtml(d,"Drag",e?"stdrag":"");return d},_createEventFolderMove:function(d){var c=this;var e=c.$_tree;var b=false;e.delegate("a.co-listview-item-inside","hover",function(f){if(a("#co-dragtip").length>0||a("#co-dragtip-ie8").length>0){return}if(a.vakata.dnd.is_drag){if(!b){c.changeFolderMoveCss(true);b=true}return}c.changeFolderMoveCss(false);b=false});e.delegate("a.jco-listview-draggable","mousedown mouseup",function(g){var f=a(this);if(g.type=="mousedown"){a("body").focus();e.delegate("a.co-listview-item-inside","mousemove",function(i){if(a.vakata.dnd.is_drag){c.$_moveObj=f.parent();c.changeFolderMoveCss(true);c._backHtml=e.html();var h=desknets.listviewframe.getScrollBarWidth();c._objMove.treeOff=d.offset();c._objMove.treeWidth=d.width()-h;c._objMove.treeHeight=d.height()-h;e.undelegate("a.co-listview-item-inside","mousemove")}})}else{c.$_moveObj=null;e.undelegate("a.co-listview-item-inside","mousemove")}});e.delegate("li.co-listview-item","mouseup",function(f){return});c._setUpScrollDraggable(d);a("body").bind("mouseup",function(f){c.changeFolderMoveCss(false)})},_getSideTreeList:function(d){var b=this;var c=desknets.paramanalyzer.getHashParams();if(neo.isSet(c)&&neo.isSet(c.pgid)){b.options.defaultGroupId=c.pgid}if((typeof jsonRestGroup)!="undefined"&&b._boUpdate==false){b._createTree(d,b._getFirstHtmlFromJson(jsonRestGroup))}else{b.loadTree(d)}},_createTree:function(e,d){var b=this;var c=desknets.getUrl(this.options.module);e.jstree({plugins:["html_data","dnd","crrm"],crrm:{move:{check_move:function(f){if(f.o==-1||f.r==-1){return false}if(f.p=="before"||f.p=="after"){return false}if(!f.r.children("a:first").hasClass("stdrag")){return false}if(f.r.hasClass("jstree-closed")&&!f.r.find("li.co-listview-item").length==0){return false}var h=f.o.attr(b._itemid);var g=f.r.attr(b._itemid);if(!neo.isSet(h,{blank:false})||!neo.isSet(g,{blank:false})){return false}if(g==f.o.parent().parent().attr(b._itemid)){return false}if(b.$_dragli==null){if(b.$_moveObj==null){b.$_dragli=f.o}else{b.$_dragli=b.$_moveObj}}return true}}},dnd:{drop_finish:function(f){if(b.$_dragli!=null){b._inputMoveConfSubmit(b.$_dragli,f.r.closest("li"))}else{b._moveRollbackHtml()}b.$_dragli=null},open_timeout:1000,copy_modifier:""},html_data:{data:d,ajax:{type:"POST",dataType:"json",url:c,data:function(h){var g=b.getRequestParams(h);var f=a.cookie(desknets.COOKIENAME_STOKEN);if(neo.isSet(f)&&!neo.isSet(g[f])){g[f]="1"}return g},success:function(f){if(!f||f.status=="ng"){desknets.ajax.onError(f.errorno,f.errormessage);return'<li class="folder_dumy"></li>'}return b.getHtmlFromJson(f)},error:function(h,f,g){desknets.ajax.onError(h.status,neo.ajax.getErrorMessage(h))}}}});e.bind("loaded.jstree",function(g,h){var f=b._options.resetFunc;var i="";if(neo.isSet(b.options.defaultGroupId)){i=b.options.defaultGroupId}e.closest(".co-listview-tree").show();var j=b.getItemObject_li(e,i);b._updateItemsWidth();b.onSelectItemNoAjax(e,i);b._onSelectItem(null,j.children("a:first"));setTimeout(function(){b._updateScrollTopValue(j)},100);if(b._boUpdate==true&&neo.isSet(f)&&a.isFunction(f)){setTimeout(function(){f(j)},500)}b._boUpdate=false})},_moveRollbackHtml:function(){var b=this;var c=b.$_tree;if(b._backHtml.length>0){c.html(b._backHtml)}},_inputMoveConfSubmit:function(f,e){var c=this;var d=c._getListParent();var h=c._moveConfMessage(f);var g={cancel:function(){c._moveRollbackHtml();c._updateItemsWidth()}};var b=desknets.dialog.confirm(h,function(){desknets.submitform.setDialogDisabled(b);c._dropFinishAjax(b,f,e);return false},g)},_moveConfMessage:function(c){var b=desknets.Resource.Message.com_folder_move;return desknets.tmpl.replaceWord(b,"FolderName",a.trim(c.children("a:first").text()))},_dropFinishAjax:function(b,g,f){var c=this;var d;var e=c._getListParent();d=desknets.getUrl(c._cmds.module);desknets.ajax.rest({url:d,data:c._getRequestMoveParams(g,f),success:function(){c._backHtml="";if(neo.isSet(c.options.moveFunc)&&a.isFunction(c.options.moveFunc)){c.options.moveFunc()}},error:function(i,h,j){desknets.ajax.onError(i.status,j);c._moveRollbackHtml()},complete:function(){desknets.submitform.clearDialogDisabled(b);c._updateItemsWidth();b.dialog("close")}})},_getRequestMoveParams:function(d,c){var b=this;return{cmd:b._cmds.moveCMD,id:d.attr(b._itemid),destid:c.attr(b._itemid)}}});desknets.page(desknets.set,"setgroupsentry",desknets.PagePaneInputBase,{_tree:null,_tmpSelItem:'<div class="set-grp-parent-grp-wrap"><span class="co-selitem"><span title="{{Name}}">{{Name}}</span><input type="hidden" name="{{fField}}"  value="{{fId}}"/></span></div>',_optTreeId:"data-id",_optTreeSelectFunc:function(d){var b=this;var c=b.$mjPage.find("#jco-add-folder");if(b._isMultiSelect()==false){c.find(".set-grp-parent-grp-wrap").remove()}b.callBase("_optTreeSelectFunc",d)},initLeftTree:function(){var b=this;b._tree=a.extend({},desknets.set.groupsentrygroupTree);b._tree.options=b._getOptionLeftTree();b._tree.init(b.$mjPage,b._getOptionLeftTree())},getInputFieldName:function(){return"pgid"},_getOptionLeftTree:function(){var b=this;var c=b.callBase("_getOptionLeftTree");c.module=desknets.chooser.MODULE;c.cmdgroups=desknets.chooser.CMD_GROUPS;c.cmdgrouptree=desknets.chooser.CMD_GROUPTREE;c.chooseTarget=["user"];c.isLag=false;return c},treeUpdateListWidth:function(){if(this._tree){this._tree.resize()}},_setListviewHeight:function(b,h){var d=this;var c=b.find(".co-listview");var i=c.find(".co-setarea");c.height("auto");i.height("auto");var g=i.outerHeight();var f=c.find(".co-listview-left-title").height();var e=desknets.listviewframe.VAL_LISTVIEWFRAME_MINHEIGHT;if(g<e){g=e}c.height(g);c.find(".co-listview-left").height(g);i.height(g);c.find(".co-listview-left-data").height(g-f);if(!neo.isSet(h)||h==true){d.treeUpdateListWidth()}},_inputDelSubmit:function(d){var b=this;var c={};var e=desknets.paramanalyzer.getHashParams();if(d!=null){desknets.submitform.setDialogDisabled(d)}c=b._getDelPrm();c.cmd=b._getDelExecCmd();c[b._getIDName()]=e[b._getIDName()];desknets.ajax.rest({url:desknets.getUrl(b._getRestModule()),data:c,success:function(g,f,h){desknets.set.setgroups.treeUpdateList();a(window).off("beforeunload.pageBase");b.resetFuncBeforeHashChange();b.dispBackListPage()},complete:function(h,f,g){if(d!=null){desknets.submitform.clearDialogDisabled(d);d.dialog("close")}}})},_inputDelConfSubmit:function(g){var c=this;var d=null;var f=c._delConfMessage();var e=c._delConfAddMessage();var b={};b.extraMessage=e;b.extraClass="co-msg-rs";d=desknets.dialog.confirm(f,function(){c._inputDelSubmit(d);return false},b)},_delConfAddMessage:function(){return desknets.Resource.Message.set_group_delconf},_updatePageListId:function(){desknets.set.setgroups._boUpdateTree=true;this.callBase("_updatePageListId")},_getDelExecCmd:function(){return desknets.set.CMD_SETGROUPDELETE},_getAddExecCmd:function(){return desknets.set.CMD_SETGROUPENTRY},_getModExecCmd:function(){return this._getAddExecCmd()}});desknets.page(desknets.set,"groupsentrygroupTree",desknets.groupTree,{loadTree:function(c){var b=this;var f=a("#jco-m-list-container").find("div.co-listview-items");var e=a("#jco-m-input-page").find("div.co-listview-items");if(f.length>0){e.html(f.html())}var d=desknets.paramanalyzer.getHashParams();if(neo.isSet(d)&&d.pgid){b.options.defaultGroupId=d.pgid}if(e.find("ins").length>0){e.find("ins").remove();b._createTree(c,e.html());return}b.callBase("loadTree",c)},_createTree:function(d,c){var b=this;b.callBase("_createTree",d,c);d.bind("loaded.jstree",function(f,g){b._updateItemsWidth();var e=d.find("a.co-listview-item-inside");e.removeClass("jstree-draggable");e.removeClass("jstree-drop");setTimeout(function(){var h=null;var i=d.find("li");a.each(i,function(j,k){if(a(k).children("a.co-listview-item-inside").hasClass("on")){h=a(k);return false}});if(h&&h.length>0){b._updateScrollTopValue(h)}else{b.onSelectItemNoAjax(d,b.options.defaultGroupId)}b._updateItemsWidth()},100)})},_selectOnLoaded:function(b){var d=this.options.defaultGroupId||"";var c=this.getItemObject_li(b,d,this._options);if(c.length<=0){c=b.find("li").eq(0)}c.children("a:first").trigger("click")}});desknets.page(desknets.set,"setgroupimport",desknets.PageImport,{_chkImport:function(){var c=this;var g="";var b="";var e={};var d=[];g=c._getRestModule();b=c._getChkCmd();var f=desknets.getUrl(g);e.cmd=b;e.execcheck="1";d.success=function(i,h,j){c._makeImport(i)};c._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,e,d)},_getRestModule:function(){return desknets.MODULE_API_MAIN},_getChkCmd:function(){return desknets.set.CMD_SETGROUPIMPORT}});desknets.page(desknets.set,"setgroupexport",desknets.PageExport,{_getRestModule:function(){return desknets.MODULE_API_MAIN}});(function(b){desknets.page(desknets.set,"setroleentry",desknets.PageInputBase,{_$listPage:null,_$listTable:null,_TYPE_GROUPDATA:"g",_TYPE_USERDATA:"u",_CSS_ICON_GROUP:"co-gicon-group",_CSS_ICON_USER:"co-gicon-user",_CSS_ICON_EXUSER:"co-gicon-user-off",_CSS_ICON_EXGROUP:"co-gicon-group-off",_CSS_ICON_ALLGROUP:"co-gicon-all",_inputButton:function(){var c=this;c._initRoleAssignSelButton();c._initConditionSetButton();c._initConditionResetButton();c._initAssignDelButton();b(".jco-input-del-submit-conf").click(function(d){c._inputDelConfSubmit(d)});b("#jset-role-list-container").find(".jco-input-list-page").click(function(d){c.dispBackListPage()})},_initHtml:function(e){var d=this;d.$mjPage.empty();d.$mjPage.html(e);d._$listPage=b("#jset-role-list-container");d._$listTable=d._$listPage.find(".co-table-list");d._$listNoData=d._$listPage.find(".co-nodata");d._initSet();var f=d._$listTable.find("thead").find("tr");for(var c=0;c<f.length;c++){desknets.htmlparts.addLastClass(b(f[c]),"last-child")}desknets.htmlparts.addStripeClass(d._$listTable.find(".co-tbody-list"),"co-tr-even");d._initListChk()},_initSet:function(){var d=this;var c=d._$listTable.find(".co-tbody-list");d.callBase("_initSet");if(c.find("tr").length==0){d._listNodata()}else{d._listView()}},_listNodata:function(){var c=this;c._$listTable.hide();c._$listNoData.show()},_listView:function(){var c=this;c._$listTable.show();c._$listNoData.hide()},_initGetHtml:function(){var c=this;var d={};d.success=function(h){var f=desknets.ajax.chkAjaxHtmlError(h);if(f.status=="ok"){c._initHtml(h)}else{c.resetFuncBeforeHashChange();var g=desknets.dialog.alert(f.message,{errorNo:f.no});var i=desknets.parseErrorInfo(f.message,f.no);var e={close:function(j){desknets.dialog.deleteById(i.level);c.dispBackListPage()}};g.dialog(e)}};c._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_HTML,null,d)},getSingleRequest:function(){var d={};var e=desknets.paramanalyzer.getHashParam("cmd");var c=desknets.paramanalyzer.getHashParam("id");d.cmd=e;d.id=c;return d},_inputDelConfSubmit:function(g){g.preventDefault();var c=this;var f=c._delConfMessage();var e="";var d=desknets.dialog.confirm(f,function(){desknets.submitform.setDialogDisabled(d);c._inputDelSubmit();b("#frm").submit();return false})},_inputDelSubmit:function(){var c=this;var d="";d=c._getDelExecCmd();b('input[name="cmd"]').val(d)},_delConfMessage:function(){return desknets.Resource.Message.com_del_conf},_initListChk:function(){var c=this;c._$listTable.find(".co-tbody-list").delegate("input[type=checkbox]","click",function(d){c._$listTable.find(".jco-checkbox-all").attr("checked",false);c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-some").hide();c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();if(b(this).attr("checked")){b(this).parent().parent().addClass("co-tr-selected")}else{b(this).parent().parent().removeClass("co-tr-selected")}});c._$listTable.find(".jco-checkbox-all").click(function(){var d=(b(this).attr("checked"))?true:false;c._$listTable.find("input[type=checkbox]").attr("checked",d);if(d){c._$listTable.find(".co-tbody-list").find("tr").addClass("co-tr-selected")}else{c._$listTable.find(".co-tbody-list").find("tr").removeClass("co-tr-selected")}if(d){var e=c._$listTable.find(".co-tbody-list").find("tr").length;var f=desknets.Resource.Message.com_listchk_cnt_all_disp;f=desknets.tmpl.replaceWordLF(f,"num",e+" ");c._$listPage.find(".co-chk-cnt").find(".jco-span-chk-msg-all").html(f);c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").show()}else{c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide()}});c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").find("a").click(function(d){d.preventDefault();c._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();c._$listPage.find(".co-chk-cnt").find(".jco-checkbox-all").attr("checked",false);c._$listTable.find(".co-tbody-list").find("input[type=checkbox]").attr("checked",false).end().find("tr").removeClass("co-tr-selected");c._$listTable.find(".jco-checkbox-all").attr("checked",false);return})},_initRoleAssignSelButton:function(){var c=this;b("#jset-role-usel").click(function(d){c._openRoleAssignSelDialog()})},_openRoleAssignSelDialog:function(f){var d=this;var g;var c=d._getSelDialogID();var e=d._getSelDialogOptions();g=desknets.chooser.open(c,e)},_initConditionSetButton:function(){var c=this;b("#jset-role-setcond").click(function(d){if(!c._checkSelectTarget(desknets.Resource.Message.com_set_nochecked)){return}c._openConditionSetDialog()})},_openConditionSetDialog:function(){var c=this;var d=b("#setrolecondition");if(d.length>0){d.find("input[type=checkbox]").attr("checked",false);c._setItemsCondition(d);return d.dialog("open").find("input").get(0).blur()}d=b("<div />").attr("id","setrolecondition").addClass("co-editarea").appendTo(document.body);c._initConditionSetDialog(d);return d},_initConditionSetDialog:function(d){var c=this;var e=function(){d.dialog(c._getDialogOptions());d.dialog("open").find("input").get(0).blur();d.dialog("open").find("select").blur();c._setItemsCondition(d)};desknets.tmpl.load(d,"set/rolecondition.html",e,true)},_getDialogOptions:function(){var c=this,f={};f[desknets.Resource.OKButtonLabel]=function(){c._onSetCondition(b(this))};f[desknets.Resource.CancelButtonLabel]=function(){b(this).dialog("close")};var e=desknets.dialog.getDialogOption();var d={buttons:f,dialogClass:"dn-dialog",resizable:false,title:desknets.Resource.set.setCondition,width:520};b.extend(e,d);return e},_setItemsCondition:function(g){var c=this;var f=0;var e=1;var d=true;c._switchDispMessage();c._$listTable.find(".co-tbody-list").find("input[type=checkbox]").filter(":checked").each(function(){f=b(this).next().next().val().split("_")[1];if(f=="3"||f=="4"){e=3}if(f=="1"||f=="3"){d=false}});g.find("#jset-sel-condition").find('input[name="condition"]').each(function(){if(b(this).val()==e){b(this).attr("checked","checked")}});g.find("#jset-chk-alldescendant").attr("checked",d)},_switchDispMessage:function(){var e=this;var g=false;var d=b("#setrolecondition");var f=d.find(".set-roleentry-group");var c=d.find(".set-roleentry-user");e._$listTable.find(".co-tbody-list").find(".co-tr-selected").each(function(){var h=b(this).find(".co-chk").find('input[name="_assignid"]').val();if(neo.isSet(h)&&h.length>0&&h.charAt(0)==e._TYPE_GROUPDATA){g=true;return false}});if(g){f.show();c.hide()}else{f.hide();c.show()}},_onSetCondition:function(){var c=this;var e=b("#setrolecondition");var f=0;var d=e.find("#jset-sel-condition").find('input=[name="condition"]').filter(":checked").val();var g=e.find("#jset-chk-alldescendant").filter(":checked").val();if(d==1){f=1;if(neo.isSet(g)){f=2}}else{f=3;if(neo.isSet(g)){f=4}}c._listSetCondition(f);e.dialog("close")},_listSetCondition:function(d){var f=this;var e="";var i="";var j="";var c="";var h=b("#setrolecondition");var g="";if(d<=2){j=desknets.Resource.set.conditionInclude}else{j=desknets.Resource.set.conditionExclude}f._$listTable.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(b(this).attr("checked")){var n=b(this).parent().parent();var m=n.find("td:last");var l=n.find("td:eq(1)");b(m).html("&nbsp");b(this).attr("checked",false);b(this).parent().parent().removeClass("co-tr-selected");var k=b(this).parent().parent().find('input[name="assignid"]').val();i=d;if(k.substring(0,1)=="u"){if(i==2){i=1}if(i==4){i=3}if(i==1){g=f._CSS_ICON_USER}else{g=f._CSS_ICON_EXUSER}}else{if(i<=2){g=f._CSS_ICON_GROUP;if(k.substring(1)=="0"){g=f._CSS_ICON_ALLGROUP}}else{g=f._CSS_ICON_EXGROUP}}e=k+"_"+i;b(this).parent().parent().find('input[name="condition"]').val(e);if(d%2==0&&k.substring(0,1)=="g"){c=desknets.Resource.set.conditionAllDescendant}else{c=""}b(l).find("span:first").attr("class","").addClass(g);b(m).html(j+c)}});if(f._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").css("display")=="block"){f._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();f._$listTable.find(".jco-checkbox-all").attr("checked",false)}},_initConditionResetButton:function(){var c=this;b("#jset-role-resetcond").click(function(){if(!c._checkSelectTarget(desknets.Resource.Message.com_sel_nochecked)){return}c._listSetCondition(1)})},_initAssignDelButton:function(){var c=this;b("#jset-role-deluser").click(function(d){if(!c._checkSelectTarget(desknets.Resource.Message.com_sel_nochecked)){return}c._listAssignDel(d)})},_checkSelectTarget:function(e){var d=this;var c;c=d._$listTable.find("input[type=checkbox]").filter(":checked");if(c.length<=0){desknets.dialog.alert(e,{type:"warn"});return false}return true},_listAssignDel:function(){var d=this;var c=d._$listTable.find(".co-tbody-list");d._$listTable.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(b(this).attr("checked")){b(this).parent().parent().remove()}});if(d._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").css("display")=="block"){d._$listPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();d._$listTable.find(".jco-checkbox-all").attr("checked",false)}if(c.find("tr").length==0){d._listNodata()}else{desknets.htmlparts.addStripeClass(d._$listTable.find(".co-tbody-list"),"co-tr-even")}},_createAssignRow:function(i,m,j,f,l){var k=this;var h="";var c="";var e=1;if(f==k._TYPE_USERDATA){c=k._CSS_ICON_USER}else{c=k._CSS_ICON_GROUP;if(i==0){c=k._CSS_ICON_ALLGROUP}}var g=desknets.escape(m);g=desknets.escapeValue(g);g=desknets.escapeSpace(g);var d;if(neo.isSet(j,{blank:false})){d='<span title="'+desknets.tmpl.escapeWord(b("<div />").append(j).text())+'">'+j+"</span>"}else{d="&nbsp;"}if(f==k._TYPE_USERDATA){l=desknets.escape(l);l=desknets.escapeValue(l)}h="<tr>";h=h+'<td class="co-chk"><input type="checkbox" name="_assignid" value="'+f+i+'">';h=h+'<input type="hidden" name="assignid" value="'+f+i+'" />';h=h+'<input type="hidden" name="condition" value="'+f+i+"_"+e+'" />';h=h+"</td>";if(f==k._TYPE_USERDATA){h=h+'<td><span class="'+c+'">&nbsp;</span><a href="#" data-name="'+g+'" data-id="'+f+i+'" data-description="'+l+'" class="jco-ref-dialog-link jco-sel-item" data-refid="user'+i+'" "title="'+g+'">'+g+"</a></td>"}else{h=h+'<td><span class="'+c+'">&nbsp;</span><span class="jco-sel-item" data-name="'+g+'" data-id="'+f+i+'" data-description="'+l+'" title="'+g+'">'+g+"</span></td>"}h=h+'<td class="co-busyo">'+d+"</td>";h=h+"<td>"+desknets.Resource.set.conditionInclude+"</td>";h=h+"</tr>";k._$listTable.find(".co-tbody-list").append(h);desknets.htmlparts.addStripeClass(k._$listTable.find(".co-tbody-list"),"co-tr-even");if(b(".co-table-list").find("thead").hasClass("co-thd-setlist-title-hide")){b(".co-table-list").find("thead").removeClass("co-thd-setlist-title-hide")}},_getSelDialogOptions:function(){var d=this;var e={};var f=false;var c=[];c=desknets.chooser.getItemsFromElement(b(".co-tbody-list"));e={chooseTarget:["user","group"],choose:function(g){d._onSelectRoleAssignItems(g)},allGroup:"readonly",unassignGroup:"choosable",cmdusers:desknets.CMD_CHOOSERMSETUSERSEL,items:c};return e},_onSelectRoleAssignItems:function(e){var g,c;var d=this;var h=b(".jset-role-list-container").find(".co-tbody-list").find('input[name="assignid"]');var j="";var f="";var i;for(g=0;g<e.length;g++){i=false;f=e[g].id;j=e[g].type.substring(0,1);for(c=0;c<h.length;c++){if(b(h[c]).val()==j+f){i=true;break}}if(i){continue}d._createAssignRow(e[g].id,e[g].name,e[g].summary,e[g].type.substring(0,1),e[g].description)}d._listView()},_getSelDialogID:function(){return"jset-sel-roleassign-items"},_onAjaxFormSuccess:function(d){var c=this;c._setLocationHashForm()},_getIdPageForm:function(){return"frm"},_getDelExecCmd:function(){return desknets.set.CMD_SETROLEDEL}})})(jQuery);(function(b){desknets.page(desknets.set,"setroles",desknets.PageInputList,{_IDS_LOCKROLE:new Array("1","2"),_replaceListLine:function(d,h,f){var c=this;var e="co-gicon-role";if(h=="id"){if(b.inArray(f[h],c._IDS_LOCKROLE)>=0){e="co-gicon-lock"}var g=new RegExp("{{icon}}","ig");d=d.replace(g,e)}return c.callBase("_replaceListLine",d,h,f)},_getListCmd:function(){return desknets.set.PAGE_SETROLES},_getListExecCmd:function(){return desknets.set.CMD_SETROLES},_getListAddCmd:function(){return desknets.set.PAGE_SETROLEENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETROLEENTRY},_getDelCmd:function(){return desknets.set.CMD_SETROLEDELCONF},_getDelExecCmd:function(){return desknets.set.CMD_SETROLEDEL},_getMoveExecCmd:function(){return desknets.set.CMD_SETROLEMOVE},_getListEntryClass:function(){return desknets.set.setroleentry},_getListModClass:function(){return desknets.set.setroleentry}})})(jQuery);(function(b){desknets.page(desknets.set,"setroleimport",desknets.PageImport,{_chkImport:function(){var d=this;var h="";var c="";var f={};var e=[];h=d._getRestModule();c=d._getChkCmd();var g=desknets.getUrl(h);f.cmd=c;f.execcheck="1";e.success=function(j,i,k){d._makeImport(j)};d._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,f,e)},_getRestModule:function(){return desknets.MODULE_API_MAIN},_getChkCmd:function(){return"setcmdroleimport"}})})(jQuery);desknets.page(desknets.set,"setroleexport",desknets.PageExport,{});desknets.page(desknets.set,"setholidaycal",desknets.PageInputList,{_mcheckbox:'<input type="checkbox" name="id" value="{{id}}">',_minput:'<input type="hidden" name="id" value="{{id}}" />',_hashUpdatePageView:function(c){var b=this;var e=desknets.paramanalyzer.getHashParams();if(c==desknets.set.PAGE_SETHOLIDAY){var d=a("#set-m-holidaylist-page").find(".jco-back-page-data");if(d.length>0&&!neo.isSet(e.init)){desknets.set.setholiday._getListAjax(e.row)}else{desknets.set.setholiday.initPage(b._getListCmd(),"jco-m-list-container")}}else{if(c==desknets.set.PAGE_SETHOLIDAYENTRY){desknets.set.setholidayentry.initPage(desknets.set.PAGE_SETHOLIDAY,"set-m-holidaylist-page")}}},_initSet:function(){var b=this;b.callBase("_initSet");b.setupHoliday()},setupHoliday:function(){var b=this;b.$mjListPage.find(".set-list-holiday-import").click(function(){var d=b._getHoliCalCheckedItems();var h=b.$mjListPage.find("#setholidayimportfrm");$inputold=h.find('input[name="id"]');if($inputold.length>0){$inputold.remove()}var c="";var g;var f=d.length;for(g=0;g<f;g++){var e=b._minput;e=desknets.tmpl.replaceWordHtml(e,"id",d[g]);c=c+e}a(c).appendTo(h);h.submit()})},_getHoliCalCheckedItems:function(){var b=this;var c=[];if(b.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){c.push(desknets.set.PRM_VAL_ALL)}else{b.$mjListPage.find("input[type=checkbox]:checked").each(function(){c.push(a(this).val())})}return c},_replaceListLine:function(d,i,f){var c=this;var h;if(i==="assigngrp"){var b=[];if(!f.assigngrp||!f.assigngrp["item"]){b=[]}else{if(!a.isArray(f.assigngrp["item"])){b=[f.assigngrp["item"]]}else{b=f.assigngrp["item"]}}var e=b.length;var h="";var g;for(g=0;g<e;g++){if(h!=""){h=h+",\n"}h=h+b[g].Name;if(b[g].condition==desknets.set.VAL_HCAL_GRPCOND_ON){h=h+"("+desknets.Resource.chooser.allDescendantsLabel+")"}}if(f.id==desknets.set.VAL_COMMONJ_HOLIDAYCALID){h=desknets.Resource.set.setHolidayCalAssignGrp}d=desknets.tmpl.replaceWord(d,"assigngrp",h)}else{if(i==="id"){if(f.id==desknets.set.VAL_COMMONJ_HOLIDAYCALID){d=desknets.tmpl.replaceWord(d,"checkbox","")}else{d=desknets.tmpl.replaceWordHtml(d,"checkbox",c._mcheckbox)}return c.callBase("_replaceListLine",d,i,f)}else{return c.callBase("_replaceListLine",d,i,f)}}return d},_listAllChkDataCnt:function(){var b=this;var d=Number(b.$mjListPage.find(".jco-pv-cnt").val());var f=b.$mjListPage.find('.jco-id[value="'+desknets.set.VAL_COMMONJ_HOLIDAYCALID+'"]').closest("tr");if(f.length>0){d=d-1;f.addClass("set-tr-deselect")}var e=Number(b.$mjListPage.find(".jco-pv-all-cnt").val())-1;var c=desknets.Resource.Message.com_listchk_cnt_some_disp;c=desknets.tmpl.replaceWordLF(c,"num"," "+d+" ");b.$mjListPage.find(".jco-span-chk-msg-page").html(c);c=desknets.Resource.Message.com_listchk_cnt_all_link;c=desknets.tmpl.replaceWordLF(c,"num",e+" ");b.$mjListPage.find(".jco-span-chk-msg-all-link").html(c);c=desknets.Resource.Message.com_listchk_cnt_all_disp;c=desknets.tmpl.replaceWordLF(c,"num",e+" ");b.$mjListPage.find(".jco-span-chk-msg-all").html(c);this._allowInPageState=e>d},_getListCmd:function(){return desknets.set.PAGE_SETHOLIDAYCAL},_getListExecCmd:function(){return desknets.set.CMD_SETHOLIDAYCAL},_getListAddCmd:function(){return desknets.set.PAGE_SETHOLIDAYCALENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETHOLIDAYCALENTRY},_getDelExecCmd:function(){return desknets.set.CMD_SETHOLIDAYCALDEL},_getListEntryClass:function(){return desknets.set.setholidaycalentry},_getListModClass:function(){return desknets.set.setholidaycalentry}});desknets.page(desknets.set,"setholidaycalentry",desknets.PageInputBase,{_$listTable:null,_$listNoData:null,_initSet:function(c){var b=this;b.callBase("_initSet",c);b._initSetHoliCal();b._initSetHoliCalSelGrp()},_initSetHoliCal:function(){var b=this;var d=b.$mjPage.find("input[name=id]").val();if(d==desknets.set.VAL_COMMONJ_HOLIDAYCALID){var c=b.$mjPage.find(".co-actionwrap").find(".jco-input-del-submit-conf").hide();c.prev(".line").hide()}},_initSetHoliCalSelGrp:function(){var c=this;c._$listNoData=c.$mjPage.find(".co-nodata");c._$listTable=c.$mjPage.find(".co-table-list");var b=c._$listTable.find(".co-tbody-list");var d=b.find(".set-holical-sel-item");var e=d.length;if(e==0){c._listNodata()}else{b.empty();d.each(function(h){var g=a(this);var f=desknets.escape(desknets.getDataAttr(g,"description"));f=desknets.escapeValue(f);f=desknets.escapeSpace(f);c._createAssignRow(desknets.getDataAttr(g,"id"),desknets.getDataAttr(g,"name"),f,desknets.getDataAttr(g,"descendant"))});c._listView()}c._initListChk();c._inputFormSaveToObserver()},_inputButton:function(){var b=this;b.callBase("_inputButton");b.$mjPage.find(".set-holical-selgrp").click(function(c){c.preventDefault();b.setUpGroupEntry()});b.$mjPage.find(".set-holical-deselgrp").click(function(c){c.preventDefault();b.deSelGroupEntry()})},setUpGroupEntry:function(){var b=this;var c=b._getSelDialogOptions();desknets.chooser.open("set-holigrp-chooser",c)},_getSelDialogOptions:function(){var b=this;var c={};var d=b._getTargetGroups();c={chooseTarget:["group"],editDescendant:true,choose:function(e){b._onSelectAssignItems(e)},items:d};return c},_getTargetGroups:function(){var c=this;var b=desknets.chooser.getItemsFromElement(c.$mjPage.find(".co-tbody-list"),{itemFilter:function(f,d){var e=a.extend({},f);if(d.data("descendant")==desknets.set.VAL_HCAL_GRPCOND_ON){e.descendant="all"}return e}});c._filterItems(b);return b},_filterItems:function(b){var d=b.length;for(var c=0;c<d;c++){var e=!!b[c].descendant?desknets.set.VAL_HCAL_GRPCOND_ON:desknets.set.VAL_HCAL_GRPCOND_OFF;b[c].inputValue=b[c].id+"_"+e}},_onSelectAssignItems:function(c){var e;var b=this;b.$mjPage.find(".co-tbody-list").empty();var d=c.length;for(e=0;e<d;e++){var f;if(c[e].descendant=="all"){f=desknets.set.VAL_HCAL_GRPCOND_ON}else{f=desknets.set.VAL_HCAL_GRPCOND_OFF}b._createAssignRow(c[e].id,c[e].name,c[e].description,f)}b._listView()},_listNodata:function(){var b=this;b._$listTable.hide();b._$listNoData.show()},_listView:function(){var b=this;b._$listTable.show();b._$listNoData.hide()},_createAssignRow:function(h,k,j,d){var i=this;var f="";var g=desknets.escape(k);g=desknets.escapeValue(g);g=desknets.escapeSpace(g);var c;if(d==desknets.set.VAL_HCAL_GRPCOND_ON){var e=desknets.Resource.chooser.allDescendantsLabel;c='<span title="'+e+'">'+e+"</span>"}else{c="&nbsp;"}var b;if(neo.isSet(j,{blank:false})){b=j+" - "+g}else{b=g}f="<tr>";f=f+'<td class="co-chk"><input type="checkbox" name="_gid" value="'+h+"_"+d+'" />';f=f+'<input type="hidden" name="gid" value="'+h+"_"+d+'" />';f=f+"</td>";f=f+'<td><span class="co-gicon-group">&nbsp;</span><span class="jco-sel-item" data-name="'+g+'" data-id="g'+h+'" data-descendant="'+d+'" data-description="'+j+'"title="'+b+'">'+g+"</span></td>";f=f+"<td>"+c+"</td>";f=f+"</tr>";i._$listTable.find(".co-tbody-list").append(f);desknets.htmlparts.addStripeClass(i._$listTable.find(".co-tbody-list"),"co-tr-even")},deSelGroupEntry:function(){var b=this;if(!b._checkSelectTarget(desknets.Resource.Message.com_sel_nochecked)){return}b._listAssignDel()},_checkSelectTarget:function(d){var c=this;var b;b=c._$listTable.find("input[type=checkbox]").filter(":checked");if(b.length<=0){desknets.dialog.alert(d,{type:"warn"});return false}return true},_listAssignDel:function(){var c=this;var b=c._$listTable.find(".co-tbody-list");c._$listTable.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(a(this).prop("checked")){a(this).parent().parent().remove()}});if(c.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").css("display")=="block"){c.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();c._$listTable.find(".jco-checkbox-all").prop("checked",false)}if(b.find("tr").length==0){c._listNodata()}else{desknets.htmlparts.addStripeClass(c._$listTable.find(".co-tbody-list"),"co-tr-even")}},_initListChk:function(){var b=this;b._$listTable.find(".co-tbody-list").on("click","input[type=checkbox]",function(c){b._$listTable.find(".jco-checkbox-all").prop("checked",false);b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-some").hide();b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();if(a(this).prop("checked")){a(this).parent().parent().addClass("co-tr-selected")}else{a(this).parent().parent().removeClass("co-tr-selected")}});b._$listTable.find(".jco-checkbox-all").click(function(){var c=a(this).prop("checked");b._$listTable.find("input[type=checkbox]").prop("checked",c);if(c){b._$listTable.find(".co-tbody-list").find("tr").addClass("co-tr-selected")}else{b._$listTable.find(".co-tbody-list").find("tr").removeClass("co-tr-selected")}if(c){var d=b._$listTable.find(".co-tbody-list").find("tr").length;var e=desknets.Resource.Message.com_listchk_cnt_all_disp;e=desknets.tmpl.replaceWordLF(e,"num",d+" ");b.$mjPage.find(".co-chk-cnt").find(".jco-span-chk-msg-all").html(e);b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").show()}else{b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide()}});b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").find("a").click(function(c){c.preventDefault();b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();b.$mjPage.find(".co-chk-cnt").find(".jco-checkbox-all").prop("checked",false);b._$listTable.find(".co-tbody-list").find("input[type=checkbox]").prop("checked",false).end().find("tr").removeClass("co-tr-selected");b._$listTable.find(".jco-checkbox-all").prop("checked",false);return})},_getAddExecCmd:function(){return desknets.set.CMD_SETHOLIDAYCALENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},_getDelExecCmd:function(){return desknets.set.CMD_SETHOLIDAYCALDEL}});desknets.page(desknets.set,"setholiday",desknets.PageListBase,{myear:"",initPage:function(d,c){var b=this;b.boGetHtmlSingle=true;b.callBase("initPage",d,c)},_getListAjaxSuccessOtherSet:function(j){var k=this;var b=a("#listfrmholi").find(".set-holi-info");var g=b.find(".set-holi-info-cal");var i=b.find(".set-holi-info-grp");k.callBase("_getListAjaxSuccessOtherSet",j);if(neo.isSet(j.hcal_name,{blank:false})){g.html(desknets.tmpl.escapeWord(j.hcal_name))}else{g.text("")}params=desknets.paramanalyzer.getHashParams();var e=params.sid_hcal;if(e==desknets.set.VAL_COMMONJ_HOLIDAYCALID){i.html(desknets.Resource.set.setHolidayCalAssignGrp)}else{if(!!j.group&&!!j.group.item){var d=desknets.ajax.getItems(j.group.item);var c=d.length;var h;var f="";for(h=0;h<c;h++){if(f!=""){f=f+", "}f=f+d[h].grp_name;if(d[h].condition==desknets.set.VAL_HCAL_GRPCOND_ON){f=f+"("+desknets.Resource.chooser.allDescendantsLabel+")"}}i.html(desknets.tmpl.escapeWord(f))}else{i.text("")}}},_replaceListLine:function(c,f,e){var b=this;if(f==="id"){var d=desknets.paramanalyzer.getHashParams();c=desknets.tmpl.replaceWordHtml(c,"sid_hcal",d.sid_hcal);c=desknets.tmpl.replaceWordHtml(c,"year",b.myear);return b.callBase("_replaceListLine",c,f,e)}else{return b.callBase("_replaceListLine",c,f,e)}return c},_initListEndButton:function(){var c=this;var e=a("select[name=year]");var b=a("input[name=year]");var f;var d;c.callBase("_initListEndButton");f=b.val();if(f.length!=4){d=new Date();f=d.getFullYear()}e.val(f);e.bind("change",function(g){c.changeModPage(g.target.value)});c.$mjListPage.find(".set-holidaylist-back").click(function(g){g.preventDefault();c.dispBackListPage()})},changeModPage:function(c){var b=this;b.$mjListPage.find(".jco-back-page-data").find('input[name="year"]').val(c);var d=desknets.getInputDataToUrl(b.$mjListPage.find(".jco-back-page-data"));d=d+"&cmd="+b._getListCmd();b._setLocationHash(d);b.changeModPageEnd(c)},changeModPageEnd:function(e){var b=this;var d=a("select[name=year]");var f;if(!isNaN(e)&&e.length==4){f=e}else{var c=new Date();f=c.getFullYear()}d.val(f)},_getListAjaxSuccess:function(c){var b=this;var d=desknets.paramanalyzer.getHashParams();if(!!d.year){b.myear=d.year}else{b.changeModPageEnd();b.myear=b.$mjListPage.find("select[name=year]").val()}b.callBase("_getListAjaxSuccess",c)},_getListAjaxSuccessEnd:function(){var b=this;b.callBase("_getListAjaxSuccessEnd");var d=b.$mjListPage.find(".jco-back-page-data").find("input[name=year]").val();if(d.length!=4){var c=new Date();d=c.getFullYear()}b.$mjListPage.find('select[name="year"]').val(d)},_getAddPageParam:function(){var b={};b.year=a("select[name=year]").val();return b},inputDispPage:function(c){var b=this;b.inputModPage(c)},inputModPage:function(g){var b=this;var f="";var d={};var c=a("select[name=year]");var e;f=b._getListModCmd();e=c.val();d=b._getModPageParam();d.cmd=f;d.id=g;d.year=e;b._inputPage(d)},_getIdListPage:function(){return"set-m-holidaylist-page"},_getListCmd:function(){return desknets.set.PAGE_SETHOLIDAY},_getListExecCmd:function(){return desknets.set.CMD_SETHOLIDAY},_getListAddCmd:function(){return desknets.set.PAGE_SETHOLIDAYENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETHOLIDAYENTRY},_getAddPageParam:function(){var b=this;var d=desknets.paramanalyzer.getHashParams();var c={sid_hcal:d.sid_hcal};return c},_getModPageParam:function(){var b=this;return b._getAddPageParam()},_getDelExecCmd:function(){return desknets.set.CMD_SETHOLIDAYLDEL},_getDelAddPrm:function(){var b=this;var d=a("select[name=year]");var g;var f={};g=d.val();if(g.length!=4){var c=new Date();g=c.getFullYear()}f.year=g;var e=desknets.paramanalyzer.getHashParams();f.sid_hcal=e.sid_hcal;return f},});(function(b){desknets.page(desknets.set,"setholidayentry",desknets.PageInputBase,{hashFlg:"0",diaFlg:"0",$dialog:null,$frm:null,_initSet:function(){var c=this;c.callBase("_initSet");desknets.htmlparts.setUpForm(b(c._mIdPageForm))},_initFormRequestAjax:function(d,e){var c=this;c.$frm=b(d);c.callBase("_initFormRequestAjax",d,e)},onSuccessForm:function(d,e){var c=this;c.callBase("onSuccessForm",d,e);if(d.message){c.onErrorForm(c.$frm);c._setEntConfirm(d.message)}else{c.hashFlg="1";c._setLocationHashForm()}},_onCompleteForm:function(){var c=this;c.callBase("_onCompleteForm");if(c.diaFlg!="0"&&c.$dialog!=null){c.diaFlg="0";c.$dialog.dialog("close")}},_setLocationHashForm:function(){var c=this;if(c.hashFlg!="0"){c.hashFlg="0";c.callBase("_setLocationHashForm")}},_setEntConfirm:function(e){var c=this;var d="";c.$dialog=desknets.dialog.confirm(e,function(){c.diaFlg="1";d=c._getAddCmd();c.$mjPage.find('input[name="cmd"]').val(d);desknets.submitform.setDialogDisabled(c.$dialog);b(c._mIdPageForm).submit();return false})},getLocationFormParam:function(){var d=this;var e={};var c=desknets.paramanalyzer.getHashParams();if(!neo.isSet(d.mBackCmd)||!neo.isSet(d.mIdBack)){return null}var f=b("#"+d.mIdBack).find(".jco-back-page-data");if(f.length>0){e=desknets.getInputDataToObj(f);e.cmd=d.mBackCmd}else{e.sid_hcal=c.sid_hcal;e.cmd=d.mBackCmd}return e},_getDelPrm:function(){var d={};d.year=b("[name=yearmoto]").val();var c=desknets.paramanalyzer.getHashParams();d.sid_hcal=c.sid_hcal;return d},_inputAddSubmit:function(d){var c=this;c.callBase("_inputAddSubmit")},_getAddExecCmd:function(){return desknets.set.CMD_SETHOLIDAYLENTRYCONF},_getAddCmd:function(){return desknets.set.CMD_SETHOLIDAYLENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},_getModCmd:function(){return this._getAddCmd()},_getDelExecCmd:function(){return desknets.set.CMD_SETHOLIDAYLDEL}})})(jQuery);(function(b){desknets.page(desknets.set,"setholidayimp",desknets.PageImport,{mseltemplate:"",init:function(){var c=this;c._initSelectDialog();c.callBase("init")},_onAjaxFormSuccess:function(f){var d=this;var e=b(f.documentElement);var g=null;var c=null;g=e.find("message").text();c=e.find("addmessage").text();if(g){d._setEntAlert(g,c);d._execImportEnd(f)}else{d.callBase("_onAjaxFormSuccess",f)}},_setEntAlert:function(e,d){var c=this;desknets.dialog.alert(e,{type:"warn",extraMessage:d,extraClass:"co-msg-r"})},_initSelectDialog:function(){var d=this;var i=true;var h=b("#set-holiday-selcal-dialog");var f=d._getDialogOpt();h=desknets.dialog.setUp(h,f);var g=h.find(".co-table-list").find("thead").find("tr");var e=g.length;for(var c=0;c<e;c++){desknets.htmlparts.addLastClass(b(g[c]),"last-child")}b(".set-holiday-selcal-btn").click(function(){h.dialog("open");if(i){desknets.dialog.setFirstDialogOpen(h);i=false}});d._initGetDataDialog();d._initSetHoliDialogListChk()},_initGetDataDialog:function(){var c=this;desknets.ajax.rest({url:desknets.getUrl(desknets.MODULE_API_MAIN),data:{cmd:desknets.set.CMD_SETHOLIDAYCAL},success:function(d){c._initGetDataDialogOnSuccess(d)}})},_initGetDataDialogOnSuccess:function(h){var n=this;var e=b("#set-holiday-selcal-dialog").find("tbody");var j=e.html();var c=b(".set-holiday-target").find('input[name="targetid"]');var i=b(".set-holiday-selcal-select-item");n.mseltemplate=i.html();i.html("");var k="";var f=[];if(!!h.list&&!!h.list.item){if(!b.isArray(h.list.item)){f=[h.list.item]}else{f=h.list.item}}var d=f.length;for(var l=0;l<d;l++){var g=desknets.tmpl.replaceWord(j,"Name",f[l]["Name"]);var m=f[l]["id"];g=desknets.tmpl.replaceWord(g,"id",m);k=k+g}e.html(k);n._initSetHoliListChkView();if(c.length>0){n._getDialogSet()}b(".set-holiday-page").show()},_getDialogOpt:function(){var c=this;var d=desknets.dialog.getDialogOption();d.width=600;d.autoOpen=false;d.title=desknets.Resource.set.setHolidayImport;d.open=function(){c._getDialogOpen()};d.buttons={};d.buttons[desknets.Resource.OKButtonLabel]=function(){c._getDialogSet();b(this).dialog("close")};d.buttons[desknets.Resource.CancelButtonLabel]=function(){b(this).dialog("close")};return d},_getDialogOpen:function(){var c=this;var d=b("#set-holiday-selcal-dialog").find("tbody");d.find('input:checkbox[name="id"]').prop("checked",false);d.find(".co-tr-selected").removeClass("co-tr-selected");var e=b(".set-holiday-selcal-select-item");e.children().each(function(){var f=b(this);d.find('input:checkbox[name="id"][value="'+f.find('input[name="sid_hcal"]').val()+'"]').prop("checked",true).parent().parent().addClass("co-tr-selected")})},_getDialogSet:function(){var d=this;var c=b(".set-holiday-selcal-select-item");var e=b("#set-holiday-selcal-dialog").find("tbody");c.find("tr").remove();d._chkTargetSetHoliDialog();e.find('input:checkbox[name="id"]:checked').each(function(){var g=b(this).closest("tr");var f=d.mseltemplate;f=desknets.tmpl.replaceWord(f,"id",b(this).val());f=desknets.tmpl.replaceWord(f,"name",g.find(".set-holiday-calname").text());c.append(f)});c.on("mouseenter","tr",function(f){var g=b(this);setTimeout(function(){g.addClass("hover")},0)});c.on("mouseleave","tr",function(f){var g=b(this);setTimeout(function(){g.removeClass("hover")},0)});c.on("click",".co-btn-close",function(f){f.preventDefault();b(this).closest("tr").remove();d._initSetHoliListChkView()});d._initSetHoliListChkView()},_chkTargetSetHoliDialog:function(){var c=this;var f=b("#set-holiday-selcal-dialog").find('input:checkbox[name="id"]');var d=b(".set-holiday-target").find('input[name="targetid"]');var e=[];if(d.length>0){d.each(function(){$this=b(this);e.push($this.val())});if(b.inArray(desknets.set.PRM_VAL_ALL,e)>=0){f.prop("checked",true)}else{f.each(function(){$this=b(this);if(b.inArray($this.val(),e)>=0){$this.prop("checked",true)}})}d.remove()}},_initSetHoliDialogListChk:function(){var c=this;var d=b("#set-holiday-selcal-dialog").find("tbody");d.on("click","input[type=checkbox]",function(e){if(b(this).prop("checked")){b(this).parent().parent().addClass("co-tr-selected")}else{b(this).parent().parent().removeClass("co-tr-selected")}})},_initSetHoliListChkView:function(){var c=this;var e=b(".set-holiday-selcal-select");var d=b(".set-holiday-selcal-nodata");if(e.find("tr").length>0){e.show();d.hide()}else{e.hide();d.show()}},})})(jQuery);desknets.page(desknets.set,"setmodules",desknets.PageInputList,{_offids:[],_iDefAllCnt:-1,_initListStartTemplate:function(){var b=this.$mjListPage.find(".jco-list-tmpl");this._mcListTemplate=b.html();b.remove()},_initListEnd:function(){var b=this;b.callBase("_initListEnd");var c={unassignGroupLabel:desknets.Resource.set.commenuGroupName,unassignGroup:"choosable"};desknets.page.groupSelect.init({onSelectGroupHide:true},c)},_getListAjaxSuccess:function(c){var b=this;b.callBase("_getListAjaxSuccess",c);desknets.page.groupSelect.editSelectedGroup(b.$mjListPage.find(".jco-sel-items"),c)},_getListAjaxSuccessOtherSet:function(c){var b=this;var d;a.each(b._offids,function(e,f){d=a('input[type="checkbox"]').filter('[value="'+f+'"]').closest("tr");d.find("a").replaceWith(d.find("a").html())});b._offids=[];if(b._iDefAllCnt==-1){b._iDefAllCnt=c.allcnt}if(b._iDefAllCnt!=c.allcnt){desknets.set.subwin.boIsModMenu=true;b._iDefAllCnt=c.allcnt}},_listLine:function(e,f){var d=this;var c="";var b=false;var h="";var g="";if(typeof f=="object"){for(c in f){if(c=="id"){h=f[c];if(desknets.pageframe.getCommonLang()!="ja_JP"&&(h==desknets.DBVAL_MID_KOUBAI||h==desknets.DBVAL_MID_PAY)){b=true}}g=f[c];if(c=="menu"){if(f[c]=="0"){f[c]=desknets.Resource.set.setMenuDisplayOn}else{f[c]=desknets.Resource.set.setMenuDisplayOff}}else{if(c=="window"){if(f[c]=="0"){f[c]=desknets.Resource.set.setMenuTargetSameShort}else{f[c]=desknets.Resource.set.setMenuTargetNewShort}}}e=d._replaceListLine(e,c,f);f[c]=g}}if(b){d._offids.push(h)}return e},_listPageLink:function(){return},_initListEndChk:function(){var b=this;b.$mjListPage.find(".co-table-list").find("thead").delegate(".jco-checkbox-all","click",function(d){var c=(a(this).attr("checked"))?true:false;b.$mjTableList.find("input[type=checkbox]").attr("checked",c);if(c){b.$mjTableList.find("tr").addClass("co-tr-selected")}else{b.$mjTableList.find("tr").removeClass("co-tr-selected")}if(b.$mjListPage.find(".jco-sort-change").css("display")!="block"){if(c){b.$mjListPage.find(".co-chk-cnt-all").show()}else{b.$mjListPage.find(".co-chk-cnt-all").hide()}}});b.$mjListPage.find(".co-chk-cnt-all").find("a").click(function(c){c.preventDefault();b.$mjListPage.find(".co-chk-cnt-all").hide();b.$mjListPage.find(".jco-checkbox-all").attr("checked",false);b.$mjTableList.find("input[type=checkbox]").attr("checked",false).end().find("tr").removeClass("co-tr-selected")})},inputModPage:function(e){var b=this;var d="";var c={};d=b._getListModCmd();c=b._getModPageParam();c.cmd=d;c.id=e;c.gid=a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="gid"]').val();b._inputPage(c)},_listToggleViewMove:function(c){var b=this;if(c){b.$mjListPage.find(".jco-sel-btn").attr("disabled","disabled")}else{b.$mjListPage.find(".jco-sel-btn").attr("disabled",false)}b.callBase("_listToggleViewMove",c)},getMultiRequest:function(){var b=this;var c={};var d=a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="gid"]').val();c=b.callBase("getMultiRequest");if(d!=0){c["0"]["gid"]=d}return c},_getMoveParam:function(){var b=this;var c={};c.gid=a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="gid"]').val();desknets.set.subwin.boIsModMenu=true;return c},_getListCmd:function(){return desknets.set.PAGE_SETMODULES},_getListExecCmd:function(){return desknets.set.CMD_SETMODULES},_getListAddCmd:function(){return desknets.set.PAGE_SETMODULEENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETMODULEENTRY},_getMoveExecCmd:function(){return desknets.set.CMD_SETMODULEENTRYMOVE},_getListEntryClass:function(){return desknets.set.setmoduleentry},_getListModClass:function(){return desknets.set.setmoduleentry}});desknets.page(desknets.set,"setmoduleentry",desknets.PageInputBase,{_defDispVal:null,onSuccessForm:function(c,d){var b=this;desknets.set.subwin.boIsModMenu=true;return b.callBase("onSuccessForm",c,d)},_getAddExecCmd:function(){return desknets.set.CMD_SETMODULEENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},_initGetHtml:function(){var b=this;var c={};c.success=function(g){var e=desknets.ajax.chkAjaxHtmlError(g);if(e.status=="ok"){b._initHtml(g)}else{b.resetFuncBeforeHashChange();var f=desknets.dialog.alert(e.message,{errorNo:e.no});var h=desknets.parseErrorInfo(e.message,e.no);var d={close:function(i){desknets.dialog.deleteById(h.level);b.dispBackListPage()}};f.dialog(d)}};b._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_HTML,null,c)},getSingleRequest:function(){var c={};var e=desknets.paramanalyzer.getHashParam("cmd");var b=desknets.paramanalyzer.getHashParam("id");var d=desknets.paramanalyzer.getHashParam("gid");c.cmd=e;c.id=b;if(neo.isSet(d,{blank:false})){c.gid=d}return c},_inputButton:function(){var b=this;b._initAssignSelButton();b._initAssignDelButton();b._initDisplayRadio();b.$mjPage.find(".jco-input-list-page").click(function(c){c.preventDefault();b.dispBackListPage()})},_initHtml:function(e){var c=this;c.$mjPage.empty();c.$mjPage.html(e);c._$listTable=c.$mjPage.find(".co-table-list");c._$listNoData=c.$mjPage.find(".co-nodata");var d=desknets.paramanalyzer.getHashParam("id");var g=desknets.paramanalyzer.getHashParam("gid");c._initSet();var f=c._$listTable.find("thead").find("tr");for(var b=0;b<f.length;b++){desknets.htmlparts.addLastClass(a(f[b]),"last-child")}desknets.htmlparts.addStripeClass(c._$listTable.find(".co-tbody-list"),"co-tr-even");if(d=="2"||d=="12"){a(".set-menu-group-setting").hide()}c._initListChk()},_initSet:function(){var c=this;var b=c._$listTable.find(".co-tbody-list");c.callBase("_initSet");if(b.find("tr").length==0){c._listNodata()}else{c._listView()}},_listNodata:function(){var b=this;b._$listTable.hide();b._$listNoData.show()},_listView:function(){var b=this;b._$listTable.show();b._$listNoData.hide()},_initAssignSelButton:function(){var b=this;a("#jset-menu-gsel").click(function(c){b._openAssignSelDialog()})},_openAssignSelDialog:function(e){var c=this;var f;var b=c._getSelDialogID();var d=c._getSelDialogOptions();f=desknets.chooser.open(b,d)},_getSelDialogOptions:function(){var c=this;var d={};var e=false;var b=[];b=desknets.chooser.getItemsFromElement(a(".co-tbody-list"),{itemFilter:function(h,f){var g=f.closest("tr").find(".co-busyo").html();h.summary=g;return h}});d={chooseTarget:["group"],choose:function(f){c._onSelectAssignItems(f)},allGroup:null,unassignGroup:null,cmdusers:desknets.CMD_CHOOSERMSETUSERSEL,items:b};return d},_getSelDialogID:function(){return"jset-sel-menuassign-items"},_initAssignDelButton:function(){var b=this;a("#jset-menu-delgroup").click(function(c){if(!b._checkSelectTarget(desknets.Resource.Message.com_sel_nochecked)){return}b._listAssignDel(c)})},_initDisplayRadio:function(){var b=this;var c=b.$mjPage.find("input[name=off]:checked");b._swithDisplayMessage(c.val());if(b.$mjPage.find(".co-tbody-list").find("tr").length>0){b._defDispVal=c.val()}b.$mjPage.on("click","input[name=off]",function(e){var d=a(e.target);b._swithDisplayMessage(d.val())})},_swithDisplayMessage:function(b){var c=this;if(b=="0"){c.$mjPage.find(".jset-menu-group-off").show();c.$mjPage.find(".jset-menu-group-on").hide()}else{c.$mjPage.find(".jset-menu-group-on").show();c.$mjPage.find(".jset-menu-group-off").hide()}},_checkSelectTarget:function(d){var c=this;var b;b=c._$listTable.find("input[type=checkbox]").filter(":checked");if(b.length<=0){desknets.dialog.alert(d,{type:"warn"});return false}return true},_listAssignDel:function(){var c=this;var b=c._$listTable.find(".co-tbody-list");c._$listTable.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(a(this).attr("checked")){a(this).parent().parent().remove()}});if(c.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").css("display")=="block"){c.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();c._$listTable.find(".jco-checkbox-all").attr("checked",false)}if(b.find("tr").length==0){c._listNodata()}else{desknets.htmlparts.addStripeClass(c._$listTable.find(".co-tbody-list"),"co-tr-even")}},_initListChk:function(){var b=this;b._$listTable.find(".co-tbody-list").delegate("input[type=checkbox]","click",function(c){b._$listTable.find(".jco-checkbox-all").attr("checked",false);b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-some").hide();b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();if(a(this).attr("checked")){a(this).parent().parent().addClass("co-tr-selected")}else{a(this).parent().parent().removeClass("co-tr-selected")}});b._$listTable.find(".jco-checkbox-all").click(function(){var c=(a(this).attr("checked"))?true:false;b._$listTable.find("input[type=checkbox]").attr("checked",c);if(c){b._$listTable.find(".co-tbody-list").find("tr").addClass("co-tr-selected")}else{b._$listTable.find(".co-tbody-list").find("tr").removeClass("co-tr-selected")}if(c){var d=b._$listTable.find(".co-tbody-list").find("tr").length;var e=desknets.Resource.Message.com_listchk_cnt_all_disp;e=desknets.tmpl.replaceWordLF(e,"num",d+" ");b.$mjPage.find(".co-chk-cnt").find(".jco-span-chk-msg-all").html(e);b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").show()}else{b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide()}});b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").find("a").click(function(c){c.preventDefault();b.$mjPage.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();b.$mjPage.find(".co-chk-cnt").find(".jco-checkbox-all").attr("checked",false);b._$listTable.find(".co-tbody-list").find("input[type=checkbox]").attr("checked",false).end().find("tr").removeClass("co-tr-selected");b._$listTable.find(".jco-checkbox-all").attr("checked",false);return})},_onSelectAssignItems:function(c){var d;var b=this;b.$mjPage.find(".co-tbody-list").empty();for(d=0;d<c.length;d++){b._createAssignRow(c[d].id,c[d].name,c[d].summary,c[d].description)}b._listView()},_createAssignRow:function(g,l,i,k){var j=this;var f="";var h=0;var c=desknets.Resource.set.setMenuTargetSame;var b=desknets.paramanalyzer.getHashParam("id");var e=desknets.escape(l);e=desknets.escapeValue(e);e=desknets.escapeSpace(e);var d;if(neo.isSet(i,{blank:false})){d='<span title="'+desknets.tmpl.escapeWord(a("<div />").append(i).text())+'">'+i+"</span>"}else{d="&nbsp;"}f="<tr>";f=f+'<td class="co-chk"><input type="checkbox" name="_assignid" value="'+g+'">';f=f+'<input type="hidden" name="assignid" value="'+g+'" />';f=f+"</td>";f=f+'<td><span class="co-gicon-group">&nbsp;</span><span class="jco-sel-item" data-name="'+e+'" data-id="g'+g+'" data-description="'+k+'" title="'+e+'">'+e+"</span></td>";f=f+'<td class="co-busyo">'+d+"</td>";f=f+"</tr>";j._$listTable.find(".co-tbody-list").append(f);desknets.htmlparts.addStripeClass(j._$listTable.find(".co-tbody-list"),"co-tr-even");if(a(".co-table-list").find("thead").hasClass("co-thd-setlist-title-hide")){a(".co-table-list").find("thead").removeClass("co-thd-setlist-title-hide")}}});desknets.page(desknets.set,"setloginlogo",desknets.PageSet,{mboPrev:false,init:function(){var b=this;b.callBase("init");a(".jset-loginlogo-submit").click(function(c){b.mboPrev=false;a('input[name="cmd"]').val(desknets.set.CMD_SETLOGINLOGO)});a(".jset-loginlogo-prev").click(function(c){b.mboPrev=true;if(a('input[name="loginimg"]:checked').val()=="2"&&a('input[name="attach"]').val()!=""){a('input[name="cmd"]').val(desknets.set.CMD_SETLOGINTMPLOGO)}else{c.preventDefault();b._openPrev()}});a('input[name="attach"]').change(function(){a("#loginimg2").val(["2"])})},_openPrev:function(c){var b=this;var f="";if(c===true){f="&tmp=1"}var d=a('input[name="loginimg"]:checked').val();var e=desknets.getUrl(desknets.MODULE_MAIN)+"?cmd="+desknets.set.PAGE_SETLOGINWINPREV+"&loginimg="+d+"&_="+desknets.createRandomId()+"#logoset=on"+f;window.open(e,"attachdisp_t").focus()},_getAjaxFormOption:function(){var b=this;var c={};c=b.callBase("_getAjaxFormOption");c.dataType="xml";return c},_onAjaxFormSuccess:function(c){var b=this;if(b.mboPrev){var d=a(c);var e=desknets.getUrl(desknets.MODULE_MAIN);e=e+"?cmd="+desknets.set.PAGE_SETLOGINTMPLOGO+"&fno=1";a(".sysad-setloginlogo").find("img").attr("src",e);a("#setloginlogoimg").attr("href",e).text(d.find("attachdisp").text());b._openPrev(true);desknets.submitform.clearDisabled(a(b._mIdPageForm))}else{b.callBase("_onAjaxFormSuccess",c)}},_getIdPageForm:function(){return"frm"},_getNextCmd:function(){return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"setoptwindows",desknets.PageInputList,{_initListStartTemplate:function(){var b=this.$mjListPage.find(".jco-list-tmpl");this._mcListTemplate=b.html();b.remove()},_listLine:function(b,e){var d=desknets.Resource,c=!!Number(e.menu)?"hideLabel":"showLabel";b=this.callBase("_listLine",b,e);b=desknets.tmpl.replaceWordHtml(b,"menu_label",d[c]);return b},_getListCmd:function(){return desknets.set.PAGE_SETOPTWINDOWS},_getListExecCmd:function(){return desknets.set.PAGE_SETOPTWINDOWS},_getListAddCmd:function(){return desknets.set.PAGE_SETOPTWINDOWENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETOPTWINDOWENTRY},_getDelExecCmd:function(){return desknets.set.CMD_SETOPTWINDOWLDEL},_getMoveExecCmd:function(){return desknets.set.CMD_SETOPTWINDOWMV},_getListEntryClass:function(){return desknets.set.setoptwindowentry},_getListModClass:function(){return desknets.set.setoptwindowentry}});desknets.page(desknets.set,"setoptwindowentry",desknets.PageInputBase,{_$entryUser:null,_inputAjaxFormOption:function(){var b=this;var c={};c=b.callBase("_inputAjaxFormOption");c.dataType="xml";return c},_initHtml:function(c){var b=this;b.$mjPage.empty();b.$mjPage.html(c);b._initSet()},changPage:function(){var b=this;b.callBase("changPage");b._$entryUser=a(".joption-row-other-to");b._setUpEntry();var c=b._$entryUser.find(".co-selmulti-items > .co-selitem");if(c.length<=0){b._createAllRow()}},_setUpEntry:function(){var b=this;var e=this.$mjPage.find(".jset-optwin-icon-entry");var d=this.$mjPage.find(".jset-optwin-menu-icon-entry");var c=this.$mjPage.find(".jset-optwin-portal-icon-entry");desknets.menu.icon.setUp(e);desknets.menu.icon.setUp(d);desknets.menu.icon.setUp(c);a("#jset-optwin-usel").click(function(f){f.preventDefault();desknets.chooser.open("jset-optwin-usel-dialog",b._getChooserOptions())})},_getChooserOptions:function(){var c=this;var d=c._$entryUser.children("td");var b=desknets.chooser.getItemsFromElement(d,{itemFilter:function(h,e){var g=e.closest(".co-selitem").find('input[name="condition"]').val();if(g.substring(g.indexOf("_")+1)=="2"){g="all"}else{g=""}h.descendant=g;if(h.type!="user"){var f=e.closest(".co-selitem").find("span").data("grp");if(neo.isSet(f,{blank:false})){f=desknets.escape(f);f=desknets.escapeValue(f);f=desknets.escapeSpace(f);h.description=f}}return h}});return{chooseTarget:["user","group","role"],cmdusers:desknets.CMD_CHOOSERMSETUSERSEL,unassignGroup:"readonly",noEveryone:true,editDescendant:true,choose:function(e){c._onSetSelect(e,true)},items:b}},_onSetSelect:function(e,h){var i,d;var k=this;var c=a(".co-selmulti-items").children();var g=null;var b=e.length;var j=c.length;a(".co-selmulti-items").find(".co-selitem").remove();if(b>0){a(".co-selmulti-items").find('input[name="assignid"]').filter('[value="all"]').parent(".co-selitem").remove()}else{k._createAllRow()}for(i=0;i<b;i++){var f=k._createRow(e[i])}},_createRow:function(j){var f="";var c="";var d="";var i="";var g=a(".co-selmulti-items");c=j.type.substring(0,1);f=j.id;if(c=="g"&&j.descendant=="all"){d=c+f+"_2"}else{d=c+f+"_1"}var h='<span class="co-selitem"><span title="{{titlename}}">{{Name}}</span><input type="hidden" value="{{id}}" name="assignid"><input type="hidden" value="{{condition}}" name="condition">';h+='<input type="hidden" class="jco-sel-item" data-id="{{id}}" data-name="{{Name}}" data-description="{{description}}" /></span>';if(c=="u"){i=desknets.escapeValue(desknets.escape(j.description))}else{i=j.description}var e=desknets.escapeValue(desknets.escape(j.name));var b="";if(c=="r"||c=="u"){b=e}else{if(neo.isSet(j.description,{blank:false})){b=j.description+"-"}b=b+e}h=desknets.tmpl.replaceWordHtml(h,"Name",e);h=desknets.tmpl.replaceWordHtml(h,"titlename",b);h=desknets.tmpl.replaceWordHtml(h,"id",c+f);h=desknets.tmpl.replaceWordHtml(h,"condition",d);h=desknets.tmpl.replaceWordHtml(h,"description",i);g.append(h)},_updateTargets:function(){var b=this;var c=b._$entryUser.find(".co-selmulti-items > .co-selitem");if(c.length<=0){b._createAllRow()}},_createAllRow:function(){var c=this;var d="";var b="Everyone";d='<span class="co-selitem">\n';d=d+'<span title="'+b+'">'+b+"</span>\n";d=d+'<input type="hidden" name="assignid" value="all">\n';d=d+"</span>\n";a(".co-selmulti-items").append(d)},_initGetHtml:function(){var b=this;var c={};c.success=function(d){if(d[0]["status"]!=desknets.RES_STATUS_SUCCESS){b.onError(d[0]["errorno"],d[0]["errormessage"])}else{b._initHtml(d[0].html)}};b._sendRequestAjax(desknets.ajax.REQTYPE_MULTI,desknets.ajax.RESTYPE_JSON,null,c)},getMultiRequest:function(){var d={};var e=desknets.paramanalyzer.getHashParam("cmd");var c=desknets.paramanalyzer.getHashParam("id");var b={};d.cmd=e;if(c){d.id=c}b["0"]=d;return b},_getErrorPlace:function(d){var e=this;var f="";var c="";if(d=="userfld1"||d=="userfld2"){if(d=="userfld1"){f=e.$mjPage.find(".jco-input-"+d).closest("tr").find(".co-colon").find('select[name="userval1"] option:selected').html()}else{f=e.$mjPage.find(".jco-input-"+d).closest("tr").find(".co-colon").html()}c=e.$mjPage.find(".jco-input-"+d).closest("table").closest("tr").find("th").find(".co-colon").html();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{if(d.indexOf("basic")!=-1||d.indexOf("proxy")!=-1){var b=e.$mjPage.find(".jco-input-"+d);if(d.indexOf("basic")!=-1){f=e.$mjPage.find('input[name="basicauth"]').data("server")}else{f=e.$mjPage.find('input[name="proxyauth"]').data("server")}f=f+" - "+b.closest("td").prev().find(".co-colon").eq(0).text();c=b.closest("ul").closest("li").find("label").html();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{if(d.substring(0,6)=="addfld"){var b=e.$mjPage.find(".jco-input-"+d);f=b.closest("table").closest("tr").find("th").find(".co-colon").html();if(neo.isSet(f)&&f.length>0){f=f+desknets.merrMsgConnect}return f}else{return e.callBase("_getErrorPlace",d)}}}},onSuccessForm:function(c,d){var b=this;desknets.set.subwin.boIsModOptmenu=true;return b.callBase("onSuccessForm",c,d)},_getAddExecCmd:function(){return desknets.set.CMD_SETOPTWINENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},_getDelExecCmd:function(){return desknets.set.CMD_SETOPTWINDOWLDEL}});desknets.page(desknets.set,"setnotice",desknets.PageSetList,{_getNextCmd:function(){return desknets.set.PAGE_SETADMIN},_listNodata:function(){var b=this;b.callBase("_listNodata");a(".jset-notice-data").hide();a(".jset-notice-nodata").show()},_listView:function(){var b=this;b.callBase("_listView");a(".jset-notice-data").show();a(".jset-notice-nodata").hide()},_setListTable:function(){var b=this;b.callBase("_setListTable");b._$listTable=b._$listArea.find(".jset-notice-table-list")},_listSet:function(){var c=this;var b=c._$listTable.find(".co-tbody-list");if(b.find("tr").length==0){c._listNodata()}else{c._listView()}},_initListChk:function(){}});desknets.page(desknets.set,"setmobilemodules",desknets.PageInputList,{_initListEnd:function(){var b=this;b.callBase("_initListEnd")},_listLine:function(e,f){var d=this;var c="";var b=false;var h="";var g="";if(typeof f=="object"){for(c in f){if(c=="id"){h=f[c]}g=f[c];if(c=="menu"){if(f[c]=="0"){f[c]=desknets.Resource.set.setMenuDisplayOn}else{f[c]=desknets.Resource.set.setMenuDisplayOff}}e=d._replaceListLine(e,c,f);f[c]=g}}return e},_listPageLink:function(){return},inputModPage:function(e){var b=this;var d="";var c={};d=b._getListModCmd();c=b._getModPageParam();c.cmd=d;c.id=e;b._inputPage(c)},_listToggleViewMove:function(c){var b=this;if(c){b.$mjListPage.find(".jco-sel-btn").attr("disabled","disabled")}else{b.$mjListPage.find(".jco-sel-btn").attr("disabled",false)}b.callBase("_listToggleViewMove",c)},_getListCmd:function(){return desknets.set.PAGE_SETMODULES},_getListExecCmd:function(){return desknets.set.CMD_SETMOBILEMODULES},_getListAddCmd:function(){return desknets.set.PAGE_SETMOBILEMODULEENTRY},_getListModCmd:function(){return desknets.set.PAGE_SETMOBILEMODULEENTRY},_getListEntryClass:function(){return desknets.set.setmobilemoduleentry},_getListModClass:function(){return desknets.set.setmobilemoduleentry}});desknets.page(desknets.set,"setmobilemoduleentry",desknets.PageInputBase,{_getAddExecCmd:function(){return desknets.set.CMD_SETMOBILEMODULEENTRY},_getModExecCmd:function(){return this._getAddExecCmd()},getSingleRequest:function(){var c={};var d=desknets.paramanalyzer.getHashParam("cmd");var b=desknets.paramanalyzer.getHashParam("id");c.cmd=d;c.id=b;return c}});desknets.page(desknets.set,"setmbattach",desknets.PageSet,{init:function(){var b=this;b._initSetAtt();b.callBase("init")},_initSetAtt:function(){var b=this;var c=a(".co-m-content");c.delegate('input[type="checkbox"]',"change",function(e){b._setEntryOffTr(a(this))});var d=c.find(".jset-mbattach-menu").find('input[type="hidden"]');a.each(d,function(e,f){var h=a(f);var g=h.prev();if(h.val()=="0"){h.closest("tr").addClass("co-tr-off")}else{g.attr("checked",true)}})},_setEntryOffTr:function(d){var b=this;var c=d.closest("tr");if(d.attr("checked")){c.removeClass("co-tr-off");c.find('input[type="hidden"]').val("1")}else{c.addClass("co-tr-off");c.find('input[type="hidden"]').val("0")}},_getNextCmd:function(){return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"setmenu",desknets.PageSet,{_getAreaTitle:function(b){return b.find(".co-setting-title").text()},_onAjaxFormSuccess:function(b){desknets.submitform.clearDisabled(a(this._mIdPageForm));desknets.menu.reload();desknets.dialog.alert(desknets.Resource.Message.com_setting_changed)}});desknets.page(desknets.set,"setmenubar",desknets.PageSet,{_getAreaTitle:function(b){return b.find(".co-setting-title").text()},_onAjaxFormSuccess:function(b){desknets.submitform.clearDisabled(a(this._mIdPageForm));desknets.menu.reload();desknets.dialog.alert(desknets.Resource.Message.com_setting_changed)}});desknets.page(desknets.set,"setmenulist",desknets.menu.PageMenuListBase,{pageBookmarkList:"portalmsetbookmarklist",buttonAreas:{bookmark:a()},area:"S",_initListStart:function(){this.callBase("_initListStart");var b=this;this.$mjListPage.on("layoutchange.dneoMenuContents",function(){b._onUpdateNoteSize()})},changPage:function(){this.callBase("changPage");this._onUpdateNoteSize()},_listLine:function(b,d){var c=desknets.Resource,e;if(!!this._tmpls[this.kind]){b=this._tmpls[this.kind]}b=this.callBase("_listLine",b,d);e=Number(d.menu)>0?c.set.setMenuDisplayOff:c.set.setMenuDisplayOn;b=desknets.tmpl.replaceWordHtml(b,"useLabel",e);e=Number(d.window)>0?c.menu.targetBlankLabel:c.menu.targetSelfLabel;b=desknets.tmpl.replaceWordHtml(b,"targetLabel",e);e=Number(d.menu)>0?c.hideLabel:c.showLabel;b=desknets.tmpl.replaceWordHtml(b,"menuLabel",e);e=Number(d.off)>0?c.hideLabel:c.showLabel;b=desknets.tmpl.replaceWordHtml(b,"offLabel",e);return b},_getListCmd:function(){return"setmenulist"},_getListExecCmd:function(){var b={optmenu:desknets.set.PAGE_SETOPTWINDOWS,bookmark:"setcmdmenubookmark"};return b[this.kind]||desknets.set.CMD_SETMODULES},_onUpdateNoteSize:function(){var b=this,c=b.$mjListPage.find(".co-menu-scroll");if(this.kind=="module"){setTimeout(function(){var d=b.$mjListPage.find(".co-stnote").height();c.css("bottom",(8+d)+"px")},0)}else{c.removeAttr("style")}}});desknets.set.input={};desknets.page(desknets.set,"setloginwindow",desknets.PageInputList,{_elImgLi:null,_imgId:null,_boReset:null,init:function(){var b=this;b.callBase("init");a(".sysad-login-design-reset").click(function(d){b._openResetBtnDialog(d)});a(".jset-logindesign-addimg").click(function(d){b._openAddBtnDialog(d)});if(a(".co-tbody-list").find("li").length<=0){a(".jsysad-btnlink-blank").attr("disabled",true)}a(".jsysad-btnlink-blank").click(function(d){b._openDelBtnDialog(d)});a(".sysad-login-design-formpos").delegate(".sysad-login-design-pos-btn div","click",function(d){b._moveLoginFormPos(d)});a("input.sysad-login-design-view").click(function(d){d.preventDefault();b._openPrevPage(d)});b._initSetAjaxFrom();b._inputFormSaveToObserver();b._setListEvent();if(jsonExtList){desknets.attach.ext.saveList(jsonExtList)}if(desknets.browser.msie8){var c=a("#login-picture").data("img");if(c.length>0){c=desknets.msUrl+c+"?"+(new Date);a("<img/>").attr("src",c).load(function(){var d=a(".sysad-login-setimage"),e=a(this),f,g;if(e.length>0){f=d.width();g=d.height();e.css({width:f,height:g})}}).appendTo(a("#login-picture").empty())}}b._initBeforeUnload()},_setListEvent:function(){var b=this;a(".co-tbody-list").delegate(".sysad-login-design-view","click",function(c){b._openSetBtnDialog(c)})},_openResetBtnDialog:function(c){c.preventDefault();var b=this;b._imgId="";b._boReset=true;var e=desknets.Resource.Message.warnResetLoginWinMsg;var d=desknets.dialog.confirm(e,function(){b._resetLoginWindow(d)})},_openDelBtnDialog:function(f){f.preventDefault();var b=this;var e=desknets.Resource.Message.warnDelLoginWinMsg;var d={extraMessage:desknets.Resource.Message.warnDelLoginWinAddMsg,extraClass:"co-msg co-tcenter"};var c=desknets.dialog.confirm(e,function(){desknets.submitform.setDialogDisabled(c);b._delAjaxLoginWindow(c);return false},d);c.parent().css("width","430px")},_openSetBtnDialog:function(d){d.preventDefault();var b=this;b._elImgLi=a(d.target).closest("li");b._imgId=b._elImgLi.find("[name=imgid]").val();b._boReset=false;var e=desknets.Resource.Message.warnSetLoginWinMsg;var c=desknets.dialog.confirm(e,function(){b._setAjaxLoginWindow(c)});c.parent().css("width","470px")},_openAddBtnDialog:function(c){c.preventDefault();var b=this;desknets.set.input.attach.init(b);desknets.set.input.attach.open()},_openPrevPage:function(f){f.preventDefault();var b=this;var e=a("[name=login_design]").val();var d=a("[name=login_inputpos]").val();var c=b._getLoginWinPrevUrl(e,d);window.open(c)},_getLoginWinPrevUrl:function(b,c){return desknets.getUrl(desknets.MODULE_MAIN)+"?cmd="+desknets.set.PAGE_SETLOGINWINPREV+"&id="+b+"&login_inputpos="+c},_setAjaxLoginWindow:function(c){var j=this;var i;var g;var h;var e;var d;var b=desknets.getUrl(desknets.MODULE_API_MAIN);if(j._elImgLi){var f=j._elImgLi.find(".sysad-login-design-fname").find("img");i=f.attr("alt");h=f.attr("src");d=j._elImgLi.find(".sysad-login-design-date").html();a("#sysad-login-design-fname").show();a("#sysad-login-design-fname a").html(i);a("#sysad-login-design-fname a").attr("href",h);if(desknets.browser.msie8){h=desknets.msUrl+h+"?"+(new Date);a("<img/>").attr("src",h).load(function(){var k=a(".sysad-login-setimage"),l=a(this),m,n;if(l.length>0){m=k.width();n=k.height();l.css({width:m,height:n})}}).appendTo(a("#login-picture").empty())}else{a("#login-picture").css("background-image","url("+h+")")}a("#sysad-login-design-date").find(".sysad-login-design-date-setting").show();a("#sysad-login-design-date").find(".sysad-login-design-date-setting").html(d);a(".sysad-login-design-activeid").val(j._imgId);a(".sysad-login-design-pos-btn").removeClass("on");j._setLoginFormPos("mc");a(".formpos-mc").parent().addClass("on");a(".sysad-login-design-activepos").val("mc");c.dialog("close")}},_delAjaxLoginWindow:function(f){var c=this;var b=[];var e=desknets.getUrl(desknets.MODULE_API_MAIN);c.$mjListPage.find('input[name="imgid"]:checked').each(function(){b[b.length]=a(this).val()});var d={cmd:desknets.set.CMD_SETLOGINWINDOWDEL,fno:b};desknets.ajax.rest({url:e,data:d,type:"POST",success:function(i,g,j){var h=a(".sysad-login-design-activeid").val();a.each(b,function(k,l){if(l==h){d={cmd:desknets.set.CMD_SETLOGINWINDOWSET,login_design:"",login_inputpos:"mc"};desknets.ajax.rest({url:e,data:d,type:"POST",success:function(n,m,o){c._resetLoginWindow();c._inputFormSaveToObserver()},error:function(n,m,o){desknets.ajax.onError(n.status,o)}})}});c.$mjListPage.find('input[name="imgid"]:checked').each(function(){a(this).closest("li").remove()});if(a(".co-tbody-list li").length<=0){a(".co-tbody-list").hide();a(".co-nodata").show();a(".jsysad-btnlink-blank").attr("disabled",true)}f.dialog("close")},error:function(h,g,i){desknets.ajax.onError(h.status,i)}})},_initListStartSet:function(){var b=this;b.$mjTableList=b.$mjListPage.find(".sysad-login-design");b.$mjPage=a(document.documentElement);var d=a(".sysad-login-design-date-setting");var c=d.html().substring(0,8);d.html(desknets.dateTime.dispDateTime(c,{type:"list"}))},_initListStartTemplate:function(){var b=this;b.$mjTableList.removeClass("sysad-login-design-hide");b.callBase("_initListStartTemplate")},_getListAjaxSuccess:function(c){var b=this;var d=this._getListAjaxSuccessData(c);if(d.length<=0){b.$mjListPage.find(".co-tbody-list").hide();a(".jsysad-btnlink-blank").attr("disabled",true)}else{b.$mjListPage.find(".co-tbody-list").show();a(".jsysad-btnlink-blank").attr("disabled",false)}b.callBase("_getListAjaxSuccess",c)},_replaceListLine:function(c,g,d){var f=d[g];if(g=="Url"){var b='<a class="sysad-login-design-fname" href="'+f+'" target="_blank">{{dispname}}</a>';var e=new RegExp("{{link}}","ig");c=desknets.tmpl.replaceWordHtml(c,"link",b);f='<img src="'+f+'" alt="{{dispname}}">'}else{if(g=="cretime"){f=desknets.dateTime.dispDateTime(f.substring(0,8),{type:"list"})}else{f=desknets.escape(f);f=desknets.escapeValue(f);f=desknets.escapeSpace(f)}}c=desknets.tmpl.replaceWordHtml(c,g,f);return c},_moveLoginFormPos:function(d){var c=this;var b=a(d.target);a(".sysad-login-design-pos-btn").removeClass("on");b.closest("a").addClass("on");var f=b.attr("class").split("-");var e=f[1];c._setLoginFormPos(e)},_resetLoginWindow:function(c){var b=this;a(".sysad-login-design-activeid").val("");a("[name=login_design]").val("");a(".sysad-login-design-pos-btn").removeClass("on");b._setLoginFormPos("mc");a(".formpos-mc").parent().addClass("on");a("#sysad-login-design-view").find("#login-picture").css("background-image","");if(desknets.browser.msie8){a("#sysad-login-design-view").find("#login-picture").empty()}a("#sysad-login-design-fname").hide();a(".sysad-login-design-date-setting").hide()},_setLoginFormPos:function(b){var c=["tr","tc","tl","mr","mc","ml","br","bc","bl"];a.each(c,function(d,e){if(e==b){a(".selformpos").addClass(e);a(".sysad-login-design-activepos").val(e)}else{a(".selformpos").removeClass(e)}})},_initSetAjaxFrom:function(){var b=this;var c={};c=b._getAjaxFormOption();b._initFormRequestAjax("#listfrm",c)},_getAjaxFormOption:function(){var b=this;var c={};c={success:function(e,d,f){b._onAjaxFormSuccess(e)}};return c},_onAjaxFormSuccess:function(d){var b=this;var e={};var g=b._getModule();var f=b._getNextCmd();var h=desknets.getUrl(g);e.cmd=f;var c=desknets.getNeoParam(e);h=h+"?"+c;desknets.execLocation(h)},_inputFormSaveToObserver:function(){var b=this;var c=b._getIdListPageForm();if(c!=""){b._defFormVals={};var d=a("#"+c);b._formObserveSave(d,b._defFormVals)}},_getBeforeUnloadMsg:function(){return desknets.Resource.Message.com_input_beforeentry_msg},_formObserveisChanged:function(){var b=this;var c=b._getIdListPageForm();if(!neo.isSet(c)){return false}var d=a("#"+c);if(b._formObserve_isChanged(d)){return true}return false},_getNextCmd:function(){return desknets.set.PAGE_SETADMIN},_formObserve_getTargetNames:function(){return["login_design","login_inputpos"]}});desknets.page(desknets.set.input,"attach",null,{$entry:null,$list:null,$listframe:null,id:"attach",page:null,_$entryAttachList:null,options:null,init:function(b){this.page=b;this.$entry=b.$mjPage;this.$list=b.$mjTableList;this.$listframe=b.$mjListFrame;this._setUpEntry()},open:function(){desknets.attach.uploadDialog({file:this.options.file,delURL:this.options.delURL,delParams:this.options.delParams,uploadURL:this.options.uploadURL,uploadParams:this.options.uploadParams,totalSizeLimit:this.options.totalSizeLimit,downloadURL:this.options.downloadURL,done:this.options.done,icon:this.options.icon})},_setUpEntry:function(){this._$entryAttachList=this.$list.find(".sysad-login-design");var b={files:[],tmpnm:""};var c=a("[name=filesize]").val();if(c<=0){c=2147483648}this.options={file:b,delURL:desknets.getUrl(desknets.MODULE_API_MAIN),delParams:{cmd:desknets.set.CMD_SETLOGINWINDOWDEL},uploadURL:desknets.getUrl(desknets.MODULE_API_MAIN),uploadParams:this._getParams(desknets.set.CMD_SETLOGINWINDOWADD),totalSizeLimit:Number(c),downloadURL:this._getDownLoadURL(),done:this._addFileList,icon:desknets.attach.ext.getIconList()}},_getParams:function(b){var d=a('input[name="tmpnm"]').val();var c={cmd:b,tmpnm:d};return c},_addFileList:function(b){if(b.files.length>0){a(window).off("beforeunload.pageBase");location.reload()}},getImageUrl:function(e){var h=e.fno;var g=e.tmpnm;var b=e.mimetype;var d=e.Name;var c=desknets.getUrl(desknets.MODULE_REFER);var f={cmd:"referdownload",item1:"office",item2:"login",id1:h,filename:g,mimetype:b,realname:d};c+="?"+a.param(f);return c},_getDownLoadURL:function(){return desknets.getUrl(desknets.MODULE_API_MAIN)}});desknets.page(desknets.set,"setloginwinprev",desknets.PageBase,{_setPosition:null,_boLogo:false,mobjPrm:null,init:function(){var d=this;if(location.hash.indexOf("logoset=on")>0){d._boLogo=true}else{d._boLogo=false}var c=a("#login-picture").find("[name=pics]").val();desknets.img.view(c,a("#login-picture"));var b=a(".jco-group-sel-item-tmpl").find("span");b.attr("title","gid");b.html("&nbsp;");a("#login-btn").click(function(e){e.preventDefault()});a("#login-logo2").find("a").click(function(e){e.preventDefault()});a("#dn-h-logo").click(function(e){e.preventDefault()});a("#sysad-login-align-submit").click(function(e){window.close()});if(d._boLogo){d.mobjPrm=desknets.splitParam(desknets.paramanalyzer.getLocationHash());d.initLogo()}else{d.initLogin()}},initLogo:function(){var b=this;var c=false;a("#sysad-login-align").hide();if(b.mobjPrm.tmp=="1"){var d=desknets.getUrl(desknets.MODULE_MAIN);d=d+"?cmd="+desknets.set.PAGE_SETLOGINTMPLOGO+"&fno=1";a("#login-logo2").find("img").attr("src",d)}},initLogin:function(){var b=this;a("#sysad-login-align").show()}});desknets.page(desknets.set,"setlogin",desknets.set.setinput,{_getErrorPlace:function(c){var d=this;var e="";var b="";if(c=="pwdminlen"||c=="pwdinvchar"){if(c=="pwdminlen"){e=a("#frm").find(".jco-input-"+c).closest("tr").prev().find(".co-colon").eq(0).html()}else{e=a("#frm").find(".jco-input-"+c).closest("tr").prev().prev().find(".co-colon").eq(0).html()}b=a("#frm").find(".jco-input-"+c).closest("td").prev().text();if(neo.isSet(e)&&e.length>0){e=e+" - "+b+desknets.merrMsgConnect}return e}else{return d.callBase("_getErrorPlace",c)}}});desknets.page(desknets.set,"setmailserver",desknets.set.setinput,{init:function(){var b=this;b.callBase("init");b._setToggleMailServer()},_setToggleMailServer:function(){var b=this;var c=a(".co-setarea");c.delegate("a.set-mailsvr-toggle","click",function(e){var d=a(this);e.preventDefault();if(d.hasClass("on")){b._setToggleSwitchMailServer(d,false)}else{b._setToggleSwitchMailServer(d,true)}});a.each(c.find("a.set-mailsvr-toggle"),function(d,f){var e=a(this);b._setToggleSwitchMailServer(e,false)})},_setToggleSwitchMailServer:function(b,c){if(c==true){b.addClass("on");b.closest("tr").find(".co-td").find(".jset-mailsvr-confirm").show()}else{b.removeClass("on");b.closest("tr").find(".co-td").find(".jset-mailsvr-confirm").hide()}},_getErrorPlace:function(c){var d=this;var f="";var b="";if(c=="pop3server"||c=="pop3"||c=="smtpserver"||c=="smtp"){var h=a("#frm").find(".jco-input-"+c).closest("tr");var e=h.closest("table").closest("tr");var g=e.find("th").eq(0).find(".co-colon");f=g.text();b=h.find(".co-colon").text();if(neo.isSet(f)&&f.length>0){f=f+" - "+b+desknets.merrMsgConnect}return f}else{if(c=="pop3uid"||c=="pop3pwd"||c=="smtpauthuid"||c=="smtpauthpwd"){f=a("#frm").find(".jco-input-"+c).closest("td").prev().find(".co-colon").eq(0).text();b=a("#frm").find(".jco-input-"+c).closest("li").find("label").html();if(neo.isSet(f)&&f.length>0){f=b+" - "+f+desknets.merrMsgConnect}return f}else{return d.callBase("_getErrorPlace",c)}}}});desknets.page(desknets.set,"setloginmobile",desknets.set.setinput,{_initSetAjaxFrom:function(){var c=this;var d=c._getIdPageSetForm();var b=false;c.callBase("_initSetAjaxFrom");var e=a("#"+d);e.find('input[type="submit"]').on("click",function(i){i.preventDefault();var h=e.find('input[name="mbloginidsave"]:checked').val();var g=e.find('input[name="mbloginpwdsave"]:checked').val();var l="";if(h=="1"&&g=="1"){l=desknets.Resource.Message.set_mblogin_savelogininfo_both}var k=e.find('input[name="mbloginsidtermuse"]:checked').val();var f=e.find('input[name="mbloginsidterm"]').val();if(k=="0"||(k=="1"&&Number(f)>3)){if(!neo.isSet(l,{blank:false})){l=desknets.Resource.Message.set_mblogin_savesidterm_ever}b=true}desknets.dialog.deleteById("warn");if(neo.isSet(l,{blank:false})){l=l+"<br />"+desknets.Resource.Message.set_mblogin_confirm_saveset;var j=desknets.dialog.confirm(l,function(){if(b){j.dialog("destroy");l=desknets.Resource.Message.set_mblogin_savesidterm_ever_reconfirm;if(k=="0"){l=desknets.tmpl.replaceWord(l,"savesidterm",desknets.Resource.Message.set_mblogin_savesidterm_nolimit)}else{l=desknets.tmpl.replaceWord(l,"savesidterm",desknets.Resource.Message.set_mblogin_savesidterm_long)}var m=desknets.dialog.confirm(l,function(){desknets.submitform.setDialogDisabled(j);desknets.dialog.deleteById("warn");a(i.target).trigger("submit");return false},{type:"warn"})}else{desknets.submitform.setDialogDisabled(j);desknets.dialog.deleteById("warn");a(i.target).trigger("submit");return false}return false},{type:"warn"});return}else{desknets.dialog.deleteById("warn");a(i.target).trigger("submit")}})},checkInput:function(c){var b=this;var e=null;var d=c.find('input[name="mbloginsidtermuse"]:checked').val();c.find(".jco-validation-number").each(function(){if(!desknets.validation.isNumber(a(this).val())||(d=="1"&&a(this).val()=="0")){var f={};if(a(this).val()=="0"){f.msg=desknets.Resource.Message.set_mblogin_saveterm_0}else{f.msg=desknets.Resource.Message.com_invalid_number}f.fieldid=a(this).attr("name");f.fieldname=b._getErrorPlace(f.fieldid);e=desknets.getErrConvMsg(f);desknets.submitform.clearDisabled(c);return false}});return e}});desknets.page(desknets.set,"setlicenseniput",desknets.PageInputBase,{_setLocationHashForm:function(){var b=this;var c=desknets.getUrl(desknets.MODULE_MAIN);desknets.execLocation(c+"?cmd="+desknets.set.PAGE_SETLICENSELIST)},_getAddExecCmd:function(){return desknets.set.CMD_SETLICENSET}});desknets.page(desknets.set,"setlicenselist",desknets.PageInputList,{_boReload:false,_initListStartSet:function(){this.callBase("_initListStartSet");a("#jset-license-customer").click(function(b){var c=a(b.target).data(desknets.usetset.DATA_CMD);var d=desknets.Resource.set.licenseCustomerList;desknets.DialogGuideList.setUp(desknets.set.PAGE_SETLICENSECLIST,desknets.set.CMD_SETLICENSECLIST,d)})},_replaceListLine:function(b,e,c){var d;if(e==="usercount"&&c[e]!="----"){d=parseInt(c[e],10);d=desknets.tmpl.replaceWordHtml(desknets.Resource.set.licenseUser,"members",d);b=desknets.tmpl.replaceWordHtml(b,e,d);return b}else{return this.callBase("_replaceListLine",b,e,c)}},_listDel:function(d,c){var b=this;b._boReload=true;b.callBase("_listDel",d,c)},_boDelSingle:function(){return true},_getListAjax:function(d){var b=this;if(!!b._boReload){b._boReload=false;var c=desknets.getUrl(desknets.MODULE_MAIN);desknets.execLocation(c+"?cmd="+desknets.set.PAGE_SETLICENSELIST);return}return b.callBase("_getListAjax",d)},_getListCmd:function(){return desknets.set.PAGE_SETLICENSELIST},_getListExecCmd:function(){return desknets.set.CMD_SETLICENSELIST},_getListAddCmd:function(){return desknets.set.PAGE_SETLICENSEINPUT},_getDelExecCmd:function(){return desknets.set.CMD_SETLICENSEDEL},_getListEntryClass:function(){return desknets.set.setlicenseniput}});desknets.page(desknets.set,"setsavesetting",desknets.PageSet,{init:function(){this._initSetSaveSetting();this.callBase("init")},_initSetSaveSetting:function(){var d;var b="";var c=desknets.pageframe.getTopMsg();d=a("#co-topmsg-text-set").html();if(c.hasClass("alert")==true){b="alert"}else{if(c.hasClass("error")==true){b="error"}}if(d.length!=0){desknets.pageframe.viewTopMsg(d,b)}},_getNextCmd:function(){return desknets.set.PAGE_SETADMIN}});desknets.page(desknets.set,"setproxy",desknets.set.setinput,{init:function(){var b=this;this.callBase("init");var c=a(this._mIdPageForm+" .jset-proxy-test-url");desknets.watermark.set(c);c.removeAttr("title");c.siblings('input[type="button"]').click(function(){b._checkInputtedServer()})},_checkInputtedServer:function(){var b=a(this._mIdPageForm);var c={cmd:"setcmdproxycheck",host:b.find('input[name="host"]').val(),port:b.find('input[name="port"]').val(),uid:b.find('input[name="uid"]').val(),pwd:b.find('input[name="pwd"]').val(),Url:b.find(".jset-proxy-test-url").val()};desknets.ajax.rest({url:desknets.getUrl(desknets.MODULE_API_MAIN),data:c,success:function(){desknets.dialog.alert(desknets.Resource.Message.set_proxy_success)}})}});(function(b){desknets.page(desknets.set,"setssoclientlist",desknets.PageInputList,{inputDispPage:function(c){this.inputModPage(c)},_getIDName:function(){return"client_id"},_getListCmd:function(){return desknets.set.PAGE_SETSSOCLIENTLIST},_getListExecCmd:function(){return desknets.set.CMD_SETSSOCLIENTLIST},_getListAddCmd:function(){return desknets.set.PAGE_SETSSOCLIENTINPUT},_getListModCmd:function(){return desknets.set.PAGE_SETSSOCLIENTINPUT},_getDelCmd:function(){return desknets.set.CMD_SETSSOCLIENTDELCONF},_getDelExecCmd:function(){return desknets.set.CMD_SETSSOCLIENTDEL},_getListEntryClass:function(){return desknets.set.setssoclientinput},_getListModClass:function(){return desknets.set.setssoclientinput},_replaceListLine:function(c,e,d){if(e=="Name"){if(!d[e]){return desknets.tmpl.replaceWord(c,e,desknets.Resource.set.undefinedName)}}return this.callBase("_replaceListLine",c,e,d)},_listPageLinkOption:function(){var d=this;var c={};c=d.callBase("_listPageLinkOption");c.pageMaxView=0;return c},_getListAjaxSuccessOtherSet:function(c){this.callBase("_getListAjaxSuccessOtherSet",c);if(!!c[desknets.RES_TAG_MSGDISPLIMIT]){this.$mjListPage.find(".jset-msg-disp-limit").parent().show();this.$mjListPage.find(".jset-msg-disp-limit").text(c[desknets.RES_TAG_MSGDISPLIMIT])}else{this.$mjListPage.find(".jset-msg-disp-limit").parent().hide()}}})})(jQuery);(function(b){desknets.page(desknets.set,"setssoclientinput",desknets.PageInputBase,{_getIDName:function(){return"client_id"},_getAddExecCmd:function(){return desknets.set.CMD_SETSSOCLIENTINPUT},_getModExecCmd:function(){return desknets.set.CMD_SETSSOCLIENTINPUT},_getDelExecCmd:function(){return desknets.set.CMD_SETSSOCLIENTDEL}})})(jQuery);app.addInitialAction(function(){desknets.set.init()})})(jQuery);