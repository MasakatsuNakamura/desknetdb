/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){desknets.creportutilroutecom={MODULE_API_CREPORT:"zrcreport",CMD_CREPORTROUTELIST:"creportcmdroutelist",CMD_CREPORTUSERROUTELIST:"creportcmduserroutelist",CMD_CREPORTROUTESELECT:"creportcmdrouteselect",};desknets.creportutilroute={$mdialog:null,moptions:{},mcreportmodule:desknets.creportutilroutecom.MODULE_API_CREPORT,mcreportcmd:desknets.creportutilroutecom.CMD_CREPORTROUTELIST,mcreportpcmd:desknets.creportutilroutecom.CMD_CREPORTUSERROUTELIST,mcreportget:desknets.creportutilroutecom.CMD_CREPORTROUTESELECT,mcreportprivate:desknets.Resource.setprivate,_moptions:{dialogid:"jcreport-route-select-dialog",title:desknets.Resource.routetitle,tmpl:"com/creport.route.html",onOk:null,onCancel:null},init:function(c){var b=this;b.moptions=a.extend({},b._moptions,c);b.destroy()},destroy:function(){var b=this;if(b.$mdialog){b.$mdialog.dialog("destroy");b.$mdialog=null}a("#"+b.moptions.dialogid).remove()},open:function(){var b=this;if(b.$mdialog==null){b.$mdialog=a("<div />").attr("id",b.moptions.dialogid).appendTo(document.body);desknets.tmpl.load(b.$mdialog,b.moptions.tmpl,a.proxy(function(){desknets.dialog.setUp(b.$mdialog,b._getDialogOptions());b.$mdialog.find(".jcreport-data").hide();b.$mdialog.find(".jcreport-nodata").hide();b._ajaxRouteListGet();b.$mdialog.dialog("open");desknets.dialog.setFirstDialogOpen(b.$mdialog)},this),{})}else{b.$mdialog.dialog("open").find('input[type="button"]').blur();b.$mdialog.find(":checkbox:checked").attr("checked",false)}return b.$mdialog},_getDialogOptions:function(){var b=this;var e={};e[desknets.Resource.OKButtonLabel]=a.proxy(b._onClickOk,this);e[desknets.Resource.CancelButtonLabel]=a.proxy(b._onClickCancel,this);var d=desknets.dialog.getDialogOption();var c={buttons:e,title:b.moptions.title,width:"500",close:function(){neo.ajax.abort(b.moptions.dialogid,true)}};a.extend(d,c);return d},_ajaxRouteListGet:function(){var b=this;var c={};c["0"]={cmd:b.mcreportcmd,row:"0",order:"1",num:"-1"};c["1"]={cmd:b.mcreportpcmd,row:"0",order:"1",num:"-1"};desknets.ajax.rest({id:b.moptions.dialogid,url:desknets.getUrl(b.mcreportmodule),data:desknets.ajax.arrayToMultiCmdData(c),success:a.proxy(function(e,d,f){b._updateRouteTable(e["0"].list,e["1"].list)})})},_updateRouteTable:function(d,e){var c=this;var f=[];var g;g=d.item==null?[]:d.item;g=a.isArray(g)?g:[g];a.each(g,function(h,i){f[f.length]='<tr><td class="co-chk"><input type="checkbox" name="route-id"';f[f.length]=' value="pub:'+i.id+'"></td>';f[f.length]='<td><span title="'+desknets.tmpl.escapeWord(i.Name)+'">'+desknets.tmpl.escapeWord(i.Name)+"</span></td></tr>"});g=e.item==null?[]:e.item;g=a.isArray(g)?g:[g];a.each(g,function(h,i){f[f.length]='<tr><td class="co-chk"><input type="checkbox" name="route-id"';f[f.length]=' value="usr:'+i.id+'"></td>';f[f.length]='<td><span title="'+desknets.tmpl.escapeWord(i.Name+c.mcreportprivate)+'">'+desknets.tmpl.escapeWord(i.Name+c.mcreportprivate)+"</span></td></tr>"});var b=c.$mdialog.find("tbody");b.empty();b.html(f.join(""));desknets.htmlparts.addStripeClass(b,"co-tr-even");c.$mdialog.find(".jcreport-nodata").toggle(f.length<=0);c.$mdialog.find(".jcreport-data").toggle(f.length>0)},_onClickCancel:function(c){var b=this;if(b.moptions.onCancel){b.moptions.onCancel(c)}b.$mdialog.dialog("close")},_onClickOk:function(c){var b=this;var d=b._getSelected();if(b.moptions.onOk){if(d!=null){b._ajaxRouteDetailGet(d,function(f,e,g){b.moptions.onOk(f)})}else{b.moptions.onOk(null)}}b.$mdialog.dialog("close")},_getSelected:function(){var b=this;var d=[];var c=b.$mdialog.find("input[name=route-id]:checked").closest("tr");if(c.length<=0){return null}a.each(c,function(f,j){var i=a(j);var k=a(j).find(":checked").val();var h=new RegExp("(pub|usr):([0-9]*)");k.match(h);var g=RegExp.$1;var l=RegExp.$2;var e=i.text();d.push({routeType:g,routeId:l,routeName:e})});return d.length?d:d},_ajaxRouteDetailGet:function(g,d){var b=this;var e=[],h=[];a.each(g,function(i,j){var k=j.routeType;var l=j.routeId;if(k=="pub"){e.push(l)}else{h.push(l)}});var c=desknets.getUrl(b.mcreportmodule);var f={};f.cmd=b.mcreportget;f.id=e;f.pid=h;desknets.ajax.rest({url:c,data:f,type:"POST",success:d})}};desknets.creportutilusersel={$mdialog:null,moptions:{},_moptions:{openclean:true,dialogid:"jcreport-user-select-dialog",title:desknets.Resource.setcreport,tmpl:"com/creport.usersel.html",onOk:null,onCancel:null,openFunc:null},_TMPL_SELECTEDCIRCLETODLG:'<tr><td class="co-chk"><input name="id" type="checkbox" value="{{id}}"></td><td class="co-width-300"><a class="jco-sel-item jco-ref-dialog-link" href="#" title="{{NameAsText}}" data-id="{{id}}" data-name="{{NameAsText}}" data-refid="user{{id}}" data-description="{{description}}">{{Name}}</a></td><td class="co-busyo" title="{{GroupAsText}}">{{Group}}</td></tr>',_routeSelectDialog:desknets.creportutilroute,init:function(c){var b=this;b.moptions=a.extend({},b._moptions,c);b.destroy()},destroy:function(){var b=this;if(b.$mdialog){b.$mdialog.dialog("destroy");b.$mdialog=null}a("#"+b.moptions.dialogid).remove()},open:function(){var b=this;if(b.$mdialog==null){b.$mdialog=a("<div />").attr("id",b.moptions.dialogid).appendTo(document.body);desknets.tmpl.load(b.$mdialog,b.moptions.tmpl,a.proxy(function(){desknets.dialog.setUp(b.$mdialog,b._getDialogOptions());b.$mdialog.find(".jcreport-data").hide();b.$mdialog.find(".jcreport-nodata").show();b._buildContents();b.$mdialog.dialog("open");desknets.dialog.setFirstDialogOpen(b.$mdialog)},this),{})}else{if(b.moptions.openclean){b.$mdialog.find(".co-tbody-list").empty();b.$mdialog.find(".jcreport-data").hide();b.$mdialog.find(".jcreport-nodata").show()}if(a.isFunction(b.moptions.openFunc)){b.moptions.openFunc(b.$mdialog)}b.$mdialog.dialog("open").find('input[type="button"]').blur();b.$mdialog.find(":checkbox:checked").attr("checked",false)}return b.$mdialog},_getDialogOptions:function(){var b=this;var e={};e[desknets.Resource.OKButtonLabel]=a.proxy(b._onClickOk,this);e[desknets.Resource.CancelButtonLabel]=a.proxy(b._onClickCancel,this);var d=desknets.dialog.getDialogOption();var c={buttons:e,title:b.moptions.title,width:"700",close:function(){neo.ajax.abort(b.moptions.dialogid,true)}};a.extend(d,c);return d},_onClickCancel:function(c){var b=this;if(b.moptions.onCancel){b.moptions.onCancel(c)}b.$mdialog.dialog("close")},_onClickOk:function(){var b=this;var d=[];var c=b.$mdialog.find(".co-tbody-list").find("tr");c.each(function(){var g=a(this);var f={};f.id=g.find('input[name="id"]').val();f.name=g.find("a").text();var e=g.find("td.co-busyo").html();e=desknets.escape(e);f.group=desknets.escapeValue(e);f.description=g.find("a").data("description");d[d.length]=f});if(b.moptions.onOk){b.moptions.onOk(b.$mdialog,d)}else{b.$mdialog.dialog("close")}},_buildContents:function(){var b=this;b._initListChk(b.$mdialog);b._routeSelectDialog.init({onOk:a.proxy(this._onClickOkOfRouteChooserDialog,this)});b.$mdialog.find(".jcreport-dialog-routelist").click(function(c){c.preventDefault();b._routeSelectDialog.open()});b.$mdialog.find(".jcreport-dialog-usersel").click(function(c){c.preventDefault();b._openCircleToUserSelDialog(b.$mdialog)});b.$mdialog.find(".jcreport-dialog-userdel").click(function(c){c.preventDefault();b._initSelectedUserDelButton(b.$mdialog)});if(a.isFunction(b.moptions.openFunc)){b.moptions.openFunc(b.$mdialog)}},_initListChk:function(c){var b=this;c.find(".co-tbody-list").delegate("input[type=checkbox]","click",function(d){c.find(".jco-checkbox-all").attr("checked",false);c.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();if(a(this).attr("checked")){a(this).parent().parent().addClass("co-tr-selected")}else{a(this).parent().parent().removeClass("co-tr-selected")}});c.find(".jco-checkbox-all").click(function(){var d=(a(this).attr("checked"))?true:false;c.find("input[type=checkbox]").attr("checked",d);if(d){c.find(".co-tbody-list").find("tr").addClass("co-tr-selected")}else{c.find(".co-tbody-list").find("tr").removeClass("co-tr-selected")}if(d){var e=c.find(".co-tbody-list").find("tr").length;var f=desknets.Resource.Message.com_listchk_cnt_some_disp;f=desknets.tmpl.replaceWordLF(f,"num"," "+e+" ");c.find(".co-chk-cnt").find(".jco-span-chk-msg-all").html(f);c.find(".co-chk-cnt").find(".co-chk-cnt-all").show()}else{c.find(".co-chk-cnt").find(".co-chk-cnt-all").hide()}});c.find(".co-chk-cnt").find(".co-chk-cnt-all").find("a").click(function(){c.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();c.find(".co-chk-cnt").find(".jco-checkbox-all").attr("checked",false);c.find(".co-tbody-list").find("input[type=checkbox]").attr("checked",false).end().find("tr").removeClass("co-tr-selected");c.find(".jco-checkbox-all").attr("checked",false);return false})},_onClickOkOfRouteChooserDialog:function(d){var c=[],e=[];var b=this;if(d==null){return}c=b._getCircleToDialogSelectedItems(b.$mdialog);e=d.list.item;e=e==null?[]:e;e=a.isArray(e)?e:[e];a.each(e,function(h,g){var f=c.length;for(var j=0;j<f;j++){if(c[j].id===g.id){return}}var l={};for(var k in desknets.chooser._displayFields){l[k]=g[k]}g.assign=neo.isSet(g.assigngrp)?desknets.chooser.convertAssignedGroups(g.assigngrp.Name):"";l.assign=g.assign;g.description=desknets.chooser.convertUserDescription(l);c.push({id:g.id,type:"user",name:g.Name,summary:neo.isSet(g.assigngrp)?desknets.chooser.convertAssignedGroups(g.assigngrp.Name):"",description:neo.isSet(g.description)?g.description:""})});b._onSelectCircleToUserItems(b.$mdialog,c)},_openCircleToUserSelDialog:function(d){var b=this;var e;var c=b._getUserSelDialogOptions(d);e=desknets.chooser.open("jcreport-entry-circleto-user",c)},_getUserSelDialogOptions:function(e){var c=this;var d={};var b=[];b=c._getCircleToDialogSelectedItems(e);d={chooseTarget:["user"],choose:function(f){c._onSelectCircleToUserItems(c.$mdialog,f)},items:b,allGroup:"readonly",unassignGroup:"readonly"};return d},_onSelectCircleToUserItems:function(h,e){var f;var d=this;var b="";h.find(".co-tbody-list").empty();e=desknets.chooser.Entry.sortLoginUserTop(e);for(f=0;f<e.length;f++){var i=desknets.escape(e[f].name);i=desknets.escapeValue(i);i=desknets.escapeSpace(i);b=d._createSelectedUserRow(e[f].id,i,e[f].summary,e[f].description);h.find(".co-tbody-list").append(b)}var g=h.find(".co-table-list").find("thead").find("tr");for(var c=0;c<g.length;c++){desknets.htmlparts.addLastClass(a(g[c]),"last-child")}d._updateElementUserList(h)},_createSelectedUserRow:function(g,b,d,f){var c=this;var e="";e=desknets.tmpl.replaceWordHtml(c._TMPL_SELECTEDCIRCLETODLG,"id",g);e=desknets.tmpl.replaceWordHtml(e,"Name",b);e=desknets.tmpl.replaceWordHtml(e,"NameAsText",desknets.escapeValue(b));e=desknets.tmpl.replaceWordHtml(e,"Group",d);e=desknets.tmpl.replaceWordHtml(e,"GroupAsText",desknets.escapeValue(desknets.stripTags(d)));f=desknets.escape(f);f=desknets.escapeValue(f);e=desknets.tmpl.replaceWordHtml(e,"description",f);return e},_getCircleToDialogSelectedItems:function(d){var c=this;var b=[];d.find(".co-tbody-list").children().each(function(){var e=a(this);b.push({id:e.find('input[name="id"]').val(),type:"user",name:e.find("a").text(),summary:e.find("td.co-busyo").html(),description:e.find("a").data("description")})});return b},_initSelectedUserDelButton:function(c){var b=this;if(!b._checkSelectTarget(c,desknets.Resource.Message.com_sel_nochecked)){return false}b._listSelectedUserDel(c)},_checkSelectTarget:function(d,e){var c=this;var b;b=d.find("input[type=checkbox]").filter(":checked");if(b.length<=0){desknets.dialog.alert(e,{type:"warn"});return false}return true},_listSelectedUserDel:function(c){var b=this;c.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(a(this).attr("checked")){a(this).parent().parent().remove()}});if(c.find(".co-chk-cnt").find(".co-chk-cnt-all").css("display")=="block"){c.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();c.find(".jco-checkbox-all").attr("checked",false)}b._updateElementUserList(c)},_updateElementUserList:function(b){if(b.find(".jco-checkbox-all").attr("checked")){b.find(".co-chk-cnt").find(".co-chk-cnt-all").hide();b.find(".jco-checkbox-all").attr("checked",false)}var c=b.find(".co-tbody-list").find("tr");if(c.length<=0){b.find(".jcreport-data").hide();b.find(".jcreport-nodata").show()}else{b.find(".jcreport-data").show();b.find(".jcreport-nodata").hide()}desknets.htmlparts.addStripeClass(b.find(".co-tbody-list"),"co-tr-even")},};(function(b){desknets.agenda={MODULE_MAIN_AGENDA:"zagenda",MODULE_API_AGENDA:"zragenda",MODULE_API_DOC:"zrdoc",CMD_AGENDA:"agenda",PAGE_AGENDAINDEX:"agendaindex",CMD_AGENDAINDEX:"agendacmdindex",PAGE_AGENDAENTRY:"agendaentry",CMD_AGENDAENTRY:"agendacmdentry",CMD_AGENDADEL:"agendacmddel",PAGE_AGENDAREFER:"agendarefer",CMD_AGENDAREFER:"agendacmdrefer",PAGE_AGENDACONFIRM:"agendaconfirm",CMD_AGENDACONFIRM:"agendacmdconfirm",PAGE_AGENDASEARCH:"agendasrch",CMD_AGENDASEARCHINDEX:"agendacmdsrchindex",CMD_AGENDASTOPSEARCH:"agendacmdsrchstop",CMD_AGENDADELETE:"agendacmddel",CMD_AGENDADELCONF:"agendacmddelconf",CMD_AGENDAREFERDELETE:"agendacmdreferdel",CMD_AGENDADELETESEARCH:"agendacmddelsrch",CMD_AGENDADELSEARCHCONF:"agendacmddelsrchconf",PAGE_AGENDASCHREFERDTL:"agendaschreferdtl",CMD_AGENDAEDITCONFIRM:"agendacmdeditconf",CMD_AGENDAEDITCANCEL:"agendacmdeditcancel",CMD_AGENDALABEL:"agendacmdlabel",CMD_AGENDAPSETLABELENTRY:"agendapsetcmdlabelentry",CMD_AGENDAPSETDELLABEL:"agendapsetcmdlabeldelete",CMD_AGENDALABELASSIGN:"agendacmdlabelassign",CMD_AGENDALABELASSIGNDEL:"agendacmdlabelassigndel",CMD_AGENDALABELASSIGNSRCH:"agendacmdlabelassignsrch",CMD_AGENDALABELASSIGNSRCHDEL:"agendacmdlabelassignsrchdel",CMD_DOCFOLDERLIST:"docfolderlist",CMD_DOCFOLDERLISTCHILD:"docfolderlistchild",CMD_AGENDATOPICDETAIL:"agendacmdtopicdetail",CMD_AGENDASAVETEMP:"agendacmdsavetmp",CMD_AGENDAADDATTACH:"agendacmdaddattach",CMD_AGENDADELATTACH:"agendacmddelattach",CMD_AGENDAREFATTACH:"agendadispattach",CMD_AGENDACOPYATTACH:"agendacmdcopyattach",CMD_SCHMONTHLIST:"schcmdlist",KEY_LABDEL:"labelid",FIELD_FOLDERID:"fid",init:function(){var d=this;var c=b("#jco-pv-funcid").val();if(d.isAgenda(c)){desknets.hashobserver.init(desknets.agenda);desknets.pageframe.setFuncSel(c)}if(c==desknets.agenda.PAGE_AGENDAINDEX){desknets.agenda.agendaindex.init()}if(d.isAgenda(c)){desknets.agenda.subwin.init()}},isAgenda:function(d){var c=this;if(d.indexOf(c.CMD_AGENDA)>=0&&d.indexOf("pset")==-1&&d.indexOf("mset")==-1){return true}return false}};desknets.agenda.input={}})(jQuery);(function(b){desknets.page(desknets.agenda,"subwin",desknets.PageSubwinSearch,{init:function(){var d=b(".jco-subwindow-search");var e=desknets.paramanalyzer.getHashParams();d.find('input[name="srch_key"]').val(e.srch_key);d.find('input[name="sdate"]').val(e.sdate);d.find('input[name="edate"]').val(e.edate);d.find('input[name="sw_entry"]').val(e.sw_entry);if(e.sw_topic=="1"){d.find('input[name="sw_topic"]').attr("checked","checked")}var c=this;c.callBase("init");desknets.htmlparts.setUpForm(c.$_inputArea)},_getSearchPrm:function(e){var c=this;var d=c.$_inputArea;e.fldsort="sdate";e.order="-1";e.row="0";e.srch_key=d.find('input[name="srch_key"]').val();e.sdate=d.find('input[name="sdate"]').val();e.edate=d.find('input[name="edate"]').val();e.sw_entry=d.find('input[name="sw_entry"]').val();if(d.find('input[name="sw_topic"]').attr("checked")=="checked"){e.sw_topic=d.find('input[name="sw_topic"]').val()}else{e.sw_topic=""}e.labelid="";e.cmp="0";return e},_execClear:function(){var c=this;c.callBase("_execClear");var d=b(".jco-subwindow-search");d.find('input[name="sw_topic"]').val("1");d.find('input[name="sw_topic"]').attr("checked",false)},_getMainCmd:function(){return desknets.agenda.PAGE_AGENDAINDEX},_getSearchCmd:function(){return desknets.agenda.PAGE_AGENDASEARCH},_chkInputSearchRequired:function(){var e=this;var f=e.$_inputArea;var g="";var d=true;if(f.find('input[name="srch_key"]').val()==""&&f.find('input[name="sdate"]').val()==""&&f.find('input[name="edate"]').val()==""&&f.find('input[name="sw_entry"]').val()==""){var c=desknets.Resource.searchcond;g=desknets.tmpl.replaceWordHtml(desknets.Resource.Message.com_search_required,"item",c);d=false}if(!d){desknets.dialog.alert(g,{type:"warn"});return false}return e.callBase("_chkInputSearchRequired")}})})(jQuery);desknets.page(desknets.agenda,"schreferdtl",null,{_templates:"",_schid:"",init:function(d){var c=this;d.undelegate(".cal-item","click");d.undelegate(".cal-item","dblclick");var b=function(e){c._showSchReferDtlDlg(a(this).data("id"))};d.dnclick(".cal-item",b,b)},_showSchReferDtlDlg:function(d){var b=this;var c=a("#jagenda-schrefer-dialog");b._schid=d;if(c.length<=0){c=a("<div />").attr("id","jagenda-schrefer-dialog").appendTo(document.body)}b._initSchReferDialog(c)},_initSchReferDialog:function(e){var b=this;var g;function f(h){b._getSchedule(e,h)}var c={};c["0"]={cmd:"schreferdtl",sid:b._schid};var d=desknets.ajax.arrayToMultiCmdData(c);g={dataType:desknets.ajax.RESTYPE_JSON,url:desknets.getUrl(b._getRestMainModule()),data:d,success:function(h){b._templates=h[0].html;f(h[0].html)}};desknets.ajax.rest(g)},_getSchedule:function(d,f){var b=this;var e;var c=a(".jagenda-schgetcmd").data("cmd");if(!neo.isSet(c)||c.length<=0){c="schref"}e={dataType:desknets.ajax.RESTYPE_JSON,type:"POST",url:desknets.getUrl(b._getRestMainModule()),data:{cmd:c,sid:b._schid},success:function(g){b._showSchedule(d,f,g)}};desknets.ajax.rest(e)},_showSchedule:function(e,f,d){var c=this;var b="";b="sch-view-status-"+desknets.cal.item.getColorById(d.schcolor);e.html(f);e.find(".jco-disp-tmplset").tmpl(d).appendTo("#jagenda-schrefer-dialog .jco-disp-disparea");e.dialog(c._getDialogOptions());e.find(".co-actionwrap").remove();e.find(".co-vbtnarea").find(".co-fright").find("span").filter(function(){if(a(this).attr("class").indexOf("sch-ictype1")!=-1){return false}return true}).remove();e.find(".co-vbtnarea").find(".co-fright").find("a").remove();e.find(".co-vbtnarea").addClass(b);e.find(".co-textarea-view").addClass("scroll");e.css("max-height","530px")},_getDialogOptions:function(){var b=this,e={};e[desknets.Resource.CloseButtonLabel]=function(){a(this).dialog("close")};var d=desknets.dialog.getDialogOption();var c=b._getDialogSelfOptions(e);a.extend(d,c);return d},_getDialogSelfOptions:function(b){return{buttons:b,dialogClass:"dn-dialog",resizable:false,draggable:true,title:desknets.Resource.agenda.schreferdtl,width:"700",position:"center"}},_getRestMainModule:function(){return desknets.MODULE_API_MAIN}});(function(b){desknets.page(desknets.agenda.input,"user",null,{$entry:null,id:"user",page:null,_$entryUser:null,_isLoaded:false,_chooser:null,_TMPL_SELECTEDOTHERTO:'<span class="co-selitem"><span class="co-selitem-text" title="{{Name}}">{{Name}}</span><a title="'+desknets.Resource.delLabel+'" href="#" class="co-btn co-btn-close">x</a><input class="jco-sel-item" type="hidden" name="otherto" value="{{id}}" data-id="{{id}}" data-name="{{Name}}" data-description="{{description}}" data-summary="{{summary}}" /></span>',init:function(c){this.page=c;this.$entry=c.$mjPage;this._$entryUser=this.$entry.find(".jagenda-row-other-to");this._setUpEntry()},open:function(){this._$entryUser.find(".jco-sel-btn").click()},_setUpEntry:function(){var d=this;var f=d._$entryUser.children("td");var e=b("#jagenda-entry-other-to-dialog");d.updateElement();var c=desknets.chooser.getItemsFromElement(f);d._chooser=desknets.chooser.setUpEntry(f,c,{dialogID:"jagenda-entry-other-to-dialog",dialogOptions:d._getChooserOptions(),extraVars:{user:{keyName:"otherto"}},change:function(){d.updateElement()}});this._isLoaded=true},_getTargets:function(){var c=[];this._$entryUser.find(".jco-sel-items").find(".co-selitem").each(function(){var d=b(this).find("input").data("name");c.push({id:b(this).find("input").val(),type:"user",name:d.toString(),description:b(this).find(".jagenda-otherto-groups").html()})});return c},updateElement:function(){var c=this._$entryUser.find(".jagenda-otherto-choose-items > .co-selitem");if(this._isLoaded||c.length>0){this._$entryUser.show()}if(c.length<=0){this._$entryUser.hide()}this.page.updateSetArea()},_getChooserOptions:function(){var c=this.$entry.find(".jagenda-input-target-id");return{choosePrivateGroup:true,allGroup:"choosable",chooseTarget:["user"],unassignGroup:"choosable"}},createOthertoBox:function(h,c,g,e){var d=this;var f="";f=desknets.tmpl.replaceWordHtml(d._TMPL_SELECTEDOTHERTO,"id",h);f=desknets.tmpl.replaceWord(f,"Name",c);f=desknets.tmpl.replaceWordHtml(f,"summary",g);e=desknets.escape(e);e=desknets.escapeValue(e);f=desknets.tmpl.replaceWordHtml(f,"description",e);return f},setSelItems:function(){var d=this;if(d._chooser){var e=d._$entryUser.children("td");var c=desknets.chooser.getItemsFromElement(e);d._chooser.replaceItems(c)}}})})(jQuery);(function(b){desknets.page(desknets.agenda.input,"mailto",null,{$entry:null,page:null,_$entryAddress:null,_isLoaded:false,_TMPL_INPUTMAILTO:"agenda/input.mailto.html",_TMPL_SELECTEDMAILTO:'<span class="co-selitem"><span class="co-selitem-text" title="{{mailto_addr}}">{{mailto_addr}}</span><a title="'+desknets.Resource.deselectLabel+'" href="#" class="co-btn co-btn-close jagenda-mailto-del">x</a><input type="text" style="display:none;" name="mailto" value="{{mailto_addr_val}}" /></span>',init:function(c){this.page=c;this.$entry=c.$mjPage;this._$entryAddress=this.$entry.find(".jagenda-row-mail-to");this._setUpEntry()},open:function(){this._$entryAddress.find(".jco-sel-btn").click()},_setUpEntry:function(){var c=this;var e=c._$entryAddress.children("td");c._setUpInitMailto();c._updateElement();c.$entry.delegate(".jagenda-mailto-del","click",function(f){f.preventDefault();b(this).parent().remove();c._updateElement()});var d=c._$entryAddress.find(".jco-sel-btn");d.click(function(f){c._openMailtoDialog()});this._isLoaded=true},_setUpInitMailto:function(){var d=this;var e="";var c="",g="";var f=[];var h=b(".jagenda-mailto-choose-items").find('input[name="mailto"]');b.each(h,function(){g=b(this).val();c=neo.mailaddress.parseMailbox(g);if(neo.isSet(c)&&b.inArray(c.addr,f)<0){e+=d.createMailbox(c.name,c.addr);if(neo.isSet(c.addr)&&c.addr!=""){f.push(c.addr)}}else{e+=d.createMailbox(g,"")}});b(".jagenda-mailto-choose-items").empty();b(".jagenda-mailto-choose-items").html(e)},_openMailtoDialog:function(){var d=this;var e=b("#jagenda-entry-mail-to-dialog");if(e.length>0){var c=d._getSelectedMailto();e.find('textarea[name="mailtotmp"]').val(c);return e.dialog("open").find('input[type="button"]').blur()}e=b("<div />").attr("id","jagenda-entry-mail-to-dialog").appendTo(document.body);e.addClass("co-editarea");d._initMailtoDialog(e);return e},_initMailtoDialog:function(d){var c=this;var e=function(){d.dialog(c._getDialogOptions());var f=c._getSelectedMailto();d.find('textarea[name="mailtotmp"]').val(f);d.find('input[type="button"]').blur()};desknets.tmpl.load(d,c._TMPL_INPUTMAILTO,e,true)},_getDialogOptions:function(){var c=this,f={};f[desknets.Resource.OKButtonLabel]=function(){c._onSetMailto(b(this))};f[desknets.Resource.CancelButtonLabel]=function(){b(this).dialog("close")};var e=desknets.dialog.getDialogOption();var d=c._getDialogSelfOptions(f);b.extend(e,d);return e},_getDialogSelfOptions:function(c){return{buttons:c,dialogClass:"dn-dialog",resizable:false,draggable:true,title:desknets.Resource.agenda.setmailto,width:"auto"}},_onSetMailto:function(){var d=this;var c="";var h={};var e="";var f=[];var g=b("#jagenda-entry-mail-to-dialog");c=g.find('textarea[name="mailtotmp"]').val();c=c.replace(/(\r\n)+|\n+/g,",");h=neo.mailaddress.parseMailGroup(c,false,true);b.each(h,function(k,j){if(b.inArray(j.addr,f)<0){j.name=j.name.replace(/\"/g,"");e+=d.createMailbox(j.name,j.addr);if(neo.isSet(j.addr)&&j.addr!=""){f.push(j.addr)}}});b(".jagenda-mailto-choose-items").empty();b(".jagenda-mailto-choose-items").html(e);g.dialog("close");d._updateElement()},createMailbox:function(d,f){var e=this;var c="";if(!neo.isSet(d,{blank:false})&&!neo.isSet(f,{blank:false})){return""}if(neo.isSet(f,{blank:false})&&f!=""){c=d+"<"+f+">"}else{c=d}return e.createMailboxAddr(c)},createMailboxAddr:function(c){var d=this;var e="";c=desknets.escape(c);c=desknets.escapeValue(c);e=desknets.tmpl.replaceWordHtml(d._TMPL_SELECTEDMAILTO,"mailto_addr",c);e=desknets.tmpl.replaceWordHtml(e,"mailto_addr_val",c);return e},createMail:function(e){var c=this;var d="";b.each(e,function(g,f){d+=c.createMailboxAddr(f)});b(".jagenda-mailto-choose-items").empty();b(".jagenda-mailto-choose-items").html(d);c._updateElement()},_getSelectedMailto:function(){var c=this;var d="";var e=c._$entryAddress.find(".jagenda-mailto-choose-items > .co-selitem");e.each(function(){var g=b(this);var f=g.find('input[type="text"]').val();if(f.length>0){if(d.length>0){d=d+","}d=d+f}});return d},_updateElement:function(){var c=this._$entryAddress.find(".jagenda-mailto-choose-items > .co-selitem");if(this._isLoaded||c.length>0){this._$entryAddress.show()}if(c.length<=0){this._$entryAddress.hide()}this.page.updateSetArea()}})})(jQuery);(function(b){desknets.page(desknets.agenda.input,"circleto",null,{$entry:null,id:"circleto",page:null,_$entryCircle:null,_isLoaded:false,_TMPL_SELECTEDCIRCLETO:'<span class="co-selitem"><span title="{{Name}}" data-description="{{description}}">{{Name}}</span><input type="hidden" name="circleto" value="{{id}}" data-id="{{id}}" data-summary="{{summary}}" /><a title="'+desknets.Resource.deselectLabel+'" href="#" class="co-btn co-btn-close jagenda-circleto-del">x</a></span>',init:function(d){this.page=d;this.$entry=d.$mjPage;this._$entryCircle=this.$entry.find(".jagenda-row-circle-to");this._setUpEntry();var c={openclean:false,onOk:b.proxy(this._onSetCircleto,this),openFunc:b.proxy(this._initCircleToDialogListReset,this)};desknets.creportutilusersel.init(c)},open:function(){desknets.creportutilusersel.open()},_setUpEntry:function(){var c=this;var e=c._$entryCircle.children("td");c._setUpInitCircleto();c.updateElement();c.$entry.find(".jagenda-row-circle-to").delegate(".jagenda-circleto-del","click",function(f){f.preventDefault();b(this).parent().remove();c.updateElement()});var d=c._$entryCircle.find(".jco-sel-btn");d.click(function(f){c.open()});this._isLoaded=true},_setUpInitCircleto:function(){var d=this;var e="";var i="";var g="";var h="";var f="";var c=desknets.chooser.getItemsFromElement(b(".jagenda-circleto-choose-items"),{itemFilter:function(l,j){var k=j.data("group");var m=desknets.stripTags(k);m=desknets.escapeValue(m);l.summary=k;l.summaryAsText=m;return l}});b.each(c,function(){i=this.id;g=this.name;h=this.summary;f=this.description;if(neo.isSet(h,{blank:false})){h=desknets.escape(h);h=desknets.escapeValue(h)}else{h=""}e=e+d.createCircletoBox(i,g.toString(),h,f)});b(".jagenda-circleto-choose-items").empty();b(".jagenda-circleto-choose-items").html(e)},_onSetCircleto:function(g,e){var d=this;var c="";var f="";b.each(e,function(l,j){var n=j.id;var h=j.name;var k=j.group;var m=j.description;f=f+d.createCircletoBox(n,h,k,m)});b(".jagenda-circleto-choose-items").empty();b(".jagenda-circleto-choose-items").html(f);g.dialog("close");d.$entry.find("#agenda-circleopen-chkbox").attr("checked",true);d.updateElement()},createCircletoBox:function(h,c,g,e){var d=this;var f="";f=desknets.tmpl.replaceWordHtml(d._TMPL_SELECTEDCIRCLETO,"id",h);f=desknets.tmpl.replaceWord(f,"Name",c);f=desknets.tmpl.replaceWordHtml(f,"summary",g);e=desknets.escape(e);e=desknets.escapeValue(e);f=desknets.tmpl.replaceWordHtml(f,"description",e);return f},_getSelectedCircleto:function(){var e=this;var d="";var c="";var f=e._$entryCircle.find(".jagenda-circleto-choose-items > .co-selitem");f.each(function(){var j=b(this);var h=j.find("span").html();var k=j.find('input[name="circleto"]').val();var i=j.find('input[name="circleto"]').data("summary");var g=j.find("span").data("description");if(h.length>0){d=d+desknets.creportutilusersel._createSelectedUserRow(k,h,i,g)}});return d},updateElement:function(){var c=this._$entryCircle.find(".jagenda-circleto-choose-items > .co-selitem");if(this._isLoaded||c.length>0){this._$entryCircle.show()}if(c.length<=0){this._$entryCircle.hide()}this.page.updateSetArea()},_initCircleToDialogListReset:function(e){var d=this;var c=d._getSelectedCircleto();e.find(".co-tbody-list").html(c);desknets.creportutilusersel._updateElementUserList(e)},})})(jQuery);(function(b){desknets.page(desknets.agenda.input,"document",null,{$entry:null,page:null,_$entryDocument:null,init:function(c){this.page=c;this.$entry=c.$mjPage;this._$entryDocument=this.$entry.find(".jagenda-row-document-folder");this._setUpEntry();this._updateElement()},_setUpEntry:function(){var c=this;var f=c._$entryDocument.children("td");var e={keyName:"dfid",change:function(){c._updateElement()}};var d={};d.module=desknets.agenda.MODULE_API_DOC;d.cmddef=desknets.agenda.CMD_DOCFOLDERLIST;d.cmdchild=desknets.agenda.CMD_DOCFOLDERLISTCHILD;desknets.chooserSingleSelFolder.init(c._$entryDocument,d,e,{radioAccs:2,title:desknets.Resource.agenda.selectDocFolder})},open:function(){this._$entryDocument.find(".jco-sel-btn").click()},_updateElement:function(){var c=this._$entryDocument.find(".jagenda-docfolder-choose-items > .co-selitem");if(c.length>0){this._$entryDocument.show()}if(c.length<=0){this._$entryDocument.hide()}this._isLoaded=true;this.page.updateSetArea()}})})(jQuery);(function(b){desknets.page(desknets.agenda.input,"attach",null,{$entry:null,id:"attach",page:null,_$entryAttachList:null,init:function(d){var c=this;c.page=d;c.$entry=d.$mjPage;c._setUpEntry()},_getAttachListElement:function(){return this.$entry.find(".jagenda-attach-list")},open:function(){var c=this;c._$entryAttachList=this._getAttachListElement();c._$entryAttachList.dnAttachList("openChooser")},_setUpEntry:function(){var c=this;c._$entryAttachList=this._getAttachListElement();c._$entryAttachList.dnAttachList({hideElementOnEmpty:this.$entry.find(".jagenda-row-attaches"),uploadURL:desknets.getUrl(desknets.agenda.MODULE_API_AGENDA),uploadParams:this._getParams(desknets.agenda.CMD_AGENDAADDATTACH),delURL:desknets.getUrl(desknets.agenda.MODULE_API_AGENDA),delParams:this._getParams(desknets.agenda.CMD_AGENDADELATTACH),downloadURL:this._getDownLoadURL(),toggleTargetFunc:function(){var d=c._$entryAttachList.find(".co-selfile").find("tr");if(d.length>0){c._$entryAttachList.closest("tr").show()}else{if(d.length<=0){c._$entryAttachList.closest("tr").hide()}}c.page.updateSetArea();if(c.page.boautosave){desknets.autosave.attachsave()}}});c.updateElement()},_getDownLoadURL:function(){var c=this._getParams("agendadispattach");return desknets.getUrl(desknets.agenda.MODULE_MAIN_AGENDA)+"?"+b.param(c)+"&fno={{id}}"},_getParams:function(c){var e={};var d=this.$entry.find('input[name="tmpnm"]').val();e={cmd:c,tmpnm:d};return e},updateElement:function(){var c=this;var d=c._$entryAttachList.find(".co-selfile").find("tr");if(d.length>0){c._$entryAttachList.closest("tr").show()}else{if(d.length<=0){c._$entryAttachList.closest("tr").hide()}}this.page.updateSetArea()},update:function(d){var c=this;c._$entryAttachList=c._getAttachListElement();c._$entryAttachList.dnAttachList("updateFile",d)}})})(jQuery);desknets.page(desknets.agenda.input,"schedule",null,{$entry:null,id:"schedule",page:null,_$entrySchedule:null,_isLoaded:false,_schSid:"",_schSelDate:"",_TMPL_SELECTEDSCHEDULE:'<span class="co-selitem"><span class="jagenda-schdata">{{sch}}</span><input type="hidden" name="sid" value="{{sid}}" /><input type="hidden" name="schseldate" value="{{seldate}}" /></span>',_TMPL_DIALOG:"agenda/input.selschedule.html",init:function(b){this.page=b;this.$entry=b.$mjPage;this._$entrySchedule=this.$entry.find(".jagenda-row-schedule");this._setUpEntry()},open:function(){this._$entrySchedule.find(".jco-sel-btn").click()},_setUpEntry:function(){var b=this;b.destroy();b._updateElement();b.$entry.find(".jagenda-row-schedule").delegate(".jagenda-sel-schedule-del","click",function(d){d.preventDefault();a(this).parent().remove();b._updateElement()});var c=b._$entrySchedule.find(".jco-sel-btn");c.click(function(d){b._openSelScheduleDialog()});this._isLoaded=true},destroy:function(){var b=this;var c=a("#jagenda-entry-schedule-sel-dialog");if(c){c.dialog("destroy")}a("#jagenda-entry-schedule-sel-dialog").remove()},_openSelScheduleDialog:function(){var b=this;var c=a("#jagenda-entry-schedule-sel-dialog");if(c.length>0&&b._isLoaded){b.initSelScheduleDialogListReset();return c.dialog("open").find('input[type="button"]').blur()}if(!b._isLoaded){b._setUpEntry()}c=a("<div />").attr("id","jagenda-entry-schedule-sel-dialog").appendTo(document.body);b._initSelScheduleDialog(c);return c},_initSelScheduleDialog:function(c){var b=this;desknets.tmpl.load(c,b._TMPL_DIALOG,a.proxy(function(){c=desknets.dialog.setUp(c,b._getDialogOptions());b._buildScheduleList(c);c.dialog("open");desknets.dialog.setFirstDialogOpen(c);var d=c.find(".co-tbody-list");d.on("dblclick","tr",function(g){g.preventDefault();if(a(g.target).hasClass("jco-modlink")){return}var f=a(g.target).closest("tr");var e=f.find("input:radio");if(e.length>0&&e.attr("disabled")!="disabled"){e.prop("checked",true).click();b._onSetSelSchedule(c)}})},this),{})},_getDialogOptions:function(){var b=this,e={};e[desknets.Resource.OKButtonLabel]=function(){b._onSetSelSchedule(a(this))};e[desknets.Resource.CancelButtonLabel]=function(){a(this).dialog("close")};var d=desknets.dialog.getDialogOption();var c=b._getDialogSelfOptions(e);a.extend(d,c);return d},_getDialogSelfOptions:function(b){return{buttons:b,dialogClass:"dn-dialog",resizable:false,draggable:true,title:desknets.Resource.agenda.setselschedule,width:"700",height:"460"}},_updateElement:function(){var b=this._$entrySchedule.find(".jagenda-schedule-choose-items > .co-selitem");if(this._isLoaded||b.length>0){this._$entrySchedule.show()}if(b.length<=0){this._$entrySchedule.hide()}this.page.updateSetArea()},_buildScheduleList:function(c){var b=this;desknets.agenda.schindex.initPage(null,null)},initSelScheduleDialogListReset:function(){var e=this;var d="",c="";var b="",h="";var g="";var f=a("#jagenda-entry-schedule-sel-dialog");g=e.getSelectedScheduleData();if(g!=""){g=g.split("_");d=g[0];b=g[1]}var i=f.find(".co-tbody-list").find('input[name="sid"]');i.attr("checked",false);i.each(function(){var j=a(this);g=j.val().split("_");c=g[0];h=g[2];if(c===d&&h===b){j.attr("checked",true)}else{j.attr("checked",false)}})},getSelectedScheduleData:function(){var e=this;var c="";var b="";var d=e._$entrySchedule.find(".jagenda-schedule-choose-items > .co-selitem");if(d.length>0){c=d.find('input[name="sid"]').val();b=d.find('input[name="schseldate"]').val();return c+"_"+b}else{return""}},_onSetSelSchedule:function(g){var d=this;var f="";var b="";var e="";var c="";f=d._getSelectedSchedule(g);if(neo.isSet(f)){c=f.split("_");b=c[0];e=c[2]}if(!b){desknets.dialog.alert(desknets.Resource.Message.agenda_schedule_notselected,{type:"warn"});return}d._ajaxScheduleDetailGet(b,e,function(i,h,j){d._setSelScheduleOnOk(i)});g.dialog("close")},_getSelectedSchedule:function(d){var b=d.find('input[type="radio"]:checked').closest("tr");if(b.length<=0){return null}var c=b.find('input[name="sid"]').val();return c},_ajaxScheduleDetailGet:function(b,e,f){var c=this;c._schSid=b;c._schSelDate=e;var d=desknets.getUrl(desknets.MODULE_API_MAIN);var g={cmd:desknets.cal.CMD_SCH_REF,sid:b,othertodescription:"1"};desknets.ajax.rest({url:d,data:g,type:"POST",success:f})},_setSelScheduleOnOk:function(v){var m=this;var l="";var g="";var h=[];var t=desknets.Resource.deselectLabel;if(neo.isSet(v.agnasts)&&v.agnasts=="1"){var o=desknets.paramanalyzer.getHashParam("id");var d="";if(neo.isSet(v.agnids)&&o!=v.agnids){d=desknets.Resource.Message.agenda_schedule_conflicted;desknets.dialog.alert(d,{type:"warn"});m._isLoaded=false;return}}if(neo.isSet(v.public_level)&&v.public_level!=desknets.cal.PUBLIC_LEVEL_OPEN){v.level="1"}v.agnasts=0;m.$entry.find('input[name="sid"]').val(m._schSid);m.$entry.find('input[name="schseldate"]').val(m._schSelDate);if(neo.isSet(v.interval,{blank:false})&&neo.isSet(v.repeat,{blank:false})){v.startdate=m._schSelDate;if(v.interval=="0"){v.enddate=m._schSelDate}}v.sid=m._schSid;var k=desknets.cal.tmplList.getReferHtml(v);k=desknets.tmpl.replaceWordHtml(m._TMPL_SELECTEDSCHEDULE,"sch",k);k=desknets.tmpl.replaceWord(k,"sid",m._schSid);k=desknets.tmpl.replaceWord(k,"seldate",m._schSelDate);a(".jagenda-schedule-choose-items").html(k);a(".jagenda-schedule-choose-items").find("a").attr("href",m._schSid);a('<a class="co-btn co-btn-close jagenda-sel-schedule-del" href="#" title="'+t+'">x</a>').insertAfter(".jagenda-schdata");m._updateElement();m._schSid="";m._schSelDate="";if(neo.isSet(v.otherto)){h=desknets.ajax.getItems(v.otherto.item);var s=desknets.ajax.getItems(v.description.item);for(var p=0;p<h.length;p++){var n="";var q="";var u="";var j=h[p];var r="";n=desknets.escape(j.id);q=j.val;for(var i=0;i<s.length;i++){var c=s[i];if(j.id===c.id){if(neo.isSet(c.assign)){u=desknets.escape(c.assign);u=desknets.escapeValue(u)}var f={};for(var b in desknets.chooser._displayFields){f[b]=c[b]}f.assign=neo.isSet(c.assign)?c.assign:"";r=desknets.chooser.convertUserDescription(f);break}}l=l+desknets.agenda.input.user.createOthertoBox(n,q,u,r);g=g+desknets.agenda.input.circleto.createCircletoBox(n,q,u,r)}}a(".jagenda-otherto-choose-items").empty();a(".jagenda-otherto-choose-items").html(l);a(".jagenda-circleto-choose-items").empty();a(".jagenda-circleto-choose-items").html(g);var e=desknets.cal.tmplList.getSubject(v);if(a('input[name="subject"]').val().length<=0&&e!="--"){a('input[name="subject"]').val(e)}desknets.agenda.input.user.setSelItems();desknets.agenda.input.user.updateElement();desknets.agenda.input.circleto.updateElement()},SetTargetSchedule:function(c,d,e){var b=this;if(!neo.isSet(c,{blank:false})){return}b._ajaxScheduleDetailGet(c,d,function(f){b._setSelScheduleOnOk(f);if(!neo.isSet(d,{blank:false})){b._$entrySchedule.find('input[name="schseldate"]').val(desknets.getDataAttr(b._$entrySchedule.find(".cal-item"),"date"))}if(a.isFunction(e)){e()}})},});desknets.page(desknets.agenda,"schindex",desknets.PageListBase,{_initGetHtml:function(){var b=this;b.$mjListPage.find(".co-pop-body").hide();b._initListStart();var c=a("#jco-m-list-container").find(".jco-back-page-data").find('input[name="num"]').val();b.$mjListPage.find(".jco-back-page-data").find('input[name="num"]').val(c);b._mobjParams=b.getListParamToObj();b._getListAjax(b._getListRow());b._initListEnd()},_getListAjaxSuccessData:function(d){this._setSchListTitle(d);var f=desknets.cal.tmplList.getJsonItems(d);var e;var c;var b=f.length;for(e=0;e<b;e++){c=f[e];c.visit="0"}return f},_setSchListTitle:function(b){a(".sch-date").text(b.title)},_listLine:function(c,d){var e=desknets.cal.tmplList.getRowHtml(c,d);var f=desknets.paramanalyzer.getHashParam("id");if(neo.isSet(d.agnids,{blank:false})&&d.agnids!=f){var b=a("<div />").append(e);b.find('input[type="radio"]').attr("disabled","disabled");e=b.html()}return e},_getListAjaxSuccessOtherSet:function(c){var b=this;b.$mjListPage.find(".co-pop-body").show();b.callBase("_getListAjaxSuccessOtherSet",c);desknets.agenda.input.schedule.initSelScheduleDialogListReset()},_initListEndButton:function(){var b=this;b.callBase("_initListEndButton");this.$mjListPage.find(".jagenda-sch-change-month").click(function(d){d.preventDefault();var e=a(this).attr("href").replace(/#/,"");var c=b._getSchListTargetDate();e=desknets.dateTime.moveMonth(c,e);b._changeAgendaSchListDate(e)});this.$mjListPage.find(".jagenda-sch-change-today").click(function(c){c.preventDefault();var d=neo.dateTime.format("yyyyMMdd",desknets.pageframe.getServerDate());b._changeAgendaSchListDate(d)})},_getSchListTargetDate:function(){var b=this.$mjListPage.find(".jco-back-page-data").find('input[name="date"]').val();if(!neo.isSet(b)||b.length<=0){b=neo.dateTime.format("yyyyMMdd",desknets.pageframe.getServerDate())}return b},_changeAgendaSchListDate:function(c){var b=this;b.$mjListPage.find(".jco-back-page-data").find('input[name="date"]').val(c);b._getListAjax(0)},_listPage:function(c){var b=this;b._getListAjax(c)},_listSortLink:function(){var c=this;var g="";var e={};var b={};var d={};e=a.extend({},c._mobjParams);paramslist=c.getListParamToObj();a.extend(e,paramslist);var f=c.$mjListPage.find(".co-list-sort-item").find(".co-list-sort-data");f.removeClass("asc");f.removeClass("desc");f.each(function(){var h=a(this);if(h.data("sort")==e.fldsort){if(e.order=="1"){h.addClass("asc")}else{h.addClass("desc")}return false}});f=c.$mjListPage.find(".co-table-list").find(".co-list-sort-data");f.removeClass("asc");f.removeClass("desc");f.each(function(){var h=a(this);if(h.data("sort")==e.fldsort){if(e.order=="1"){h.addClass("asc")}else{h.addClass("desc")}return false}})},_hashUpdatePageParams:function(){return},changPage:function(){},_setTitle:function(c,b){},inputModPage:function(c){var b=this;b.inputDispPage(c)},inputDispPage:function(d){var c=d.split("_");var b=c[0];desknets.agenda.schreferdtl._showSchReferDtlDlg(b)},_getListExecCmd:function(){return desknets.agenda.CMD_SCHMONTHLIST},_getIdListPage:function(){return"jagenda-entry-schedule-sel-dialog"},_getIdListPageForm:function(){return"listschselfrm"},_initBeforeUnload:function(){}});desknets.page(desknets.agenda,"agendaindex",desknets.PageLabelList,{init:function(){var b=this;b.mboHasMceEditor=true;b.callBase("init")},_initListEnd:function(){var b=this;b.callBase("_initListEnd");var c=b.$mjListPage.find('select[name="cmp"]');c.change(function(d){a(d.target).blur();b.$mjListPage.find(".jco-back-page-data").find('input[name="cmp"]').val(a(this).val());b._listPage("0")})},_boDelSingle:function(){var b=this;var c=desknets.paramanalyzer.getHashParams();if(neo.isSet(c.srch_key)||neo.isSet(c.sw_entry)||neo.isSet(c.sdate)||neo.isSet(c.edate)){return true}return false},_getListAjaxSuccessEnd:function(){var b=this;b.callBase("_getListAjaxSuccessEnd");var c=b.$mjListPage.find(".jco-back-page-data").find("input[name=cmp]").val();b.$mjListPage.find('select[name="cmp"]').val(c)},_hashUpdatePageView:function(c){var b=this;var d=desknets.paramanalyzer.getHashParams();if(c==desknets.agenda.PAGE_AGENDASEARCH){desknets.agenda.agendasearch.initPage(desknets.agenda.PAGE_AGENDAINDEX,"jco-m-list-container");b.mhashBackErrCmd=b.mhashBackCmd;b.mhashIdErrBack=b.mhashIdBack;b.mhashBackCmd=desknets.agenda.PAGE_AGENDASEARCH;b.mhashIdBack="jco-m-search-container"}},_hashUpdatePageParams:function(){var c=this;c.callBase("_hashUpdatePageParams");var b=desknets.paramanalyzer.getHashParams();if(!neo.isSet(b.cmp)){c.$mjListPage.find(".jco-back-page-data").find('input[name="cmp"]').val("0")}},_replaceListLine:function(d,i,f){var c=this;var b=false;if(i==desknets.agenda.KEY_LABDEL){if(f[i]!=null){var g=desknets.escapeSpace(desknets.escapeValue(desknets.escape(f[i])));if(g!==""&&parseInt(g,10)>0){b=true}else{g="";b=false}if(b){var e=desknets.label.getLabelHtml(f.labelid,f.labelname,true);d=desknets.tmpl.replaceWordHtml(d,"label",e)}else{d=desknets.tmpl.replaceWordHtml(d,"label","")}}return d}else{if(i=="sdate"){var h=desknets.dateTime.dispDateTime(f[i],{type:"list"});d=desknets.tmpl.replaceWord(d,i,h);return d}}return c.callBase("_replaceListLine",d,i,f)},_getDelAddPrm:function(){var b=this;var d={};var c="";var e="";c=b.$mjListPage.find(".jco-back-page-data").find('input[name="cmp"]').val();e=b.$mjListPage.find(".jco-back-page-data").find('input[name="labelid"]').val();d.cmp=c;d.labelid=e;return d},inputModPage:function(f){var b=this;var d={};var e=null;var g=desknets.paramanalyzer.getHashParams();var c=function(h){b._confirmEdit(h,f)};d.cmd=b._getModCofirmCmd();d[b._getIDName()]=f;desknets.ajax.rest({url:desknets.getUrl(b._getRestModule()),data:d,success:function(i,h,j){c(i)}})},_confirmEdit:function(e,d){var b=this;var f=e.message;if(neo.isSet(f)){var c=desknets.dialog.confirm(f,function(){desknets.submitform.setDialogDisabled(c);b.inputModPageDisp(d);return false});return}b.inputModPageDisp(d)},inputModPageDisp:function(e){var b=this;var d="";var c={};d=b._getListModCmd();c=b._getModPageParam();c.cmd=d;c[b._getIDName()]=e;b._inputPage(c)},_getRestModule:function(){return desknets.agenda.MODULE_API_AGENDA},_getListCmd:function(){return desknets.agenda.PAGE_AGENDAINDEX},_getListExecCmd:function(){return desknets.agenda.CMD_AGENDAINDEX},_getListDispCmd:function(){return desknets.agenda.PAGE_AGENDAREFER},_getListAddCmd:function(){return desknets.agenda.PAGE_AGENDAENTRY},_getListModCmd:function(){return desknets.agenda.PAGE_AGENDAENTRY},_getDelCmd:function(){return desknets.agenda.CMD_AGENDADELCONF},_getDelExecCmd:function(){return desknets.agenda.CMD_AGENDADELETE},_getListDispClass:function(){return desknets.agenda.agendarefer},_getListEntryClass:function(){return desknets.agenda.agendaentry},_getListModClass:function(){return desknets.agenda.agendaentry},_getModCofirmCmd:function(){return desknets.agenda.CMD_AGENDAEDITCONFIRM},_getLabelGetCmd:function(){return desknets.agenda.CMD_AGENDALABEL},_getLabelEntryCmd:function(){return desknets.agenda.CMD_AGENDAPSETLABELENTRY},_getLabelDelCmd:function(){return desknets.agenda.CMD_AGENDAPSETDELLABEL},_getDataLabelEntryCmd:function(){return desknets.agenda.CMD_AGENDALABELASSIGN},_getDataLabelDelCmd:function(){return desknets.agenda.CMD_AGENDALABELASSIGNDEL}});(function(b){desknets.page(desknets.agenda,"agendaentry",desknets.PageLabelInput,{_topicTmp:null,$elemTopicRoot:null,_tmpnm:null,_onConfirm:false,_htmlVals:[],_topicLastNo:0,_editorid:0,_dialogNames:["user","mailto","circleto","document","attach","schedule"],TOPIC_ID:"topicid",TOPIC_TITLE_FIELD:"topictitle",TOPIC_BODY_FIELD:"topicbody",_onDelete:false,mboagaedaautosave:false,_boCancel:false,_initSet:function(){var c=this;c.$elemTopicRoot=b("#agenda-edit-topics");c.callBase("_initSet");c._setUpDialog();c.updateSetArea();c._setUpTopic();c._setUpMemo();c._setScheduleInfo();c._setCancelEvent();c._inputFormSaveToObserver()},_setCancelEvent:function(){var c=this;var d=desknets.paramanalyzer.getHashParams();c.$mjPage.find(".jagenda-input-list-page").click(function(e){e.preventDefault();if(neo.isSet(d.id,{blank:false})){c._inputModCancelSubmitBefore()}else{c.dispBackListPage()}})},_inputModCancelSubmitBefore:function(){var c=this;c._boCancel=false;if(c._formObserveisChanged()){c._boCancel=true;c.dispBackListPage()}else{c._inputModCancelSubmit()}},resetFuncBeforeHashChange:function(){var c=this;if(c._boCancel){c._inputModCancelSubmit()}c.callBase("resetFuncBeforeHashChange")},_inputModCancelSubmit:function(){var c=this;var d=desknets.paramanalyzer.getHashParams();var e={cmd:c._getCancelExecCmd()};e.id=c.$mjPage.find('input[name="id"]').val();desknets.ajax.rest({url:desknets.getUrl(c._getRestModule()),data:e,success:function(f){},error:function(h,f,g){}});c._boCancel=false;c.dispBackListPage()},_initHtml:function(e){var d=this;desknets.rte.loadRte();var c=b("<div />");c.html(e[0].html);c.find(".co-mceview").each(function(){var f=b(this),g=f.find("script").html();if(!!g){f.html(desknets.convertToSafeHtml(desknets.rte.convertForShow(g)))}});e[0].html=c.html();d.callBase("_initHtml",e);if(e[1]){desknets.attach.ext.saveList(e[1])}},updateSetArea:function(){var c=this;var f=null;var e=false;var d;f=b(".jagenda-setarea1").find(".co-etable").find("tr");for(e=false,d=0;d<f.length;d++){if(b(f[d]).css("display")!="none"){e=true;break}}if(e){b(".jagenda-setarea1").show()}else{b(".jagenda-setarea1").hide()}f=b(".jagenda-setarea2").find(".co-etable").find("tr");for(e=false,d=0;d<f.length;d++){if(b(f[d]).css("display")!="none"){e=true;break}}if(e){b(".jagenda-setarea2").show()}else{b(".jagenda-setarea2").hide()}},_setUpDialog:function(){var c=this;b.each(c._dialogNames,function(d,e){desknets.agenda.input[e].init(c)});c.$mjPage.find(".co-ebtnarea").delegate(".jagenda-button","click",function(d){d.preventDefault();var e=b(this).data("dialog");if(!!e){desknets.agenda.input[e].open();if(c.boautosave&&e=="attach"){desknets.autosave.save();desknets.autosave.restart()}}});if(c.boautosave){c.$mjPage.find(".jagenda-attach-list").on("click",".jco-selfile-button",function(d){desknets.autosave.save();desknets.autosave.restart()})}},_setUpTopic:function(){var c=this;var d=b("#jagenda-topic-edit-template");c._topicTmp=d.remove().html();c._setUpTopicAddButton();c._setUpTopicModButton();c._setUpTopicDelButton();c._setUpTopicTitleClick();c._setUpTopicDragDrop();b(".jagenda-topicbody").each(function(){c._topicLastNo++;b(this).data("id",c._topicLastNo)});desknets.rte.readyForShow(this.$mjPage.find("li.agenda-edit-topic"))},_setUpTopicAddButton:function(){var c=this;if(!neo.isSet(c._topicTmp)){return false}b("#jagenda-edit-addtopic").click(function(){var d=c._addTopic(0);c._onChangeDisplayTopic(d);b(this).blur()})},_addTopic:function(j){var e=this;e._topicLastNo++;b("#agenda-edit-topics").append(e._topicTmp);var f=b("#agenda-edit-topics").find("li.agenda-edit-topic");var g=f.filter(":last");var h=f.length;var c=e.TOPIC_ID+"_"+j+":"+h;var d=e.TOPIC_TITLE_FIELD+"_"+j+":"+h;var i=e.TOPIC_BODY_FIELD+"_"+j+":"+h;g.find("input.jagenda-topic-id").attr("name",c);g.find("input.jagenda-topic-id").val(j);g.find("input.title").attr("name",d);g.find("textarea.body").attr("name",i);e._editorid++;g.find("textarea.body").attr("id",e.TOPIC_BODY_FIELD+String(e._editorid));g.find(".jagenda-topicbody").data("id",e._topicLastNo);return g},_setUpTopicModButton:function(){var c=this;c.$elemTopicRoot.delegate("input.update","click",function(f){var e=b(f.target).closest("li");desknets.rte.setEditorSourceOff(e);var d=function(){c._onTemporarySaveTopic(e)};desknets.rte.execFuncEditorSourceEnd(e,d)})},_onTemporarySaveTopic:function(d){var c=this;var g="";var e=d.find(".agenda-edit-topic-view");var f=d.find(".agenda-edit-topic-input");var g=f.find("input.title").val();if(g.length>0){g=desknets.escape(g);g=desknets.escapeValue(g);g=desknets.escapeSpace(g)}else{g="&nbsp;"}e.find("div.title").html(g);e.find("div.vbody").html(CKEDITOR.instances[f.find("textarea").attr("id")].getData());c._onChangeDisplayTopic(d)},_setUpTopicDelButton:function(){var c=this;c.$elemTopicRoot.delegate("a.del","click",function(e){e.preventDefault();var d=b(this).closest("li");var f=d.find(".jagenda-topic-id");if(f.val()!="0"){c.$mjPage.find("form").append(f.attr("name","deltopic"+f.val()).clone())}d.remove();c.sortTopic()})},_setUpTopicTitleClick:function(){var c=this;c.$elemTopicRoot.delegate("div.title","click",function(e){var d=b(this).closest("li");d.find("textarea.body").removeAttr("disabled");c._onChangeDisplayTopic(d);c.$mjPage.find('input[name="modtopic"]').val("1")})},_onChangeDisplayTopic:function(d){var c=this;if(d.find("span.mceEditor").length<1){c._onDisplayTopicFirst(d)}else{c._displayTopicEditor(d);c._displayTopicViewer(d)}desknets.rte.readyForShow(d)},_onDisplayTopicFirst:function(d){var c=this;var h=0;var g=d.find(".agenda-edit-topic-input");h=d.find("input.jagenda-topic-id").val();if(d.data("get")!="1"&&h!=""&&h!="0"&&!isNaN(h)){var e=desknets.getUrl(desknets.agenda.MODULE_API_AGENDA);var f={cmd:desknets.agenda.CMD_AGENDATOPICDETAIL,id:desknets.paramanalyzer.getHashParam("id"),topicid:h};desknets.ajax.rest({url:e,data:f,type:"POST",success:function(j,i,k){c._onSuccessGetTopic(g,j)}})}else{c._displayTopicViewer(d);c._displayTopicEditor(g.closest("li"))}},_onSuccessGetTopic:function(e,d){var c=this;c._displayTopicViewer(e.closest("li"));c._displayTopicEditor(e.closest("li"),d.memo);e.closest("li").data("get","1")},_displayTopicEditor:function(k,j){var q=this;var o=null;var d="";var n=null;var f="";o=k.find(".agenda-edit-topic-input");f=o.find(".jagenda-topicbody").data("id");if(o.css("display")=="none"){d=o.find("textarea").attr("name");o.find("textarea").remove();n=document.createElement("textarea");b(n).attr("name",d).addClass("body");if(neo.isSet(j)){b(n).val(j)}else{var i=q._htmlVals[f];if(neo.isSet(i)){b(n).val(i)}}var l=k.find(".jagenda-topic-id").attr("name");var c=l.substr(l.indexOf("_"));var h=q.TOPIC_BODY_FIELD+c;b(n).attr("name",h);o.find(".jagenda-topicbody").append(n);q._editorid++;var p=q.TOPIC_BODY_FIELD+String(q._editorid);b(n).attr("id",p);desknets.rte.init(o.find("textarea"),{width:"100%",idval:p,setBeforeSubmit:false})}o.toggle();if(o.css("display")=="block"){var m=o.find(".jagenda-topic-title").position();b("html, body").scrollTop(m.top);o.css("top",m.top);k.addClass("unsortable")}else{var d=o.find("textarea").attr("name");var e=o.find("textarea").attr("id");var g=CKEDITOR.instances[e].getData();q._htmlVals[f]=g;o.find(".jagenda-topicbody").find("textarea").remove();CKEDITOR.instances[e].destroy();b(".searchbox").focus().blur();n=document.createElement("textarea");o.find(".jagenda-topicbody").append(n);o.find(".jagenda-topicbody").find("textarea").addClass("body").attr("name",d).val(g)}},_displayTopicViewer:function(c){var d=c.find(".agenda-edit-topic-view");d.toggle();if(d.css("display")!="none"){c.removeClass("unsortable")}},_setUpTopicDragDrop:function(){var c=this;var d=c._getSortableOptions();c.$elemTopicRoot.sortable(d);c.$elemTopicRoot.find(".agenda-edit-topic-view").disableSelection();c.$elemTopicRoot.sortable("enable")},_getSortableOptions:function(){var c=this;var d={cancel:".unsortable",distance:10,opacity:0.8,cursor:"move",tolerance:"pointer",placeholder:"agenda-dragmove-placeholder",handle:"span.co-draghandle",items:"li",axis:"y",helper:"clone",stop:function(e,f){c.onDragStop(e,f)},cursorAt:"top",sort:function(f,e){if(!f.pageY){f.pageY=f.clientY+document.body.scrollTop}e.helper.css("top",f.pageY-30+"px")}};return d},onDragStop:function(d,e){var c=this;c.sortTopic()},sortTopic:function(){var c=this;var e=0;var d=b("#agenda-edit-topics").find("li.agenda-edit-topic");d.each(function(){e++;var i=b(this);var k=i.find(".jagenda-topic-id");var g=i.find(".jagenda-topic-title");var h=i.find(".agenda-edit-topic-input").find(".body");var l=k.attr("name");var j=g.attr("name");var f=h.attr("name");l=l.substr(0,l.indexOf(":")+1)+e;j=j.substr(0,j.indexOf(":")+1)+e;f=f.substr(0,f.indexOf(":")+1)+e;k.attr("name",l);g.attr("name",j);h.attr("name",f)})},_getTargetVal:function(c){var d=this;var e=c.val();d._targetHtml=e},_setUpMemo:function(){var c=this;c._setUpMemoModButton();c._setUpMemoTitleClick()},_setUpMemoModButton:function(){var d=this;var c=b(".agenda-edit-note").find("input.update");c.click(function(f){var e=b(this).closest("div").find("textarea.note").val();e=desknets.escape(e);e=desknets.escapeValue(e);e=e.replace(/(\r\n)+|\n+/g,"<br />");if(e.length<1){e="&nbsp;"}b(".agenda-edit-note").find("div.note").html(e);d._onChangeDisplayMemo()})},_setUpMemoTitleClick:function(){var c=this;var d=b(".agenda-edit-note").find("div.note");d.click(function(){c._onChangeDisplayMemo()})},_onChangeDisplayMemo:function(){b(".agenda-edit-note").find(".agenda-edit-topic-view").toggle();b(".agenda-edit-note").find(".agenda-edit-topic-input").toggle();b(".agenda-edit-note").find("textarea").focus()},_inputAddSubmit:function(d){var c=this;c.callBase("_inputAddSubmit");c._inputSubmitRte(d)},_inputModSubmit:function(d){var c=this;c.callBase("_inputModSubmit");c._inputSubmitRte(d)},_inputSubmitRte:function(e){var d=this;d._onConfirm=true;var f=d.$mjPage.find("form");var c=function(){desknets.rte.setFormEditorValue(f);f.submit()};desknets.rte.inputSubmitRte(e,f,c)},_setLocationHashForm:function(){var c=this;if(c._onConfirm){var e;var d;e=c._getInputConfirmClass();if(neo.isSet(e)&&"initPage" in e){if(c.mboagaedaautosave===true){desknets.autosave.save();desknets.autosave.stop()}var f=function(){c.startInputChgChk()};e.initPage(desknets.agenda.PAGE_AGENDAENTRY,"jco-m-input-page",c.mIdBack,c.mBackCmd,c.mboagaedaautosave,f)}}else{c.callBase("_setLocationHashForm")}},_setScheduleInfo:function(){var e=this;var f="";var g=desknets.Resource.delLabel;params=desknets.paramanalyzer.getHashParams();var d=params.sid;var c=params.seldate;if(entryschedule!=""&&neo.isSet(entryschedule.schedule)){f=e._getScheduleInfo(entryschedule.schedule)}else{if(entryschedule.status=="ng"){f='<span class="agenda-schnoaccess cal-item">'+desknets.Resource.Message.agenda_schedule_noaccess+"</span>"}else{if(neo.isSet(d,{blank:false})){var h=function(){e._inputFormSaveToObserver()};desknets.agenda.input.schedule.SetTargetSchedule(d,c,h)}}}if(f.length>0){b(".jagenda-schdata").html(f);b('<a class="co-btn co-btn-close jagenda-sel-schedule-del" href="#" title="'+g+'">x</a>').insertAfter(".jagenda-schdata")}desknets.agenda.schreferdtl.init(e.$mjPage.find(".jagenda-schedule-choose-items"))},getMultiRequest:function(){var c=this;var e={};var d={};var f=0;e=desknets.paramanalyzer.getHashParams();d[f]=e;f++;e=desknets.attach.ext.getListParam();if(e){d[f]=e}return d},_getErrorPlace:function(c){var d=this;if(c=="topictitle"||c=="memo"||c=="topicbody"){return b(".jco-input-"+c).filter(":first").data("name")+desknets.merrMsgConnect}return d.callBase("_getErrorPlace",c)},_getScheduleInfo:function(c){var d="";c.agnasts=0;d=desknets.cal.tmplList.getReferHtml(c);return d},_inputDelSubmit:function(d){var c=this;c._onDelete=true;c.callBase("_inputDelSubmit",d)},getLocationFormParam:function(){var c=this;var d={};d=c.callBase("getLocationFormParam");if(c._onDelete){if(neo.isSet(d._)){d._=desknets.createRandomId()}c._onDelete=false}return d},startInputChgChk:function(){var d=this;d._initBeforeUnload();var e=function(){return d.funcBeforeHashChange()};var c=b(window).data("hashobserver");if(c){c.beforeHashChangeFunc=e}},_onBeforeSubmit:function(d){var c=this;c.callBase("_onBeforeSubmit",d);c.mboagaedaautosave=c.boautosave;c.boautosave=false},_onCompleteForm:function(){var c=this;c.callBase("_onCompleteForm");c.boautosave=c.mboagaedaautosave},AutoSaveOpt:function(d){var c=this;var f=desknets.paramanalyzer.getHashParams();var e=c.callBase("AutoSaveOpt",d);e.module="agenda";e.attachname="agendaatt";e.tmpnm=c.$mjPage.find('input[name="tmpnm"]').val();if(!!f.id&&(!f.copy||f.copy!="copy")){e.mod=true}else{e.mod=false}return e},AutoSaveSetup:function(){var c=this;c.mboagaedaautosave=false;c.callBase("AutoSaveSetup")},AutoSaveChkConfirm:function(f,d){var c=this;var e=desknets.paramanalyzer.getHashParams();if((!!e.copy&&e.copy=="copy")||(!!e.sid||!!e.seldate)){desknets.autosave.del();desknets.autosave.start()}else{c.callBase("AutoSaveChkConfirm",f,d)}},AutoSaveEntry:function(f){var e=this;f=e.callBase("AutoSaveEntry",f);if(!desknets.autosave.moption.mod){f.id=""}if(!!f.status){f.inputstatus=f.status}else{f.inputstatus=""}delete f.status;e.$mjPage.find(".agenda-edit-topic").each(function(){var l=b(this);var k=l.find(".jagenda-topic-id").attr("name");var m=k.split("_");var j="topicview_"+m[1];f[j]=l.find(".co-mceview").html()});var i=e.$mjPage.find(".jagenda-schedule-choose-items.co-selmulti-items").html();if(!!i){f.schdata=i}var d=desknets.agenda.input.user._chooser.getItems();if(!d){d=[]}else{if(!b.isArray(d)){d=[d]}}var c=[];var h=[];b.each(d,function(j,k){c[c.length]=k.name;h[h.length]=k.description});f.othertoname=c;f.othertodes=h;var c=[];var g=[];var h=[];e.$mjPage.find(".jagenda-circleto-choose-items .co-selitem").each(function(){c[c.length]=b(this).find("span").attr("title");g[g.length]=b(this).find("input").data("summary");h[h.length]=b(this).find("span").data("description")});f.circletoname=c;f.circletosummary=g;f.circletodes=h;f.dfidname=e.$mjPage.find(".jagenda-docfolder-choose-items .co-selitem span").attr("title");return f},AutoSaveGetData:function(h){var f=this;var d="";var g=desknets.paramanalyzer.getHashParams();var c=f.$mjPage.find('input[name="labelname"]');c.click();c.val(h.labelname);c.blur();if(!!h.inputstatus){f.$mjPage.find('input[name="status"]').attr("checked",true)}else{f.$mjPage.find('input[name="status"]').attr("checked",false)}f.$mjPage.find('input[name="subject"]').val(h.subject);if(!!h.memo){f.$mjPage.find(".agenda-edit-note .agenda-edit-topic-view .note").text(h.memo)}else{if(!h.memo&&!!g.id){if(!!f.$mjPage.find(".jco-input-memo").val()){f.$mjPage.find(".agenda-edit-note .agenda-edit-topic-view .note").text(" ")}}}f.$mjPage.find(".jco-input-memo").val(h.memo);b("#agenda-edit-topics").html("");var i={};b.each(h,function(k,m){if(k.indexOf("topic")>=0){var j=k.split(":");var l=j[0].split("_");if(!!j[1]){if(!i[j[1]]){i[j[1]]={}}i[j[1]][l[0]]=m}}});b.each(i,function(j,k){if(!k.topicid){k.topicid=""}if(!k.topictitle){k.topictitle=""}var m=f._addTopic(k.topicid);if(!!k.topictitle){m.find("div.title").text(k.topictitle)}else{m.find("div.title").html("&nbsp;")}m.find("input.title").val(k.topictitle);if(neo.isSet(k.topicbody)){m.find(".vbody").html(desknets.convertToSafeHtml(desknets.rte.convertForShow(k.topicbody)));m.data("get","1");m.find("textarea").val(k.topicbody);var l=m.find(".jagenda-topicbody").data("id");f._htmlVals[l]=k.topicbody}else{m.find(".vbody").html(k.topicview);m.find("textarea").attr("disabled","disabled")}});if(!!h.schdata){f.$mjPage.find(".jagenda-schedule-choose-items.co-selmulti-items").html(h.schdata);f.$mjPage.find(".jagenda-row-schedule").show()}else{f.$mjPage.find(".jagenda-schedule-choose-items.co-selmulti-items").html("");f.$mjPage.find(".jagenda-row-schedule").hide()}h.otherto=f.arrayToData(h.otherto);h.othertoname=f.arrayToData(h.othertoname);h.othertodes=f.arrayToData(h.othertodes);var e=[];b.each(h.otherto,function(j,k){e.push({id:k,type:"user",name:h.othertoname[j],description:h.othertodes[j]})});desknets.agenda.input.user._chooser.replaceItems(e);h.mailto=f.arrayToData(h.mailto);desknets.agenda.input.mailto.createMail(h.mailto);h.circleto=f.arrayToData(h.circleto);h.circletoname=f.arrayToData(h.circletoname);h.circletodes=f.arrayToData(h.circletodes);h.circletosummary=f.arrayToData(h.circletosummary);if(!!h.circleopen){f.$mjPage.find("#agenda-circleopen-chkbox").attr("checked",true)}else{f.$mjPage.find("#agenda-circleopen-chkbox").attr("checked",false)}d="";b.each(h.circleto,function(j,k){if(!h.circletoname[j]){h.circletoname[j]=""}if(!h.circletodes[j]){h.circletodes[j]=""}if(!h.circletosummary[j]){h.circletosummary[j]=""}d=d+desknets.agenda.input.circleto.createCircletoBox(k,h.circletoname[j],desknets.escapeValue(desknets.escape(h.circletosummary[j])),h.circletodes[j])});b(".jagenda-circleto-choose-items").empty().html(d);desknets.agenda.input.circleto.updateElement();d=f.getSelTmplData("dfid",h.dfid,h.dfidname);f.$mjPage.find(".jagenda-docfolder-choose-items").html(d);desknets.agenda.input.document._updateElement()},AutoSaveGetAttData:function(d){var c=this;desknets.agenda.input.attach.update(d)},_getRestModule:function(){return desknets.agenda.MODULE_API_AGENDA},_getDelExecCmd:function(){return desknets.agenda.CMD_AGENDAREFERDELETE},_getAddExecCmd:function(){return desknets.agenda.CMD_AGENDASAVETEMP},_getModExecCmd:function(){var c=this;return c._getAddExecCmd()},_getCancelExecCmd:function(){var c=this;return desknets.agenda.CMD_AGENDAEDITCANCEL},_getInputConfirmClass:function(){return desknets.agenda.agendaconfirm}})})(jQuery);desknets.page(desknets.agenda,"agendarefer",desknets.PageDispBase,{_onDelete:false,getScheduleInfo:function(b){b.agnasts=0;return desknets.cal.tmplList.getReferHtml(b)},getScheduleCmd:function(b){if(b.schadmin=="0"){return"schref"}else{return"schmsetref"}},getAgendaAttachDownloadParams:function(){var b={};b={cmd:desknets.agenda.CMD_AGENDAREFATTACH,id:desknets.paramanalyzer.getHashParam("id")};return b},_initSet:function(d){var c=this;if(d[0].delaccs=="0"){a(".jagenda-del-button-area").hide()}if(d[0].cmp!="2"){a(".jagenda-ref-complete").hide()}desknets.rte.readyForShow(this.$mjPage.find(".agenda-preview-topics"));if(desknets.browser.msie8){this.$mjPage.show()}c.callBase("_initSet",d);var b=function(i,h){var j=c.$mjPage.find(".jco-cab-template").html();var g=a("<div>"+j+"</div>");desknets.attachDisp.removeAttachAlink(g);g.find(".cal-item").find("span").remove();g.find(".cal-item").replaceWith(desknets.tmpl.escapeWord(g.find(".cal-item").attr("title")));g.find(".agenda-preview-header").css({"border-bottom":"3px solid #CCCCCC","line-height":"23px",margin:"0 0 30px",overflow:"hidden",padding:"0 0 5px"});g.find(".agenda-preview-date").css({"float":"right"});g.find(".agenda-preview-title").css({"font-size":"20px","font-weight":"bold"});g.find(".agenda-preview-topics").css({"line-height":"1.5",margin:"0 20px"});g.find(".agenda-preview-topic").find(".title").css({"font-size":"16px","font-weight":"bold",margin:"0 0 10px"});g.find(".agenda-preview-topic").find(".body").css({margin:"0 0 30px 30px",padding:"5px",border:"1px solid #ccc"});g.find(".agenda-preview-note").css({border:"4px double #CCCCCC",margin:"0 20px 20px",padding:"10px","white-space":"pre-wrap","word-wrap":"break-word"});g.find(".agenda-preview-footer").css({"border-top":"1px dashed #B9B9B9",overflow:"hidden",padding:"20px 20px 0"});g.find(".agenda-preview-footer").find("dt").css({clear:"left","float":"left",margin:"0 0 5px","text-align":"right",width:"115px"});if(a(".co-lang-half").length==0){g.find(".agenda-preview-footer").find("dd").css({margin:"0 0 5px 138px"})}else{g.find(".agenda-preview-footer").find("dd").css({margin:"0 0 5px 131px"})}g.find(".agenda-preview-footer").find("dd").find(".co-selfile").css({width:"647px"});g.find("ol").css({"list-style":"none outside none"});g.find("ul").css({"list-style":"none outside none"});h=desknets.tmpl.replaceWordHtml(h,"body",g.html());return h};var e={copymodule:desknets.agenda.MODULE_API_AGENDA,copycmd:desknets.agenda.CMD_AGENDACOPYATTACH,cabmaketemplate:b};desknets.agenda.schreferdtl.init(c.$mjPage.find(".agenda-preview-footer"));desknets.cabinetregist.init(this.$mjPage,e);var f=function(g,i){var h=desknets.print.setPrintHtmlFuncDef(g,i);if(!h){return false}var j=i.$(".cal-item").clone();j.removeClass("cal-item");i.$(".cal-item").replaceWith(j);return true};desknets.print.init(this.$mjPage,f)},_initHtmlTmplSet:function(b){if(!!b["0"]&&!!b["0"].topic&&!!b["0"].topic.item){a.each(desknets.ajax.getItems(b["0"].topic.item),function(c,d){d.entry=desknets.rte.convertForShow(d.entry)})}this.callBase("_initHtmlTmplSet",b)},inputModPage:function(){var b=this;var d={};var e=null;var f=desknets.paramanalyzer.getHashParams();var c=function(g){b._confirmEdit(g)};d.cmd=b._getModCofirmCmd();d[b._getIDName()]=f[b._getIDName()];desknets.ajax.rest({url:desknets.getUrl(b._getRestModule()),data:d,success:function(h,g,i){c(h)}})},_confirmEdit:function(d){var b=this;var e=d.message;if(neo.isSet(e)){var c=desknets.dialog.confirm(e,function(){desknets.submitform.setDialogDisabled(c);b.inputModPageDisp();return false});return}b.inputModPageDisp()},inputModPageDisp:function(){var b=this;var c={};c=desknets.paramanalyzer.getHashParams();c.cmd=b._getDispModCmd();b._setLocationHash(c)},_inputButton:function(){var b=this;b.callBase("_inputButton");b.$mjPage.find(".jagenda-pagecopy").click(function(c){c.preventDefault();b.inputCopyPage()})},inputCopyPage:function(){var b=this;var c={};c=desknets.paramanalyzer.getHashParams();c.cmd=b._getDispModCmd();c.copy="copy";b._setLocationHash(c)},_inputDelSubmit:function(c){var b=this;b._onDelete=true;b.callBase("_inputDelSubmit",c)},getLocationFormParam:function(){var b=this;var c={};c=b.callBase("getLocationFormParam");if(b._onDelete){if(neo.isSet(c._)){c._=desknets.createRandomId()}b._onDelete=false}return c},_getRestModule:function(){return desknets.agenda.MODULE_API_AGENDA},_getDispExecCmd:function(){return desknets.agenda.CMD_AGENDAREFER},_getDispModCmd:function(){return desknets.agenda.PAGE_AGENDAENTRY},_getDelExecCmd:function(){return desknets.agenda.CMD_AGENDAREFERDELETE},_getModCofirmCmd:function(){return desknets.agenda.CMD_AGENDAEDITCONFIRM},_getDelCmd:function(){return desknets.agenda.CMD_AGENDADELCONF}});(function(b){desknets.page(desknets.agenda,"agendaconfirm",desknets.PageDispBase,{_mIdListPage:null,_mCmdListPage:null,agendaHtml:null,mbackPageExecFunc:null,initPage:function(i,g,d,f,h,e){var c=this;c._mIdListPage=d;c._mCmdListPage=f;c.callBase("initPage",i,g);c.boautosave=h;c.mbackPageExecFunc=e},_getDispDataParam:function(){var c=this;var d;d=c.callBase("_getDispDataParam");d.tmpnm=this._getInputTmpnm();return d},_getDispHtmlParam:function(){var c;c=desknets.paramanalyzer.getHashParams();c.tmpnm=this._getInputTmpnm();c.cmd=desknets.agenda.PAGE_AGENDACONFIRM;return c},_getInputTmpnm:function(){var c=this;var d="";if(neo.isSet(c.mIdBack)){d=b("#"+c.mIdBack).find('input[name="tmpnm"]').val()}return d},_initSet:function(d){var c=this;c.callBase("_initSet",d);c._initListChk();c._initSendButton();desknets.agenda.schreferdtl.init(c.$mjPage.find(".agenda-preview-footer"));c._inputAjaxForm();desknets.rte.readyForShow(this.$mjPage.find(".agenda-preview-topics"))},_initHtmlTmplSet:function(c){if(!!c["0"]&&!!c["0"].topic&&!!c["0"].topic.item){b.each(desknets.ajax.getItems(c["0"].topic.item),function(d,e){e.entry=desknets.rte.convertForShow(e.entry)})}this.callBase("_initHtmlTmplSet",c)},_initListChk:function(){var c=this;var e=b(".jagenda-table-sendlist-otherto");var d=b(".jagenda-table-sendlist-mailto");e.each(function(){c._linitListChkClick(b(this))});d.each(function(){c._linitListChkClick(b(this))})},_linitListChkClick:function(c){c.find(".co-tbody-list").delegate("input[type=checkbox]","click",function(e){c.closest("div").prev().find(".jco-checkbox-all").attr("checked",false);c.closest("div").prev().prev().find(".co-chk-cnt-some").hide();if(b(this).attr("checked")){b(this).parent().parent().addClass("co-tr-selected")}else{b(this).parent().parent().removeClass("co-tr-selected")}});c.find(".co-tbody-list").find("input[type=checkbox]").each(function(){if(b(this).attr("disabled")=="disabled"){b(this).closest("tr").addClass("co-tr-off")}if(b(this).closest("td").next().hasClass("agenda-thd-mailsend-off")){b(this).closest("tr").addClass("co-tr-off");b(this).closest("tr").find('input[type="hidden"]').attr("disabled","disabled")}});var d=desknets.Resource.Message.com_listchk_cnt_all_disp;c.find(".jco-checkbox-all").click(function(){var f=(b(this).attr("checked"))?true:false;var e=c.closest(".agenda-setarea").find(".jagenda-to-tbody-list");if(f){e.find("tr").each(function(){var h=b(this).find('input[type="checkbox"]');if(h.attr("disabled")!="disabled"){h.attr("checked",f);b(this).addClass("co-tr-selected")}})}else{e.find('input[type="checkbox"]').attr("checked",f);e.find("tr").removeClass("co-tr-selected")}if(f){var g=0;e.find("tr").each(function(){var h=b(this).find('input[type="checkbox"]');if(h.attr("disabled")!="disabled"){g++}});d=desknets.tmpl.replaceWordLF(d,"num"," "+g+" ");c.closest(".agenda-setarea").find(".co-chk-cnt").find(".jco-span-chk-msg-all").html(d);c.closest(".agenda-setarea").find(".co-chk-cnt").find(".co-chk-cnt-some").show()}else{c.closest(".agenda-setarea").find(".co-chk-cnt").find(".co-chk-cnt-some").hide()}});desknets.htmlparts.addStripeClass(c,"co-tr-even")},_initSendButton:function(){var c=this;b(".jagenda-btn-send-on").click(function(d){c._setSendClass(b(d.target),true,desknets.Resource.agenda.doSendMail)});b(".jagenda-btn-send-off").click(function(d){c._setSendClass(b(d.target),false,desknets.Resource.agenda.doNotSendMail)})},_setSendClass:function(g,e,f){var c=this;var d=g.closest(".agenda-setarea").find("tbody");var h=d.find('input[type="checkbox"]').filter(":checked");if(!c._checkSelectTarget(h,desknets.Resource.Message.com_set_nochecked)){return}h.each(function(){if(b(this).attr("disabled")!="disabled"){if(e){b(this).closest("tr").removeClass("co-tr-off");b(this).closest("tr").find('input[type="hidden"]').removeAttr("disabled")}else{b(this).closest("tr").addClass("co-tr-off");b(this).closest("tr").find('input[type="hidden"]').attr("disabled","disabled")}b(this).closest("tr").find(".agenda-thd-mailsend").find("span").text(f)}})},_checkSelectTarget:function(d,c){if(d.length<=0){desknets.dialog.alert(c,{type:"warn"});return false}return true},_inputButton:function(){var c=this;c.$mjPage.find(".jagenda-confirm-cancel-page").click(function(d){d.preventDefault();c.dispBackInputPage()});c.$mjPage.find(".jagenda-confirm-save-submit").click(function(d){c._inputSaveSubmit(d)})},dispBackInputPage:function(){var c=this;b(".jco-page").hide();c.$mjPage.empty();desknets.submitform.clearDisabled(b("#"+c.mIdBack).find("form"));b("#"+c.mIdBack).show();c._setTitle(c._getAreaTitle(b("#"+c.mIdBack)));if(c.boautosave===true){desknets.autosave.start()}if(typeof c.mbackPageExecFunc=="function"){c.mbackPageExecFunc()}desknets.moveScroll()},_inputSaveSubmit:function(){var c=this;c.resetFuncBeforeHashChange();c._onSubmitConfirm()},_onSubmitConfirm:function(){var d=this;var c=function(g,f){var h=d.$mjPage.find(".jco-cab-template").html();var e=b("<div>"+h+"</div>");desknets.attachDisp.removeAttachAlink(e);e.find(".cal-item").find("span").remove();e.find(".cal-item").replaceWith(desknets.tmpl.escapeWord(e.find(".cal-item").attr("title")));e.find(".agenda-preview-header").css({"border-bottom":"3px solid #CCCCCC","line-height":"23px",margin:"0 0 30px",overflow:"hidden",padding:"0 0 5px"});e.find(".agenda-preview-date").css({"float":"right"});e.find(".agenda-preview-title").css({"font-size":"20px","font-weight":"bold"});e.find(".agenda-preview-topics").css({"line-height":"1.5",margin:"0 20px"});e.find(".agenda-preview-topic").find(".title").css({"font-size":"16px","font-weight":"bold",margin:"0 0 10px"});e.find(".agenda-preview-topic").find(".body").css({margin:"0 0 30px 30px","white-space":"pre-wrap","word-wrap":"break-word"});e.find(".agenda-preview-note").css({border:"4px double #CCCCCC",margin:"0 20px 20px",padding:"10px","white-space":"pre-wrap","word-wrap":"break-word"});e.find(".agenda-preview-footer").css({"border-top":"1px dashed #B9B9B9",overflow:"hidden",padding:"20px 20px 0"});e.find(".agenda-preview-footer").find("dt").css({clear:"left","float":"left",margin:"0 0 5px","text-align":"right",width:"115px"});if(b(".co-lang-half").length==0){e.find(".agenda-preview-footer").find("dd").css({margin:"0 0 5px 138px"})}else{e.find(".agenda-preview-footer").find("dd").css({margin:"0 0 5px 131px"})}e.find(".agenda-preview-footer").find("dd").find(".co-selfile").css({width:"647px"});e.find("ol").css({"list-style":"none outside none"});e.find("ul").css({"list-style":"none outside none"});e.find(".jagenda-entryconf-circleto").remove();e.find(".jagenda-entryconf-document").remove();f=desknets.tmpl.replaceWordHtml(f,"body",e.html());return f};desknets.cabinetregist.makeHtmlStr(b("#jagenda-m-confirm-page"),{onSet:b.proxy(this._onSetAttachHtml,this),cabmaketemplate:c})},_onSetAttachHtml:function(f){var d=this;var c=null;var e="";e=d._getSaveExecCmd();d.$mjPage.find('input[name="cmd"]').val(e);d.$mjPage.find('input[name="html"]').val(f);d.$mjPage.find("form").submit()},_inputAjaxForm:function(){var c=this;var d={};d=c._inputAjaxFormOption();c._initFormRequestAjax(c._mIdPageForm,d)},_inputAjaxFormOption:function(){var c=this;var d=c.callBase("_inputAjaxFormOption");d.success=function(g,e,h){c._updateLabelListId(g);if(!!g.noticeerror){var f=desknets.dialog.alert(g.noticeerror,{extraMessage:g.msgadd,extraClass:"co-msg-r",type:"warn"});f.bind("dialogclose",function(i){desknets.dialog.deleteById("warn");c._setLocationHashForm()});return}c._setLocationHashForm()};return d},_updateLabelListId:function(f){var c=this;var g=b("#"+c._mIdListPage).find(".jco-back-page-data");var d="";var e=g.find('input[name="labelid"]').val();g.find('input[name="cmp"]').val("0");if(neo.isSet(f.labelid)){d=f.labelid}if(e==""||e=="0"){return}if(e=="-1"&&d==""){return}if(d==""){g.find('input[name="labelid"]').val("-1")}else{g.find('input[name="labelid"]').val(d)}},getLocationFormParam:function(){var c=this;var d={};d=desknets.getInputDataToObj(b("#"+c._mIdListPage).find(".jco-back-page-data"));d.cmd=c._mCmdListPage;if(neo.isSet(d._)){d._=desknets.createRandomId()}return d},_getRestModule:function(){return desknets.agenda.MODULE_API_AGENDA},_getDispExecCmd:function(){return desknets.agenda.CMD_AGENDACONFIRM},_getSaveExecCmd:function(){return desknets.agenda.CMD_AGENDAENTRY},getAgendaAttachDownloadParams:function(){var c={};c={cmd:desknets.agenda.CMD_AGENDAREFATTACH,tmpnm:b('input[name="tmpnm"]').val()};return c},_getIdPage:function(){return"jagenda-m-confirm-page"},_getIdPageForm:function(){return"confirmfrm"},_formObserve_isChanged:function(c){return true},getScheduleInfo:function(c){if(c.sid=="0"){return desknets.Resource.Message.agenda_schedule_noaccess}c.agnasts=0;return desknets.cal.tmplList.getReferHtml(c)},_getBeforeUnloadExec:function(){return true}})})(jQuery);desknets.page(desknets.agenda,"agendasearch",desknets.agenda.agendaindex,{_searching:false,_onStopsearching:false,_searchParams:{},_interval:3000,_onLoadLabel:false,_onSrchExec:false,$dialogexec:null,_initGetHtml:function(){var b=this;var c={};b._searching=true;if(a("#jco-m-search-container").find(".jco-title").length>0){var d=desknets.paramanalyzer.getHashParams();b._getListAjax(d.row);return}b._onSrchExec=true;b.callBase("_initGetHtml")},_initHtml:function(c){var b=this;b.$mjListPage.empty();b.$mjListPage.html(c[0].html);b._initListStart();b._mobjParams=desknets.paramanalyzer.getHashParams();b._hashUpdatePageParams();b.setNotChangeHash(false);b.setConnecting(false);b._getListAjax(b._getListRow());b._initListEnd()},_getSearchPageParam:function(){var b={};b.cmd=this._getListCmd();return b},_getListAjax:function(c){var b=this;if(b._onStopsearching==true){return}b.callBase("_getListAjax",c)},_getListAjaxSuccess:function(c){var b=this;var d=desknets.ajax.getJsonItems(c);if(!b._getListAjaxSuccessCheck(c)){return}b.callBase("_getListAjaxSuccess",c)},_getListAjaxSuccessCheck:function(c){var b=this;b._setExecSearchPrm();if(c.searching=="1"){b.observe();b._openSearchMessageDialog();return false}b._searching=false;var d=b.$dialogexec;if(!!d&&d.dialog("isOpen")){d.dialog("close")}return true},getListParamToObj:function(){var b=this;var c={};c=b.callBase("getListParamToObj");if(b._isExecBatSearch()||b._onSrchExec==true){b._onLoadLabel=true;b._searching=true;c.init="1"}b._onSrchExec=false;return c},_openSearchMessageDialog:function(){var b=this;var c=b._getDialogSelfOptions();if(neo.isSet(b.$dialogexec)){return}b.$dialogexec=desknets.dialog.alert(b._searchExecMessage(),c);var d={};d[desknets.Resource.abortLabel]=function(){if(!!b._searching){b.onSrchStop()}else{b.$dialogexec.dialog("close")}};b.$dialogexec.dialog("option","buttons",d)},_getDialogSelfOptions:function(){var b=this;return{type:"message",extraMessage:desknets.Resource.Message.com_dialog_execaddmsg,extraClass:"co-loading-dialog",btnLabel:desknets.Resource.abortLabel,close:function(){if(!!b._searching){b.onSrchStop()}desknets.submitform.clearDisabled(b.$dialogexec);b.$dialogexec=null}}},onSrchStop:function(){var b=this;var d={};var c=desknets.getUrl(b._getRestModule());b._searching=false;b._onStopsearching=true;desknets.submitform.setDialogDisabled(b.$dialogexec);d.cmd=b._getStopBatSearchCmd();desknets.ajax.rest({dataType:desknets.ajax.RESTYPE_JSON,url:c,data:d,success:function(f,e,g){b._onStopsearching=false;setTimeout(function(){b._getListAjax(b._getListRow())},100)}})},_searchExecMessage:function(){var b=desknets.Resource.Message.com_dialog_execmsg;b=desknets.tmpl.replaceWordHtml(b,"msg",desknets.Resource.Message.com_search_nowexec);return b},observe:function(c){var b=this;var c=b._getSearchInterval();if(b._searching==false){return}setTimeout(function(){if(!!b._searching){b._getListAjax(b._getListRow())}},c)},_initListEndButton:function(){var b=this;b.$mjListPage.find(".co-pageback").click(function(c){c.preventDefault();a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="labelid"]').val("0");a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="fldsort"]').val("sdate");a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="order"]').val("-1");a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="row"]').val("0");a("#"+b.mIdBack).find(".jco-back-page-data").find('input[name="cmp"]').val("0");b.dispBackListPage()});b.$mjListPage.find(".co-btn-update").click(function(c){c.preventDefault();a(this).addClass("on");b.updateSearchList()});b.$mjListPage.find(".jco-list-del-submit").click(function(c){b._listDelSubmit(c)})},updateSearchList:function(){var b=this;var c=desknets.paramanalyzer.getHashParams();c._=desknets.createRandomId();b._setLocationHash(c)},_isExecBatSearch:function(){var b=this;var e=false;var d=b._getSearchConditionParams();d.push("_");var c=desknets.paramanalyzer.getHashParams();a.each(d,function(f,h){var g=c[h];if(!neo.isSet(g)){g=""}if(b._searchParams[h]!=g){e=true;b._searchParams[h]=g}});return e},_setExecSearchPrm:function(){var b=this;var d=b._getSearchConditionParams();d.push("_");var c=desknets.paramanalyzer.getHashParams();a.each(d,function(e,g){var f=c[g];if(!neo.isSet(f)){f=""}if(b._searchParams[g]!=f){b._searchParams[g]=f}})},_listPage:function(c){var b=this;var d=desknets.paramanalyzer.getHashParam("_");b.$mjListPage.find(".jco-back-page-data").find('input[name="row"]').val(c);var e=desknets.getInputDataToUrl(b.$mjListPage.find(".jco-back-page-data"));e=e+"&cmd="+b._getListCmd();b._setLocationHash(e)},_listDel:function(d,c){var b=this;if(d){b._onSrchExec=true}b.callBase("_listDel",d,c)},_getListAjaxSuccessAddData:function(){var b=this;if(b._onLoadLabel){b.callBase("_getListAjaxSuccessAddData")}else{b._updateScrollTopValue()}b._onLoadLabel=false},_getIdListPage:function(){return"jco-m-search-container"},_getIdListPageForm:function(){return"searchfrm"},_getSearchInterval:function(){var b=this;return b._interval},_getRestModule:function(){return desknets.agenda.MODULE_API_AGENDA},_getListCmd:function(){return desknets.agenda.PAGE_AGENDASEARCH},_getListExecCmd:function(){return desknets.agenda.CMD_AGENDASEARCHINDEX},_getStopBatSearchCmd:function(){return desknets.agenda.CMD_AGENDASTOPSEARCH},_getSearchConditionParams:function(){var b=[];b.push("srch_key");b.push("sdate");b.push("edate");b.push("sw_topic");b.push("sw_entry");b.push("labelid");b.push("cmp");return b},_getListDispCmd:function(){return desknets.agenda.PAGE_AGENDAREFER},_getListAddCmd:function(){return desknets.agenda.PAGE_AGENDAENTRY},_getListModCmd:function(){return desknets.agenda.PAGE_AGENDAENTRY},_getDelCmd:function(){return desknets.agenda.CMD_AGENDADELSEARCHCONF},_getDelExecCmd:function(){return desknets.agenda.CMD_AGENDADELETESEARCH},_getListDispClass:function(){return desknets.agenda.agendarefer},_getListEntryClass:function(){return desknets.agenda.agendaentry},_getListModClass:function(){return desknets.agenda.agendaentry},_getDataLabelEntryCmd:function(){return desknets.agenda.CMD_AGENDALABELASSIGNSRCH},_getDataLabelDelCmd:function(){return desknets.agenda.CMD_AGENDALABELASSIGNSRCHDEL}});app.addInitialAction(function(){desknets.agenda.init()})})(jQuery);