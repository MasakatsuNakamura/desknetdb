/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){desknets.memoset={PAGE_MEMOSETADMIN:"memosetadmin",PAGE_MEMOMSETWSTATUS:"memomsetwstatus",PAGE_MEMOMSETWSTATUSENTRY:"memomsetwstatusentry",PAGE_MEMOMSETINDEX:"memomsetindex",PAGE_MEMOMSETMEMOINDEX:"memomsetmemoindex",PAGE_MEMOMSETMEMOREFER:"memomsetmemorefer",CMD_MEMOMSETWSTATUS:"memomsetwstatuslist",CMD_MEMOMSETWSTATUSENTRY:"memomsetcmdwstatusentry",CMD_MEMOMSETWSTATUSDEL:"memomsetcmdwstatusdelete",CMD_MEMOMSETWSTATUSMOVE:"memomsetcmdwstatusmove",CMD_MEMOMSETUSERLIST:"memomsetuserlist",CMD_MEMOMSETMEMOINDEX:"memomsetmemolist",CMD_MEMOMSETMEMODELETE:"memomsetcmddelete",CMD_MEMOMSETMEMOREFER:"memomsetcmdrefer",init:function(){var b=this;var c=a("#jco-pv-funcid").val();desknets.pageframe.setFuncSel(c);desknets.hashobserver.init(desknets.memoset);if(c=="memopsetgen"){desknets.memoset.memopsetgen.init()}else{if(c=="memopsetwcontact"){desknets.memoset.memopsetwcontact.init()}else{if(c=="memopsetmail"){desknets.memoset.memopsetmail.init()}else{if(c=="memosetgen"){desknets.memoset.memosetgen.init()}else{if(c=="memosetadmin"){desknets.memoset.memosetadmin.init()}else{if(c=="memosetmanager"){desknets.memoset.memosetmanager.init()}else{if(c=="memomsetwstatus"){desknets.memoset.memomsetwstatus.init()}else{if(c=="memomsetindex"){desknets.memoset.memomsetindex.init();desknets.tags.memo.setUpFuncAfterAjax(b.changeMainContentMset)}}}}}}}}return},changeMainContentMset:function(c,d){if(c.data("module")!="memo"){return true}var b=desknets.paramanalyzer.getHashParams();if(!neo.isSet(b.cmd)){b.cmd=""}if(!neo.isSet(b.uid)){b.uid=""}if(b.uid==desknets.pageframe.getLoginUid()){if(b.cmd==desknets.memoset.PAGE_MEMOMSETMEMOINDEX){a("#jmemo-m-memolist-page").find(".co-btn-update").click()}}return true}};desknets.page(desknets.memoset,"memopsetgen",desknets.PageSet,{_getNextCmd:function(){return desknets.memo.PAGE_MEMOINDEX}});desknets.page(desknets.memoset,"memopsetwcontact",desknets.PageSet,{_getNextCmd:function(){return desknets.memo.PAGE_MEMOINDEX}});desknets.page(desknets.memoset,"memopsetmail",desknets.PageSet,{init:function(){var b=this;b.callBase("init");b._setUpNoMailMessage()},_setUpNoMailMessage:function(){var c=this;var b=a("#memo-pset-topmsg");if(b.hasClass("class_nomail")){desknets.pageframe.viewTopMsg("","alert")}},_getNextCmd:function(){return desknets.memo.PAGE_MEMOINDEX}});desknets.page(desknets.memoset,"memosetgen",desknets.PageSet,{_getNextCmd:function(){return desknets.memoset.PAGE_MEMOSETADMIN}});desknets.page(desknets.memoset,"memosetadmin",desknets.PageBase,{});desknets.page(desknets.memoset,"memosetmanager",desknets.PageAdmin,{_getNextCmd:function(){return desknets.memoset.PAGE_MEMOSETADMIN}});desknets.page(desknets.memoset,"memomsetwstatus",desknets.PageInputList,{_getRestModule:function(){return desknets.MODULE_API_MAIN},_getListCmd:function(){return desknets.memoset.PAGE_MEMOMSETWSTATUS},_getListExecCmd:function(){return desknets.memoset.CMD_MEMOMSETWSTATUS},_getListAddCmd:function(){return desknets.memoset.PAGE_MEMOMSETWSTATUSENTRY},_getListModCmd:function(){return this._getListAddCmd()},_getDelExecCmd:function(){return desknets.memoset.CMD_MEMOMSETWSTATUSDEL},_getMoveExecCmd:function(){return desknets.memoset.CMD_MEMOMSETWSTATUSMOVE},_getMultiModule:function(){return desknets.MODULE_API_MAIN},_getListEntryClass:function(){return desknets.memoset.memomsetwstatusentry},_getListModClass:function(){return self._getListEntryClass()}});desknets.page(desknets.memoset,"memomsetwstatusentry",desknets.PageInputBase,{_getDelExecCmd:function(){return desknets.memoset.CMD_MEMOMSETWSTATUSDEL},_getAddExecCmd:function(){return desknets.memoset.CMD_MEMOMSETWSTATUSENTRY},});desknets.page(desknets.memoset,"memomsetindex",desknets.PageListBase,{_initListEnd:function(){var b=this;b.callBase("_initListEnd");var c={assign:true};var d={allGroup:"choosable",unassignGroup:"choosable"};desknets.page.groupSelect.init(c,d)},_getListAjaxSuccess:function(c){var b=this;b.callBase("_getListAjaxSuccess",c);desknets.page.groupSelect.editSelectedGroup(a(".jco-sel-items"),c)},initParamsFromHash:function(c){var b=this;var e="",f="";e=c.cmd;f=c.row;if(!neo.isSet(e)||e==b._getListCmd()){b._hashUpdateListPage(c)}else{if(e==b._getMemoListCmd()){var d=a("#jmemo-m-memolist-page").find(".jco-pv-funcid");if(neo.isSet(d)&&d.val()==e){desknets.memoset.memomsetmemoindex._getListAjax(f)}else{desknets.memoset.memomsetmemoindex.initPage(b._getListCmd(),b._getIdListPage())}b.mhashBackCmd=e;b.mhashIdBack="jmemo-m-memolist-page"}else{if(e==desknets.memoset.PAGE_MEMOMSETMEMOREFER){desknets.memoset.memomsetdisp.initPage(b._getMemoListCmd(),"jmemo-m-memolist-page");b.mhashBackCmd=e;b.mhashIdBack="jco-m-disp-page"}}}},_replaceListLine:function(c,f,e){var b=this;if(f==desknets.user.KEY_ASSIGNGROUP){var d=[];d=desknets.user.getListAssignGroups(e[f].Name);c=desknets.tmpl.replaceWordHtml(c,f,d.assign);c=desknets.tmpl.replaceWordHtml(c,"assigntitle",d.assigntitle);return c}return b.callBase("_replaceListLine",c,f,e)},_listLine:function(c,d){var b=this;var e=desknets.user.KEY_ASSIGNGROUP;if(!neo.isSet(d[e])){d[e]="";d.assigntitle=""}return b.callBase("_listLine",c,d)},_getListCmd:function(){return desknets.memoset.PAGE_MEMOMSETINDEX},_getListExecCmd:function(){return desknets.memoset.CMD_MEMOMSETUSERLIST},_getMemoListCmd:function(){return desknets.memoset.PAGE_MEMOMSETMEMOINDEX}});desknets.page(desknets.memoset,"memomsetmemoindex",desknets.memo.memoreceiveindex,{_getFieldsCheckScroll:function(){return["uid"]},_listMoveScroll:function(){this._setClearScrollPosition();this.callBase("_listMoveScroll")},_setTitle:function(d){var c=this;var b={};b.username=c.$mjListPage.find("input.memo-mset-username").val();c.callBase("_setTitle",d,b)},_getDelAddPrm:function(){var b=this;var c={};a.extend(c,b.callBase("_getDelAddPrm"));c.uid=b.$mjListPage.find(".jco-back-page-data").find('input[name="uid"]').val();return c},_getDispPageParam:function(){var b=this;var c={};c.uid=b.$mjListPage.find(".jco-back-page-data").find('input[name="uid"]').val();return c},_getListExecCmd:function(){return desknets.memoset.CMD_MEMOMSETMEMOINDEX},_getListCmd:function(){return desknets.memoset.PAGE_MEMOMSETMEMOINDEX},_getDelExecCmd:function(){return desknets.memoset.CMD_MEMOMSETMEMODELETE},_getListDispCmd:function(){return desknets.memoset.PAGE_MEMOMSETMEMOREFER},_getListDispClass:function(){return desknets.memoset.memomsetdisp}});desknets.page(desknets.memoset,"memomsetdisp",desknets.memo.memodispcom,{_setTitle:function(d){var c=this;var b={};b.username=c.$mjPage.find("input.memo-mset-username").val();c.callBase("_setTitle",d,b)},_initSetCabinetRegist:function(){return},getLocationFormParam:function(){var b=this;var c={};var d=desknets.paramanalyzer.getHashParams();c=b.callBase("getLocationFormParam");c.uid=d.uid;return c},_getDelPrm:function(){var b={};var c=desknets.paramanalyzer.getHashParams();b.uid=c.uid;return b},_getDelExecCmd:function(){return desknets.memoset.CMD_MEMOMSETMEMODELETE},_getDispExecCmd:function(){return desknets.memoset.CMD_MEMOMSETMEMOREFER}});app.addInitialAction(function(){desknets.memoset.init()})})(jQuery);