/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){(function(b){desknets.tcardset={MODULE_TCARD:"ztcard",MODULE_API_TCARD:"zrtcard",PAGE_TCARDLIST:"tcardindex",PAGE_TCARDPSETGEN:"tcardpsetgen",PAGE_TCARDMSETDAYSITUATION:"tcardmsetdaysituation",PAGE_TCARDMSETENTRY:"tcardmsetentry",PAGE_TCARDMSETMONTHLYREPORT:"tcardmsetmonthlyreport",PAGE_TCARDMSETINDEX:"tcardmsetindex",PAGE_TCARDMSETWORKSYS:"tcardmsetworksys",PAGE_TCARDMSETWORKSYSENTRY:"tcardmsetworksysentry",PAGE_TCARDMSETUSERWORKSYS:"tcardmsetuserworksys",PAGE_TCARDMSETUSERWORKSYSENTRY:"tcardmsetuserworksysentry",PAGE_TCARDSETADMIN:"tcardsetadmin",PAGE_TCARDSETGEN:"tcardsetgen",PAGE_TCARDSETMANAGER:"tcardsetmanager",PAGE_TCARDSETSYNC:"tcardsetsync",PAGE_TCARDSETMASKADDR:"tcardsetmaskaddr",CMD_TCARDPSETGEN:"tcardpsercmdgen",CMD_TCARDMSETDAYSITUATION:"tcardmsetcmddaysituation",CMD_TCARDMSETDAYSITUATIONAPP:"tcardmsetcmddaysituationapp",CMD_TCARDMSETENTRY:"tcardmsetcmdentry",CMD_TCARDMSETMONTHLYREPORT:"tcardmsetcmdmonthlyreport",CMD_TCARDMSETINDEX:"tcardmsetcmdindex",CMD_TCARDMSETWORKSYS:"tcardmsetcmdworksys",CMD_TCARDMSETWORKSYSENTRY:"tcardmsetcmdworksysentry",CMD_TCARDMSETWORKSYSDEL:"tcardmsetcmdworksysdel",CMD_TCARDMSETUSERWORKSYS:"tcardmsetcmduserworksys",CMD_TCARDMSETUSERWORKSYSENTRY:"tcardmsetcmduserworksysentry",CMD_TCARDMSETEXPORT:"tcardmsetcmdexport",CMD_TCARDMSETEXPORTMONTHLY:"tcardmsetcmdexportmonthly",CMD_TCARDMSETEXPORTDETAIL:"tcardmsetcmdexportdetail",CMD_TCARDMSETREPORTMONTH:"tcardmsetcmdreportmonth",CMD_TCARDSETGEN:"tcardsetcmdgen",CMD_TCARDSETGENCONF:"tcardsetcmdgenconf",CMD_TCARDSETSYNC:"tcardsetcmdsync",CMD_TCARDSETMASKADDR:"tcardsetcmdmaskaddr",init:function(){var c=b("#jco-pv-funcid").val();desknets.pageframe.setFuncSel(c);if(c==desknets.tcardset.PAGE_TCARDPSETGEN){desknets.tcardset.tcardpsetgen.init();desknets.tcard.subwin.init()}else{if(c==desknets.tcardset.PAGE_TCARDMSETDAYSITUATION){desknets.hashobserver.init(desknets.tcardset);desknets.tcardset.tcardmsetdaysituation.init()}else{if(c==desknets.tcardset.PAGE_TCARDMSETMONTHLYREPORT){desknets.hashobserver.init(desknets.tcardset);desknets.tcardset.tcardmsetmonthlyreport.init()}else{if(c==desknets.tcardset.PAGE_TCARDMSETWORKSYS){desknets.hashobserver.init(desknets.tcardset);desknets.tcardset.tcardmsetworksys.init()}else{if(c==desknets.tcardset.PAGE_TCARDMSETUSERWORKSYS){desknets.hashobserver.init(desknets.tcardset);desknets.tcardset.tcardmsetuserworksys.init()}else{if(c==desknets.tcardset.PAGE_TCARDSETADMIN){}else{if(c==desknets.tcardset.PAGE_TCARDSETGEN){desknets.tcardset.tcardsetgen.init()}else{if(c==desknets.tcardset.PAGE_TCARDSETMANAGER){desknets.tcardset.tcardsetmanager.init()}else{if(c==desknets.tcardset.PAGE_TCARDSETSYNC){desknets.tcardset.tcardsetsync.init()}else{if(c==desknets.tcardset.PAGE_TCARDSETMASKADDR){desknets.tcardset.tcardsetmaskaddr.init()}}}}}}}}}}}}})(jQuery);desknets.page(desknets.tcardset,"PageBatBase",desknets.PageSet,{_mfuncTimer:null,_mboEndMsg:false,$dialogexec:null,$mjContent:null,init:function(){var b=this;b.$mjContent=a(".co-m-content");b.callBase("init");if(b._getChkCmd()!=""){b._chkProcessExecution()}b._initButton()},_initButton:function(){var b=this;a(".jtcard-button-run").click(function(c){c.preventDefault();if(b._checkClickButtonRun()){b._execStart();a("#frm").submit()}})},_checkClickButtonRun:function(){return true},_onAjaxFormSuccess:function(d){var b=this;var c=function(){if(b._getChkCmd()!=""){b._chkProcessExecution()}};if(b._getChkCmd()!=""){b._execDialog();b._mboEndMsg=true;setTimeout(function(){c()},2000)}else{b._mboEndMsg=true;b._execEnd(d)}},_execStart:function(){},_execRuntime:function(b){},_execResult:function(b){},_execEnd:function(c){var b=this;var d="";desknets.submitform.clearDisabled(a("#frm"));if(b.$dialogexec!=null){b.$dialogexec.dialog("close");desknets.submitform.clearDialogDisabled(b.$dialogexec);b.$dialogexec=null}if(b._mboEndMsg){desknets.dialog.alert(b._completionMessage(),{type:"message"})}b.delTimer();b._mboEndMsg=false},_chkProcessExecution:function(){var c=this;var f="";var b="";var d={};f=c._getRestModule();b=c._getChkCmd();var e=desknets.getUrl(f);d.cmd=b;d.execcheck="1";desknets.ajax.rest({url:e,data:d,success:function(h,g,i){c._chkProcessExecutionSuccess(h)}})},_chkProcessExecutionSuccess:function(c){var b=this;if(c.execflg=="0"){b._execResult(c);b._execEnd(c)}else{b._execRuntime(c);desknets.submitform.setDisabled(a("#frm"));b._execDialog();b._mboEndMsg=true;b.setTimer()}},setTimer:function(){var b=this;var c=5000;if(b._mfuncTimer==null){b._mfuncTimer=setInterval(function(){b._chkProcessExecution()},c)}},delTimer:function(){var b=this;if(b._mfuncTimer!==null){clearInterval(b._mfuncTimer);b._mfuncTimer=null}},_execDialog:function(){var b=this;var c={type:"message"};c.extraMessage=desknets.Resource.Message.com_import_nowexecsub;b.$dialogexec=desknets.dialog.alert(b._execMessage(),c);desknets.submitform.setDialogDisabled(b.$dialogexec)},_execMessage:function(){return"M:Runtime ..."},_completionMessage:function(){return"M:Completion !"},_getRestModule:function(){return""},_getChkCmd:function(){return""},_getBeforeUnloadExec:function(){return false}});(function(b){desknets.page(desknets.tcardset,"tcardpsetgen",desknets.PageSet,{init:function(){this.callBase("init");desknets.tcard.subwin.reload()},_getNextCmd:function(){return desknets.tcardset.PAGE_TCARDLIST}})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetdaysituation",desknets.PageListBaseDayChange,{BTN_CHANGEDAY:".jtcard-change-day",init:function(){var c=b("#jco-m-list-container").find(".jco-back-page-data");c.find('input[name="fldsort"]').val("");c.find('input[name="order"]').val("");c.find('input[name="prid"]').remove();this.callBase("init");desknets.page.groupSelect.init({},{allGroup:"choosable",unassignGroup:"choosable"})},_setListStyle:function(e){var d=this;var f=d.$mjTableList;var g="co-tr-even";var c=f.children();c.removeClass(g);c.filter(":nth-child(4n-1)").addClass(g);c.filter(":nth-child(4n)").addClass(g)},_getListAjaxSuccessOtherSet:function(d){var c=this;desknets.page.groupSelect.editSelectedGroup(c.$mjListPage.find(".jco-sel-items"),d);c.callBase("_getListAjaxSuccessOtherSet",d)},_initListStart:function(){var c=this;c.callBase("_initListStart");c.$mjTableList.delegate(".jtcard-change-situation","click",function(f){f.preventDefault();var d=b(this).parent().parent().find(".jtcard-id").val();var e=b(this).attr("name");var g=c.m_sTargetDate;c._execApproval(d,g,e)})},_listheader:function(e){var d=this;var f="";var c=d.$mjListPage.find(".jtcard-list-head");c.find(".jtcard-fld-targetdate").text(e.targetdate)},_listLine:function(d,e){var c=this;var f="";f=e.id;d=desknets.tmpl.replaceWord(d,"id",f);f=e.Name;d=desknets.tmpl.replaceWord(d,"Name",f);d=c._listLineTimeField(d,e);return d},_listLineTimeField:function(e,n){var o=this;var k="";var i="";var l=n.absence;if(l>"0"){e=desknets.tmpl.replaceWordHtml(e,"rowspan",'rowspan="2" colspan="3"');var m=b("<div />").html(e);m.find(".jtcard-late").remove();m.find(".jtcard-sbutton").remove();m.find(".jtcard-etime").remove();m.find(".jtcard-leaveearly").remove();m.find(".jtcard-ebutton").remove();e=m.html();var f=n.absencereason;k=desknets.tcardcom.getAbsenceName(f);var c=desknets.tmpl.escapeWord(n.absencereasonfree);if((k.length>0)||(c.length>0)){k=desknets.tcardcom.createHtmlNoteRec(k,c,"tcard-normal")}e=desknets.tmpl.replaceWordHtml(e,"stime",k)}else{e=desknets.tmpl.replaceWordHtml(e,"rowspan","");k=desknets.tcardcom.createHtmlTimeRec(n,"stimeflag","stime","");if(k==""){k=desknets.tcardcom.time_nothing}e=desknets.tmpl.replaceWordHtml(e,"stime",k);var d=n.late;k=desknets.tcardcom.getLateName(d);var g=desknets.tmpl.escapeWord(n.sreason);if(k.length>0){if(d=="2"){k="&nbsp;"+desknets.tcardcom.createHtmlNoteRec(k,g,"tcard-approval")}else{k="&nbsp;"+desknets.tcardcom.createHtmlNoteRec(k,g,"tcard-late")}}e=desknets.tmpl.replaceWordHtml(e,"late",k);if(d=="1"){i="late_off"}else{i="late_on"}e=desknets.tmpl.replaceWordHtml(e,"smode",i);k=desknets.Resource.tcard[i];e=desknets.tmpl.replaceWordHtml(e,"sbutton",k);k=desknets.tcardcom.createHtmlTimeRec(n,"etimeflag","etime","");if(k==""){k=desknets.tcardcom.time_nothing}e=desknets.tmpl.replaceWordHtml(e,"etime",k);var h=n.leaveearly;k=desknets.tcardcom.getLeaveearlyName(h);var j=desknets.tmpl.escapeWord(n.ereason);if(k.length>0){if(h=="2"){k="&nbsp;"+desknets.tcardcom.createHtmlNoteRec(k,j,"tcard-approval")}else{k="&nbsp;"+desknets.tcardcom.createHtmlNoteRec(k,j,"tcard-early")}}e=desknets.tmpl.replaceWordHtml(e,"leaveearly",k);if(h=="1"){i="leaveearly_off"}else{i="leaveearly_on"}e=desknets.tmpl.replaceWordHtml(e,"emode",i);k=desknets.Resource.tcard[i];e=desknets.tmpl.replaceWordHtml(e,"ebutton",k)}return e},_execApproval:function(h,f,i){var c=this;var e={};var d={};var g="";if(i=="late_on"){g="1"}else{if(i=="late_off"){g="2"}else{if(i=="leaveearly_on"){g="3"}else{if(i=="leaveearly_off"){g="4"}}}}d.cmd=desknets.tcardset.CMD_TCARDMSETDAYSITUATIONAPP;d.prid=h;d.date=f;d.mode=g;desknets.ajax.rest({url:desknets.getUrl(c._getRestModule()),data:d,success:function(k,j,l){c._getListAjax(c._getListRow())},complete:function(l,j,k){c._onComplete()},traditional:true})},_computeChangeDate:function(d,e){var c=desknets.dateTime.moveDate(d,e);return c},_getChangeDayButtonName:function(){return this.BTN_CHANGEDAY},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getListCmd:function(){return desknets.tcardset.PAGE_TCARDMSETDAYSITUATION},_getListExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETDAYSITUATION},_getListDispCmd:function(){return desknets.tcardset.PAGE_TCARDMSETENTRY},_getListDispClass:function(){return desknets.tcardset.tcardmsetentry},inputModPage:function(d){var c=this;c.inputDispPage(d)},inputDispPage:function(f){var c=this;var e="";var d={};e=c._getListDispCmd();d=c._getDispPageParam();d.cmd=e;d.id=c.m_sTargetDate;d.prid=f;d.titleno="1";c._inputPage(d)},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetentry",desknets.tcard.tcardentry,{_setTitle:function(e){var d=this;var c={};c.username=d.$mjPage.find(".jtcard-title-username").val();d.callBase("_setTitle",e,c)},getLocationFormParam:function(){var d=this;var e={};var c=desknets.paramanalyzer.getHashParams();if(!neo.isSet(d.mBackCmd)||!neo.isSet(d.mIdBack)){return null}if(d.mBackCmd==desknets.tcardset.PAGE_TCARDMSETINDEX){var f=b("#"+d.mIdBack).find(".jco-back-page-data");if(f.length>0){e=desknets.getInputDataToObj(f);e.cmd=d.mBackCmd}else{e.init="1";e.prid=c.prid;e.cmd=d.mBackCmd}}else{e=d.callBase("getLocationFormParam")}return e},_getAddExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETENTRY},_getModExecCmd:function(){var c=this;return c._getAddExecCmd()},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetmonthlyreport",desknets.PageListBaseDayChange,{init:function(){var c=b("#jco-m-list-container").find(".jco-back-page-data");c.find('input[name="prid"]').remove();this.callBase("init");desknets.page.groupSelect.init({},{allGroup:"choosable",unassignGroup:"choosable"})},_initListEndButton:function(){var c=this;c.callBase("_initListEndButton");c.$mjListPage.find(".jco-list-dl-submit").click(function(f){var d=desknets.tcardset.MODULE_TCARD+"."+desknets._msExtension;var e=desknets.tcardset.CMD_TCARDMSETEXPORTMONTHLY;c.$mjListPage.find('form[name="listfrm"]').attr("action",d);c.$mjListPage.find('input[name="cmd"]').val(e);c.$mjListPage.find('input[name="header"]').val("");c.$mjListPage.find('input[name="uname"]').val("");c.$mjListPage.find('input[name="header"]').attr("disabled","disabled");c.$mjListPage.find('input[name="uname"]').attr("disabled","disabled")});c.$mjListPage.find(".jtcard-detaildownload").click(function(f){var d=desknets.tcardset.MODULE_TCARD+"."+desknets._msExtension;var e=desknets.tcardset.CMD_TCARDMSETEXPORTDETAIL;c.$mjListPage.find('form[name="listfrm"]').attr("action",d);c.$mjListPage.find('input[name="cmd"]').val(e);c.$mjListPage.find('input[name="header"]').val("");c.$mjListPage.find('input[name="uname"]').val("");c.$mjListPage.find('input[name="header"]').removeAttr("disabled");c.$mjListPage.find('input[name="uname"]').removeAttr("disabled");c._initDialogDetailDownload()})},_hashUpdatePageView:function(d){var c=this;var f=desknets.paramanalyzer.getHashParams();if(d==desknets.tcardset.PAGE_TCARDMSETINDEX){var e=b("#jco-m-tcard-container").find(".jco-back-page-data");if(e.length>0&&!neo.isSet(f.init)){desknets.tcardset.tcardmsetindex._getListAjax(f.row)}else{desknets.tcardset.tcardmsetindex.initPage(desknets.tcardset.PAGE_TCARDMSETMONTHLYREPORT,"jco-m-list-container")}}else{if(d==desknets.tcardset.PAGE_TCARDMSETENTRY){desknets.tcardset.tcardmsetentry.initPage(desknets.tcardset.PAGE_TCARDMSETINDEX,"jco-m-tcard-container")}else{c.callBase("_hashUpdatePageView",d)}}},_initDialogDetailDownload:function(){var d=this;var g=desknets.Resource.tcard.detailDownloadDialogTitle;var c=desknets.Resource.tcard.detailDownloadButtonOk;var h=desknets.Resource.tcard.detailDownloadButtonCancel;var f={width:420,title:g,modal:true,buttons:{}};f.buttons[c]=function(){if(b(this).find('input[name="selheader"]').attr("checked")){d.$mjListPage.find('input[name="header"]').val("1")}if(b(this).find('input[name="seluname"]').attr("checked")){d.$mjListPage.find('input[name="uname"]').val("1")}d.$mjListPage.find('form[name="listfrm"]').submit();b(this).dialog("close")};f.buttons[h]=function(){b(this).dialog("close")};var e=b.extend(desknets.dialog.getDialogOption(),f);$dialog=b("#jtcard-dialog-detaildownload");desknets.dialog.setUp($dialog,e);$dialog.dialog("open")},_initListStartModLink:function(){var c=this},_getListAjaxSuccessOtherSet:function(d){var c=this;desknets.page.groupSelect.editSelectedGroup(c.$mjListPage.find(".jco-sel-items"),d);c.callBase("_getListAjaxSuccessOtherSet",d)},_listheader:function(e){var d=this;var f="";var c=d.$mjListPage;c.find(".jtcard-fld-targetdate").text(e.targetdate);b("#jtcard-dialog-detaildownload").find(".jtcard-fld-targetdate").text(e.targetdate);b("#jtcard-dialog-detaildownload").find(".jtcard-fld-group").text(e.evgname)},_listLine:function(d,e){var c=this;var f=desknets.paramanalyzer.getHashParams();if(neo.isSet(f.date)){d=desknets.tmpl.replaceWord(d,"date",f.date)}else{d=desknets.tmpl.replaceWord(d,"date","")}return c.callBase("_listLine",d,e)},_listLineCmd:function(c){return desknets.tmpl.replaceWord(c,"cmd",this._getTcardDispCmd())},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getListCmd:function(){return desknets.tcardset.PAGE_TCARDMSETMONTHLYREPORT},_getListExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETMONTHLYREPORT},_getTcardDispCmd:function(){return desknets.tcardset.PAGE_TCARDMSETINDEX},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"basetcardmsetindex",desknets.PageListBaseDayChange,desknets.tcard.PageBaseTcardList);desknets.page(desknets.tcardset,"tcardmsetindex",desknets.tcardset.basetcardmsetindex,{_getFieldsCheckScroll:function(){return["prid"]},_listMoveScroll:function(){this._setClearScrollPosition();this.callBase("_listMoveScroll")},_setTitle:function(e){var d=this;var c={};c.username=d.$mjListPage.find(".jtcard-title-username").val();d.callBase("_setTitle",e,c)},_initListStart:function(){var d=this;d.callBase("_initListStart");var e="#"+d._getIdListPage();var c=b(e).find(".jco-back-page-data");c.find('input[name="row"]').remove();c.find('input[name="fldsort"]').remove();c.find('input[name="order"]').remove();c.find('input[name="num"]').remove();c.find('input[name="gid"]').remove();d._appendEventHandler()},_appendEventHandler:function(){var c=this;c._initPrintLink();c.$mjListPage.find(".jco-list-dl-submit").click(function(f){var d=desknets.tcardset.MODULE_TCARD+"."+desknets._msExtension;var e=desknets.tcardset.CMD_TCARDMSETEXPORT;c.$mjListPage.find('form[name="listfrm"]').attr("action",d);c.$mjListPage.find('input[name="cmd"]').val(e)})},initGetPageId:function(){var c=this;c.callBase("initGetPageId");c.boGetHtmlSingle=false},_initListEndButton:function(){var c=this;c.callBase("_initListEndButton");c.$mjListPage.find(".co-pageback").click(function(d){d.preventDefault();c.dispBackListPage()})},inputModPage:function(d){var c=this;c.inputDispPage(d)},_getListAjaxSuccess:function(d){var c=this;if(typeof(d[0])=="object"){if(d[0]["status"]==desknets.RES_STATUS_SUCCESS){c._listheader(d[0])}}else{c._listheader(d)}c.callBase("_getListAjaxSuccess",d)},_listLine:function(d,e){var c=this;var f=desknets.paramanalyzer.getHashParams();if(neo.isSet(f.prid)){d=desknets.tmpl.replaceWord(d,"prid",f.prid)}else{d=desknets.tmpl.replaceWord(d,"prid","")}return c.callBase("_listLine",d,e)},_getIdListPage:function(){return"jco-m-tcard-container"},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getListCmd:function(){return desknets.tcardset.PAGE_TCARDMSETINDEX},_getListExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETINDEX},_getListDispCmd:function(){return desknets.tcardset.PAGE_TCARDMSETENTRY},_getListDispClass:function(){return desknets.tcardset.tcardmsetentry},inputDispPage:function(f){var c=this;var e="";var d={};var g=desknets.paramanalyzer.getHashParams();e=c._getListDispCmd();d=c._getDispPageParam();d.cmd=e;d.id=f;d.prid=g.prid;c._inputPage(d)},_getPrintDataParam:function(){var c=this;var e=desknets.paramanalyzer.getHashParams();var d=c.callBase("_getPrintDataParam");d.prid=e.prid;return d},_getPrintDataCmd:function(){return desknets.tcardset.CMD_TCARDMSETREPORTMONTH},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetworksys",desknets.PageInputList,{init:function(){var c=b("#jco-m-list-container").find(".jco-back-page-data");c.find('input[name="gid"]').remove();c.find('input[name="date"]').remove();c.find('input[name="prid"]').remove();this.callBase("init")},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getListCmd:function(){return desknets.tcardset.CMD_TCARDMSETWORKSYS},_getListAddCmd:function(){return desknets.tcardset.PAGE_TCARDMSETWORKSYSENTRY},_getListModCmd:function(){return desknets.tcardset.PAGE_TCARDMSETWORKSYSENTRY},_getDelExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETWORKSYSDEL},_getListEntryClass:function(){return desknets.tcardset.tcardmsetworksysentry},_getListModClass:function(){return desknets.tcardset.tcardmsetworksysentry},_getListExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETWORKSYS},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetworksysentry",desknets.PageInputBase,{_initSet:function(d){var c=this;this.callBase("_initSet",d);desknets.timePicker.create(c.$mjPage.find('input[name="starttime"]'),{minuteStep:5,required:true});desknets.timePicker.create(c.$mjPage.find('input[name="endtime"]'),{minuteStep:5,required:true});desknets.timePicker.create(c.$mjPage.find('input[name="daychangetime"]'),{minuteStep:10,required:true})},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getAddExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETWORKSYSENTRY},_getModExecCmd:function(){var c=this;return c._getAddExecCmd()},_getDelExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETWORKSYSDEL}})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetuserworksys",desknets.PageInputList,{init:function(){var c=b("#jco-m-list-container").find(".jco-back-page-data");c.find('input[name="date"]').remove();c.find('input[name="prid"]').remove();this.callBase("init");desknets.page.groupSelect.init({},{allGroup:"choosable",unassignGroup:"choosable"})},_initListEndButton:function(){var c=this;c.callBase("_initListEndButton");c.$mjListPage.find(".jco-list-set-submit").click(function(d){c._listDelSubmit(d)})},_delNoChkMessage:function(){var c=this;return desknets.Resource.tcard.set_nochecked},_delConfMessage:function(){var d=this;var c="";if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.tcard.set_allconf}else{if(d.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){c=desknets.Resource.tcard.set_someconf}else{c=desknets.Resource.tcard.set_listconf}}return desknets.tmpl.replaceWordHtml(c,"count",d._getListCheckCount())},_getDelAddPrm:function(){var d=this;var e={};var c=d.$mjListPage.find(".jco-back-page-data");e.wid=d.$mjListPage.find('select[name="wid"]').val();e.gid=c.find('input[name="gid"]').val();return e},_getListAjaxSuccessOtherSet:function(d){var c=this;desknets.page.groupSelect.editSelectedGroup(c.$mjListPage.find(".jco-sel-items"),d);c.callBase("_getListAjaxSuccessOtherSet",d)},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getListCmd:function(){return desknets.tcardset.PAGE_TCARDMSETUSERWORKSYS},_getListModCmd:function(){return desknets.tcardset.PAGE_TCARDMSETUSERWORKSYSENTRY},_getDelExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETUSERWORKSYSENTRY},_getListModClass:function(){return desknets.tcardset.tcardmsetuserworksysentry},_getListExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETUSERWORKSYS},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardmsetuserworksysentry",desknets.PageInputBase,{_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getAddExecCmd:function(){return desknets.tcardset.CMD_TCARDMSETUSERWORKSYSENTRY},_getModExecCmd:function(){var c=this;return c._getAddExecCmd()},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardsetgen",desknets.PageSet,{$m_frm:null,init:function(){var c=this;c.$m_frm=b("#"+c._getIdPageForm());desknets.timePicker.create(c.$m_frm.find('input[name="starttime"]'),{minuteStep:5,required:true});desknets.timePicker.create(c.$m_frm.find('input[name="endtime"]'),{minuteStep:5,required:true});desknets.timePicker.create(c.$m_frm.find('input[name="daychangetime"]'),{minuteStep:10,required:true});c._setSaveButton();c.callBase("init")},_setSaveButton:function(){var c=this;c.$m_frm.find(".jtcard-btn-save").click(function(d){var e={};e.cmd=c._getConfCmd();e.timeunit=c.$m_frm.find('select[name="timeunit"]').val();e.closedate=c.$m_frm.find('select[name="closedate"]').val();desknets.ajax.rest({url:desknets.getUrl(c._getRestModule()),data:e,success:function(j,f,k){if(neo.isSet(j.syncexec)&&j.syncexec=="1"){var i;var g={};var h=j.message;i=desknets.dialog.confirm(h,function(){c.$m_frm.submit()},g)}else{c.$m_frm.submit()}},})})},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getNextCmd:function(){return desknets.tcardset.PAGE_TCARDSETADMIN},_getConfCmd:function(){return desknets.tcardset.CMD_TCARDSETGENCONF},_getEntryCmd:function(){return desknets.tcardset.CMD_TCARDSETGEN},})})(jQuery);(function(b){desknets.page(desknets.tcardset,"tcardsetmanager",desknets.PageAdmin,{_getSetCondition:function(){return false},_getNextCmd:function(){return desknets.tcardset.PAGE_TCARDSETADMIN}})})(jQuery);desknets.page(desknets.tcardset,"tcardsetsync",desknets.tcardset.PageBatBase,{_checkClickButtonRun:function(){var b=this;if(!b.$mjContent.find('input[name="confirmation"]').attr("checked")){desknets.dialog.alert(desknets.Resource.Message.tcard_sync_noconf,{type:"warn"});return false}return true},_execRuntime:function(c){var b=this;b.$mjContent.find(".co-div-grparea").hide()},_execResult:function(d){var b=this;var e="";var c="";var f="";var g="";var h="";if(neo.isSet(d.resulttime)){f='<SPAN CLASS="tcardad-processing co-colon">'+desknets.Resource.tcard.processing_datetime+'</SPAN><SPAN CLASS="tcardad-processing-val">'+desknets.dateTime.dispDateTime(d.resulttime)+"</SPAN>"}e=(f.length>0)?"<BR />":"";if(neo.isSet(d.resultstatus)){if(d.resultstatus<0){g=e+desknets.Resource.tcard.tcard_total_error}else{g=e+desknets.Resource.tcard.tcard_total_nomal}}e=(g.length>0)?"<BR />":"";if(neo.isSet(d.resultmessage)){h=e+'<span class="co-msg-r">'+d.resultmessage+"</span>"}c=f+g+h;b.$mjContent.find(".co-div-grparea-main").html(c);b.$mjContent.find(".co-div-grparea").show()},_execEnd:function(c){var b=this;b.$mjContent.find('input[name="confirmation"]').removeAttr("checked");b.callBase("_execEnd",c)},_execMessage:function(){return desknets.Resource.Message.tcard_sync_nowexec},_completionMessage:function(){return desknets.Resource.Message.tcard_sync_end},_getRestModule:function(){return desknets.tcardset.MODULE_API_TCARD},_getChkCmd:function(){return desknets.tcardset.CMD_TCARDSETSYNC}});(function(b){desknets.page(desknets.tcardset,"tcardsetmaskaddr",desknets.PageSetList,{_$ipaddarea:null,_initListButton:function(){var c=this;c.callBase("_initListButton");c._$ipaddarea=b(".tcardad-ip-add-area");c._initListAddButton()},_initListAddButton:function(){var c=this;var d="#"+c._getListAddButtonId();b(d).click(function(f){var e={};e[0]=c._$ipaddarea.find('input[name="ip1"]').val();e[1]=c._$ipaddarea.find('input[name="ip2"]').val();e[2]=c._$ipaddarea.find('input[name="ip3"]').val();e[3]=c._$ipaddarea.find('input[name="ip4"]').val();if(!c._checkInputVal(e,desknets.Resource.tcard.input_incorrect)){return false}c._listRowAdd(e,f);c._$ipaddarea.find('input[name="ip1"]').val("");c._$ipaddarea.find('input[name="ip2"]').val("");c._$ipaddarea.find('input[name="ip3"]').val("");c._$ipaddarea.find('input[name="ip4"]').val("")})},_checkInputVal:function(d,f){var c=this;if((d[0].length<=0)&&(d[1].length<=0)&&(d[2].length<=0)&&(d[3].length<=0)){return false}if(d[0].length<=0){desknets.dialog.alert(f,{type:"warn"});return false}var e=false;for(icnt=0;icnt<4;icnt++){if(d[icnt].length<=0){e=true}else{if(e){desknets.dialog.alert(f,{type:"warn"});return false}if(!desknets.validation.isNumber(d[icnt])){desknets.dialog.alert(f,{type:"warn"});return false}}}return true},_listRowAdd:function(f,e){var c=this;var g="";var h=false;var i="";var d=c._$listTable.find('input[name="ip"]');for(icnt=0;icnt<4;icnt++){if(f[icnt].length<=0){f[icnt]="*"}if(icnt==0){g=f[icnt]}else{g+="."+f[icnt]}}for(icnt=0;icnt<d.length;icnt++){if(b(d[icnt]).val()==g){h=true;break}}if(h){return false}i="<tr>";i=i+'<td class="co-chk">';i=i+'<input type="checkbox" name="_id" value="'+g+'" />';i=i+'<input type="hidden" name="ip" value="'+g+'" />';i=i+"</td>";i=i+'<td><span title="'+g+'">'+g+"</span></td>";i=i+"</tr>";c._$listTable.find(".co-tbody-list").append(i);c._listSet();return true},_getListAddButtonId:function(){return"jtcard-list-add"},_getNextCmd:function(){return desknets.tcardset.PAGE_TCARDSETADMIN}})})(jQuery);app.addInitialAction(function(){desknets.tcardset.init()})})(jQuery);