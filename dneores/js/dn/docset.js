/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){desknets.docset={PAGE_DOCSETADMIN:"docsetadmin",PAGE_DOCSETAUTOFILE:"docsetautofile",PAGE_DOCSETAUTOFILEERR:"docsetautofileerr",PAGE_DOCSETAUTOFILEENTRY:"docsetautofileentry",PAGE_DOCSETAUTOMAIL:"docsetautomail",PAGE_DOCSETAUTOMAILERR:"docsetautomailerr",PAGE_DOCSETAUTOMAILENTRY:"docsetautomailentry",CMD_DOCSETFOLDERLIST:"docsetfolderlist",CMD_DOCSETFOLDERLISTCHILD:"docsetfolderlistchild",CMD_DOCSETAUTOFILE:"docsetautofilelist",CMD_DOCSETAUTIFILEENTRY:"docsetcmdautofileentry",CMD_DOCSETAUTOFILEDELETE:"docsetcmdautofiledelete",CMD_DOCSETAUTOFILEHANDLOAD:"docsetcmdautofilehandload",CMD_DOCSETAUTOMAIL:"docsetautomaillist",CMD_DOCSETAUTOMAILENTRY:"docsetcmdautomailentry",CMD_DOCSETAUTOMAILDELETE:"docsetcmdautomaildelete",CMD_DOCSETAUTOMAILHANDLOAD:"docsetcmdautomailhandload",CMD_DOCMSETFOLDERLIST:"docmsetfolderlist",CMD_DOCMSETFOLDERLISTCHILD:"docmsetfolderlistchild",CMD_DOCMSETFOLDERENTRY:"docmsetcmdfolderentry",CMD_DOCMSETFOLDERDEL:"docmsetcmdfolderdel",CMD_DOCMSETFOLDERMOVE:"docmsetfoldermove",CMD_DOCMSETFOLDERMOVEPARENT:"docmsetfolderpmove",CMD_DOCMSETFOLDERACCESSAUTH:"docmsetfolderaccessauth",CMD_DOCMSETINDEXLIST:"docmsetindexlist",CMD_DOCMSETLISTMOVE:"docmsetmove",CMD_DOCMSETLISTDEL:"docmsetcmddelindex",CMD_DOCMSETLISTCONFMOVE:"docmsetconfmove",CMD_DOCMSETLISTCONFDEL:"docmsetconfdel",CMD_DOCMSETENTRY:"docmsetcmdentry",CMD_DOCMSETENTRYSTATUS:"docmsetcmdentrystatus",CMD_DOCMSETREFER:"docmsetcmdrefer",CMD_DOCMSETDEL:"docmsetcmddel",CMD_DOCMSETUNDOEDIT:"docmsetcmdundoedit",CMD_DOCMSETRELATIONLIST:"docmsetcmdrelationlist",CMD_DOCMSETREVLIST:"docmsetrevindexlist",CMD_DOCMSETREVREFER:"docmsetcmdrevrefer",CMD_DOCMSETREVROLLBACK:"docmsetcmdrevrollback",CMD_DOCMSETSEARCH:"docmsetcmdsearch",CMD_DOCMSETSEARCHSTOP:"docmsetsearchstop",CMD_DOCMSETSEARCHLIST:"docmsetsearchlist",CMD_DOCMSETSEARCHLISTDEL:"docmsetcmddelsearchindex",CMD_DOCMSETDELMANAGELIST:"docmsetdelmanagelist",CMD_DOCMSETDELMANAGEREFER:"docmsetcmddelmanagerefer",CMD_DOCMSETDELMANAGEENTRY:"docmsetcmddelmanageentry",CMD_DOCMSETDELMANAGEDELETE:"docmsetcmddelmanagedel",PAGE_DOCMSETFOLDERACCESS:"docmsetfolderaccess",PAGE_DOCMSETINDEX:"docmsetindex",PAGE_DOCMSETENTRY:"docmsetentry",PAGE_DOCMSETREFER:"docmsetrefer",PAGE_DOCMSETACCESS:"docmsetaccess",PAGE_DOCMSETREVINDEX:"docmsetrevindex",PAGE_DOCMSETREVREFER:"docmsetrevrefer",PAGE_DOCMSETSEARCHINDEX:"docmsetsearchindex",PAGE_DOCMSETDELMANAGEINDEX:"docmsetdelmanage",PAGE_DOCMSETDELMANAGEREFER:"docmsetdelmanagerefer",funcID:null,init:function(){var b,c;var d=a("#jco-pv-funcid").val();this.setFuncID(d);desknets.pageframe.setFuncSel(d);desknets.hashobserver.init(desknets.docset);if(d=="docpsetgen"){desknets.docset.docpsetgen.init();desknets.docset.psetsubwin.init()}else{if(d=="docsetgen"){desknets.docset.docsetgen.init()}else{if(d=="docsetadmin"){desknets.docset.docsetgen.init()}else{if(d=="docsetmanager"){desknets.docset.docsetmanager.init()}else{if(d=="docsetautofile"){desknets.docset.docsetautofile.init()}else{if(d=="docsetautomail"){desknets.docset.docsetautomail.init()}else{if(d=="docsetautostatus"){desknets.docset.docsetautostatus.init()}else{if(d=="docmsetindex"){desknets.docset.msetsubwin.init();desknets.docset.docmsetindex.init()}else{if(d=="docmsetdelmanage"){desknets.docset.msetsubwin.init();desknets.docset.docmsetdelmanage.init()}}}}}}}}}return},setFuncID:function(b){this.funcID=b},getFuncID:function(){return this.funcID},getFolderCmd:function(){var b=this;return{restAPI:desknets.doc.MODULE_DOC_API_MAIN,listCMD:b.CMD_DOCMSETFOLDERLIST,listchildCMD:b.CMD_DOCMSETFOLDERLISTCHILD,moveparentCMD:b.CMD_DOCMSETFOLDERMOVEPARENT,movebetweenCMD:b.CMD_DOCMSETFOLDERMOVE}}};desknets.page(desknets.docset,"docpsetgen",desknets.PageSet,{init:function(){var b=this;b.callBase("init");b._createEventPset()},_createEventPset:function(){var b=this;b._setFolderInput()},_setFolderInput:function(){var b=this;var c={};c.module=desknets.doc.MODULE_DOC_API_MAIN;c.cmddef=desknets.doc.CMD_DOCFOLDERLIST;c.cmdchild=desknets.doc.CMD_DOCFOLDERLISTCHILD;desknets.chooserSingleSelFolder.init(a("#jdoc-foldersel-area"),c)},_getNextCmd:function(){return desknets.doc.PAGE_DOCINDEX}});desknets.page(desknets.docset,"psetsubwin",desknets.doc.subwin,{init:function(){var b=this;b.callBase("init");b.setSubWinSelectFolder(false)}});desknets.page(desknets.docset,"docsetadmin",desknets.PageBase,{});desknets.page(desknets.docset,"docsetgen",desknets.PageSet,{_getNextCmd:function(){return desknets.docset.PAGE_DOCSETADMIN}});desknets.page(desknets.docset,"docsetfolderdialog",null,{setUp:function(){var b=this;var c={};c.module=desknets.doc.MODULE_DOC_API_MAIN;c.cmddef=desknets.docset.CMD_DOCMSETFOLDERLIST;c.cmdchild=desknets.docset.CMD_DOCMSETFOLDERLISTCHILD;desknets.chooserSingleSelFolder.init(a("#jdoc-foldersel-area"),c,{keyName:"SID_ASSIGN"})}});desknets.docset.edit={editAccessList:function(f,e,d){var c=this;var b="";if(neo.isSet(f.item)){b=c.editListItems(b,f.item)}if(neo.isSet(e.item)){b=c.editListItems(b,e.item)}if(neo.isSet(d.item)){b=c.editListItems(b,d.item)}return b},editListItems:function(e,b){var d=this;var c=[];var f="";if(b.length>1){c=b}else{c=[b]}if(neo.isSet(e)&&e.length>0){e=e+","}a.each(c,function(g,h){if(g>0){e=e+","}var j=desknets.tmpl.escapeWord(h.val);e=e+j});return e}};desknets.page(desknets.docset,"docsetmanager",desknets.PageAdmin,{_getNextCmd:function(){return desknets.docset.PAGE_DOCSETADMIN}});desknets.page(desknets.docset,"docsetautofile",desknets.PageListBase,{_initListEnd:function(){var b=this;b._initDocStoreErr();b.callBase("_initListEnd");b._setListResultLink()},_initListStartModLink:function(){var b=this;b.$mjTableList.delegate(".jco-modlink","click",function(d){d.preventDefault();var c=a(this).closest("tr").find(".jco-id").val();b.inputModPage(c)})},_setListResultLink:function(){var b=this;b.$mjTableList.delegate(".doc-set-autoerror","click",function(c){c.preventDefault();var d=a(this).closest("tr").find("input.jco-id").val();b._createErrDetailDlg(d)})},_createErrDetailDlg:function(i){var c=this;var e;var f=a(".doc-set-autopop");var g={};function b(k){var j=k[0].html;j=desknets.tmpl.replaceWordHtml(j,"title",c._getErrDetailTitle());f.html(j);var l=f.find(".doc-set-autodate");if(l.length>0){l.text(desknets.dateTime.dispDateTime(l.text()))}c._setErrResultDlg(f)}e=desknets.getUrl(c._getRestModule());var h={cmd:c._getErrResultCmd(),id:i};g["0"]=h;var d=desknets.ajax.arrayToMultiCmdData(g);desknets.ajax.rest({dataType:desknets.ajax.RESTYPE_JSON,url:e,data:d,success:function(k,j,l){if(k[0]["status"]!=desknets.RES_STATUS_SUCCESS){c.mBackCmd=null;c.onError(k[0]["errorno"],k[0]["errormessage"])}else{b(k)}}})},_setErrResultDlg:function(e){var c=this;var b=a("#jco-set-autoerr-detail");var d=desknets.dialog.getDialogOption();var f={buttons:{},dialogClass:"dn-dialog",title:desknets.Resource.doc.auto_error,width:600};if(b.length==0){b=a(".err")}f.buttons[desknets.Resource.CloseButtonLabel]=function(){b.remove();b.dialog("destroy")};a.extend(d,f);b.dialog(d);desknets.dialog.setFirstDialogOpen(b)},_initListEndButton:function(){var b=this;b.callBase("_initListEndButton");b.$mjListPage.find(".doc-set-handload").click(function(c){c.preventDefault();b._listHandLoadSubmit(c)})},_listHandLoadSubmit:function(){var b=this;var c=0;var d="";var e="";b.$mjTableList.find("input[type=checkbox]").each(function(){if(a(this).attr("checked")){c++;return false}});if(c<1){e=b._handLoadNoChkMessage();desknets.dialog.alert(e,{type:"warn"});return}e=b._handLoadConfMessage();b._sethandLoadConfirm(e);return},_handLoadNoChkMessage:function(){return desknets.Resource.Message.docset_autohandload_nocecked},_handLoadConfMessage:function(){var c=this;var b="";if(c.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.docset_autohandload_allconf}else{if(c.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){b=desknets.Resource.Message.docset_autohandload_someconf}else{b=desknets.Resource.Message.docset_autohandload_listconf}}return desknets.tmpl.replaceWordHtml(b,"count",c._getListCheckCount())},_sethandLoadConfirm:function(d){var b=this;var c;c=desknets.dialog.confirm(d,function(){b._listHandLoad(c);return false})},_listHandLoad:function(f){var d=this;var c=[];if(f!=null){desknets.submitform.setDialogDisabled(f)}if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){c=desknets.PRM_VAL_ALLDEL}else{d.$mjListPage.find('input[name="id"]:checked').each(function(){c[c.length]=a(this).val()})}var e={};var b={};b.id=c;b.cmd=d._getHandLoadExecCmd();d._mchkIDs=d._getListAjaxGetId();desknets.ajax.rest({url:desknets.getUrl(d._getRestModule()),data:b,success:function(h,g,i){d._getListAjax(d._getListRow())},complete:function(i,g,h){if(f!=null){desknets.submitform.clearDialogDisabled(f);f.dialog("close")}},traditional:true});return},_replaceListLine:function(c,h,f){var b=this;var g="";if(h==="dir"){g=desknets.escape(f[h]);g=desknets.escapeValue(g);g=g.replace(/\n/g,"&#x0A;");c=desknets.tmpl.replaceWordHtml(c,"dirtitle",g);c=desknets.tmpl.replaceWordLF(c,"dir",f[h])}else{if(h=="date"){if(f.result&&f.result=="1"){var e=desknets.Resource.errorDefaultTitle;var d='<a class="co-msg-r doc-set-autoerror" href="#">{{date}}<span class="doc-ic-autoerror" title="'+e+'">'+e+"</span></a>";c=desknets.tmpl.replaceWordHtml(c,"date",d)}g=desknets.dateTime.dispDateTime(f.date,{type:"list"});c=desknets.tmpl.replaceWordHtml(c,"date",g)}else{c=b.callBase("_replaceListLine",c,h,f)}}return c},_getRestModule:function(){return desknets.doc.MODULE_DOC_API_MAIN},_getListCmd:function(){return desknets.docset.PAGE_DOCSETAUTOFILE},_getListExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOFILE},_getErrResultCmd:function(){return desknets.docset.PAGE_DOCSETAUTOFILEERR},_getListAddCmd:function(){return desknets.docset.PAGE_DOCSETAUTOFILEENTRY},_getListModCmd:function(){return this._getListAddCmd()},_getDelExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOFILEDELETE},_getHandLoadExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOFILEHANDLOAD},_getListEntryClass:function(){return desknets.docset.docsetautofileentry},_getListModClass:function(){return this._getListEntryClass()},_getErrDetailTitle:function(){return desknets.Resource.doc.auto_title_file},_initDocStoreErr:function(){var d;var b="";var c=desknets.pageframe.getTopMsg();d=a("#co-topmsg-text-set").html();if(c.hasClass("alert")==true){b="alert"}else{if(c.hasClass("error")==true){b="error"}else{b="info"}}if(d.length!=0){desknets.pageframe.viewTopMsg(d,b)}}});desknets.page(desknets.docset,"docsetautofileentry",desknets.PageInputBase,{_initHtml:function(c){var b=this;b.callBase("_initHtml",c);desknets.docset.docsetfolderdialog.setUp();b._createEventAutoEntry()},_createEventAutoEntry:function(){var b=this;b.$mjPage.find(".jco-sel-items-root").delegate(".co-selitem-close","click",function(d){var c=a(this).parent();d.preventDefault();c.remove()})},_getRestModule:function(){return desknets.doc.MODULE_DOC_API_MAIN},_getAddExecCmd:function(){return desknets.docset.CMD_DOCSETAUTIFILEENTRY},_getModExecCmd:function(){var b=this;return b._getAddExecCmd()},_getDelExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOFILEDELETE}});desknets.page(desknets.docset,"docsetautomail",desknets.docset.docsetautofile,{_getListCmd:function(){return desknets.docset.PAGE_DOCSETAUTOMAIL},_getListExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOMAIL},_getErrResultCmd:function(){return desknets.docset.PAGE_DOCSETAUTOMAILERR},_getListAddCmd:function(){return desknets.docset.PAGE_DOCSETAUTOMAILENTRY},_getListModCmd:function(){return this._getListAddCmd()},_getDelExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOMAILDELETE},_getHandLoadExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOMAILHANDLOAD},_getListEntryClass:function(){return desknets.docset.docsetautomailentry},_getListModClass:function(){return this._getListEntryClass()},_getErrDetailTitle:function(){return desknets.Resource.doc.auto_title_mail}});desknets.page(desknets.docset,"docsetautomailentry",desknets.docset.docsetautofileentry,{_getAddExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOMAILENTRY},_getModExecCmd:function(){var b=this;return b._getAddExecCmd()},_getDelExecCmd:function(){return desknets.docset.CMD_DOCSETAUTOMAILDELETE}});desknets.page(desknets.docset,"docsetautostatus",desknets.PageSet,{init:function(){var b=this;b._initDocStoreErr();b.callBase("init")},_getNextCmd:function(){return desknets.docset.PAGE_DOCSETADMIN},_initDocStoreErr:function(){var d;var b="";var c=desknets.pageframe.getTopMsg();d=a("#co-topmsg-text-set").html();if(c.hasClass("alert")==true){b="alert"}else{if(c.hasClass("error")==true){b="error"}}if(d.length!=0){desknets.pageframe.viewTopMsg(d,b)}}});desknets.page(desknets.docset,"docmsetindex",desknets.doc.docindex,{initLeftTree:function(){var b=this;desknets.docset.msetfolderlist.init(b.$mjListPage,b._getOptionLeftTree(),b._optTreeGetCmd());b._treeClass=desknets.docset.msetfolderlist},treeUpdateList:function(){desknets.docset.msetfolderlist.updateTreeList()},treeUpdateListWidth:function(){desknets.docset.msetfolderlist._updateItemsWidth()},_isAccessCtrl:function(){return false},_optTreeInitFuncDialog:function(c,b){desknets.docset.msetfolderdialog_entry.init(c,b);desknets.docset.msetfolderdialog_access.init(c,b);desknets.docset.msetfolderdialog_delete.init(c,b)},_optTreeGetCmd:function(){return desknets.docset.getFolderCmd()},_hashUpdatePageView:function(c){var b=this;if(c==desknets.docset.PAGE_DOCMSETREVINDEX){if(b.mhashBackCmd==""||b.mhashIdBack==""){b.mhashBackCmd=b._getListCmd();b.mhashIdBack=b._getIdListPage()}if(a("#jco-m-revlist-container").find(".jco-title").length>0){desknets.docset.docmsetrevindex.mBackCmd=b.mhashBackCmd;desknets.docset.docmsetrevindex.mIdBack=b.mhashIdBack;desknets.docset.docmsetrevindex._getListAjax("0")}else{desknets.docset.docmsetrevindex.initPage(b.mhashBackCmd,b.mhashIdBack)}}else{if(c==desknets.docset.PAGE_DOCMSETREVREFER){desknets.docset.docmsetrevdisp.initPage(desknets.docset.PAGE_DOCMSETREVINDEX,"jco-m-revlist-container")}else{if(c==desknets.docset.PAGE_DOCMSETSEARCHINDEX){desknets.docset.docmsetsearchindex.initPage(desknets.docset.PAGE_DOCMSETINDEX,"jco-m-list-container");b.mhashBackCmd=c;b.mhashIdBack="jco-m-search-container"}}}},_getListCmd:function(){return desknets.docset.PAGE_DOCMSETINDEX},_getListExecCmd:function(){return desknets.docset.CMD_DOCMSETINDEXLIST},_getMoveListConfCmd:function(){return desknets.docset.CMD_DOCMSETLISTCONFMOVE},_getMoveListCmd:function(){return desknets.docset.CMD_DOCMSETLISTMOVE},_getListDispCmd:function(){return desknets.docset.PAGE_DOCMSETREFER},_getListAddCmd:function(){return desknets.docset.PAGE_DOCMSETENTRY},_getDelCmd:function(){return desknets.docset.CMD_DOCMSETLISTCONFDEL},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETLISTDEL},_getRevCmd:function(){return desknets.docset.PAGE_DOCMSETREVINDEX},_getSubWinSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX},_getListEntryClass:function(){return desknets.docset.docmsetentry},_getListDispClass:function(){return desknets.docset.docmsetdisp},_getSubwinClass:function(){return desknets.docset.msetsubwin}});desknets.page(desknets.docset,"msetsubwin",desknets.doc.subwin,{init:function(){var b=this;b.callBase("init");if(desknets.docset.getFuncID()!=desknets.docset.PAGE_DOCMSETINDEX){b.setSubWinSelectFolder(false)}},_getMainCmd:function(){return desknets.docset.PAGE_DOCMSETINDEX},_getSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX}});desknets.page(desknets.docset,"msetfolderlist",desknets.doc.docfolderlist,{init:function(e,d,b){var c=this;e.find(".co-listview-items").removeClass("jco-tree-notcreate-root");c.callBase("init",e,d,b)},_showFolderMenuIcon:function(c,b){var d=this;if(c&&c.parent().data("fid")=="-1"){return}return d.callBase("_showFolderMenuIcon",c,b)},_setButtonErea:function(b){var c=this;var d=a(".co-listview-left-subtitle");if(b&&b.parent().data("fid")=="-1"){c._setButtonDisable(d,true);return}else{c._setButtonDisable(d,false)}return c.callBase("_setButtonErea",b)},_openNodeFirstTime:function(d){var b=this;var c=b._getListParent();b.callBase("_openNodeFirstTime",d);if(c.find("li.co-listview-item").filter(function(){return !a(this).hasClass("co-listview-tree-rootli-nosel")&&!a(this).hasClass("doc-folder-edit")}).length==0){if(b.$_tree.hasClass(b._dmyTreeClass)){return}setTimeout(function(){a(".jco-litview-item-add").trigger("click")},500)}}});desknets.page(desknets.docset,"msetfolderdialog_entry",desknets.doc.docfolderdialog_entry,{_getFolderEntryCmd:function(){return desknets.docset.CMD_DOCMSETFOLDERENTRY}});desknets.page(desknets.docset,"msetfolderdialog_access",desknets.doc.docfolderdialog_access,{_getRequestAccsCmd:function(){return desknets.docset.PAGE_DOCMSETFOLDERACCESS}});desknets.page(desknets.docset,"msetfolderdialog_delete",desknets.doc.docfolderdialog_delete,{_getFolderDelCmd:function(){return desknets.docset.CMD_DOCMSETFOLDERDEL}});desknets.page(desknets.docset,"docmsetentry",desknets.doc.docentry,{_optTreeGetCmd:function(){return desknets.docset.getFolderCmd()},_isAccessCtrl:function(){return false},_getDocumentDialogCmds:function(){var b=this;var c={};c.module=desknets.doc.MODULE_DOC_API_MAIN;c.cmddef=desknets.docset.CMD_DOCMSETFOLDERLIST;c.cmdchild=desknets.docset.CMD_DOCMSETFOLDERLISTCHILD;c.cmddocs=desknets.docset.CMD_DOCMSETINDEXLIST;c.cmddocref=desknets.docset.PAGE_DOCMSETREFER;c.cmddocsearch=desknets.docset.CMD_DOCMSETSEARCHLIST;return c},_getAttachListCmd:function(){return desknets.doc.CMD_DOCMSETLISTATTACH},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETDEL},_getAddExecCmd:function(){return desknets.docset.CMD_DOCMSETENTRY},_getModStatusCmd:function(){return desknets.docset.CMD_DOCMSETENTRYSTATUS},_getSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX}});desknets.page(desknets.docset,"docmsetdisp",desknets.doc.docdisp,{_optTreeGetCmd:function(){return desknets.docset.getFolderCmd()},_getDispExecCmd:function(){return desknets.docset.CMD_DOCMSETREFER},_getDispModCmd:function(){return desknets.docset.PAGE_DOCMSETENTRY},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETDEL},_getSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX},_getDispUndoCmd:function(){return desknets.docset.CMD_DOCMSETUNDOEDIT},_getDispPageCmd:function(){return desknets.docset.PAGE_DOCMSETREFER},_getDispRelationCmd:function(){return desknets.docset.CMD_DOCMSETRELATIONLIST},_initHtmlShareLink:function(){var b=this;b.$mjPage.find("a.jco-disp-share").remove()},_getAttZipCmd:function(){return desknets.doc.CMD_DOCMSETATTZIP},_getAttZipDelCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPDEL},_getAttZipDownLoadCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPDOWN},_getAttZipCancelCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPCANCEL}});desknets.page(desknets.docset,"docmsetrevindex",desknets.doc.docrevindex,{_getListExecCmd:function(){return desknets.docset.CMD_DOCMSETREVLIST},_getListCmd:function(){return desknets.docset.PAGE_DOCMSETREVINDEX},_getListDispCmd:function(){return desknets.docset.PAGE_DOCMSETREVREFER},_getSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX},_getListDispClass:function(){return desknets.docset.docmsetrevdisp}});desknets.page(desknets.docset,"docmsetrevdisp",desknets.doc.docrevdisp,{_setRevErrorBack:function(){var b=this;b.mBackCmd=desknets.docset.PAGE_DOCMSETINDEX;b.mIdBack="jco-m-list-container"},_getDispExecCmd:function(){var b;b=desknets.paramanalyzer.getHashParams();if(b.revid){return desknets.docset.CMD_DOCMSETREVREFER}else{return desknets.docset.CMD_DOCMSETREFER}},_getAttZipCmd:function(){return desknets.doc.CMD_DOCMSETATTZIP},_getAttZipDelCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPDEL},_getAttZipDownLoadCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPDOWN},_getAttZipCancelCmd:function(){return desknets.doc.CMD_DOCMSETATTZIPCANCEL}});desknets.page(desknets.docset,"docmsetsearchindex",desknets.doc.docsearchindex,{_listLine:function(b,c){return desknets.docset.docmsetindex._listLine(b,c)},_replaceListLine:function(b,d,c){return desknets.docset.docmsetindex._replaceListLine(b,d,c)},_getListCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX},_getListExecCmd:function(){return desknets.docset.CMD_DOCMSETSEARCHLIST},_getListDispCmd:function(){return desknets.docset.PAGE_DOCMSETREFER},_getListAddCmd:function(){return desknets.docset.PAGE_DOCMSETENTRY},_getDelCmd:function(){return""},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETSEARCHLISTDEL},_getRevCmd:function(){return desknets.docset.PAGE_DOCMSETREVINDEX},_getListModClass:function(){return desknets.docset.docmsetentry},_getSubWinSearchCmd:function(){return desknets.docset.PAGE_DOCMSETSEARCHINDEX},_getListDispClass:function(){return desknets.docset.docmsetdisp}});desknets.page(desknets.docset,"docmsetdelmanage",desknets.PageListBase,{_$delDialog:null,_initSet:function(){var b=this;b.callBase("_initSet");b._createEventDelManager()},_createEventDelManager:function(){var b=this;b.$mjListPage.find(".doc-mset-delmanagepass").change(function(){b.$mjListPage.find(".jco-back-page-data").find('input[name="pass"]').val(a(this).val());b._listPage("0")})},_initListStartModLink:function(){var b=this;b.$mjTableList.delegate(".jco-modlink","click",function(f){var c=a(this);var e=c.closest("tr");f.preventDefault();var d=e.find(".jco-id").val();b.inputDispPage(d)})},_getListAjaxSuccessEnd:function(){var c=this;var d={};var e="";var b=["0","-1","1","2","3","6","12","24","36"];c.callBase("_getListAjaxSuccessEnd");d=desknets.paramanalyzer.getHashParams();e=d.pass;if(a.inArray(e,b)<0){e="0"}c.$mjListPage.find(".doc-mset-delmanagepass").val(e)},_replaceListLine:function(c,f,d){var b=this;var e="";if(f==="updtime"){e=desknets.dateTime.dispDateTime(d.updtime,{type:"list"});c=desknets.tmpl.replaceWordHtml(c,"updtime",e)}else{if(f=="stodate"){e=desknets.dateTime.dispDateTime(d.stodate,{type:"list"});c=desknets.tmpl.replaceWordHtml(c,"stodate",e)}else{c=b.callBase("_replaceListLine",c,f,d)}}return c},_listDelMulti:function(d,i){var c=this;if(d!=desknets.PRM_VAL_ALLDEL){c.callBase("_listDelMulti",d,i);return}var g={};var h={};var e={};var b={};var f={type:"message",extraMessage:desknets.Resource.Message.com_dialog_execaddmsg,extraClass:"co-loading-dialog"};c._$delDialog=desknets.dialog.alert(c._deleteExecMessage(),f);desknets.submitform.setDialogDisabled(c._$delDialog);desknets.submitform.clearDialogDisabled(i);i.dialog("close");b=c._getDelAddPrm();b[c._getIDName()]=d;b.cmd=c._getDelExecCmd();h=c._getDelExecCheckPrm();g["0"]=b;g["1"]=h;e=a.extend({},c._getListAjaxOptionsExec(null));c._sendRequestAjax(desknets.ajax.REQTYPE_MULTI,desknets.ajax.RESTYPE_JSON,g,e);return},_deleteExecMessage:function(){var b=desknets.Resource.Message.com_dialog_execmsg;b=desknets.tmpl.replaceWordHtml(b,"msg",desknets.Resource.Message.docset_delmanage_delall_nowexec);return b},_getListAjaxSuccess:function(c){var b=this;if(c.execflg){b._checkDelExec(c);return}b.callBase("_getListAjaxSuccess",c)},_checkDelExec:function(c){var b=this;if(c.execflg&&c.execflg=="1"){setTimeout(function(){b._ajaxCheckDelExec()},2000)}else{b.setNotChangeHash(false);b.setConnecting(false);b._getListAjax(b._getListRow())}},_ajaxCheckDelExec:function(){var b=this;var d={};var c=[];d=b._getDelExecCheckPrm();c.success=function(f,e,g){b._checkDelExec(f)};b._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,d,c)},_getDelAddPrm:function(){var b=this;var d={};var c;c=b.$mjListPage.find('select[name="pass"]').val();if(neo.isSet(c)){d.pass=c}return d},_getDelExecCheckPrm:function(){var b=this;var c={};c.cmd=b._getDelExecCmd();c.execcheck="1";return c},_getListAjaxOptions:function(){var b=this;var c=b.callBase("_getListAjaxOptions");c.complete=function(f,d,e){if(b._$delDialog!=null){desknets.submitform.clearDialogDisabled(b._$delDialog);b._$delDialog.dialog("close");b._$delDialog=null}};return c},_getRestModule:function(){return desknets.doc.MODULE_DOC_API_MAIN},_getListExecCmd:function(){return desknets.docset.CMD_DOCMSETDELMANAGELIST},_getListCmd:function(){return desknets.docset.PAGE_DOCMSETDELMANAGEINDEX},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETDELMANAGEDELETE},_getListDispCmd:function(){return desknets.docset.PAGE_DOCMSETDELMANAGEREFER},_getListDispClass:function(){return desknets.docset.docmsetdelmanagedisp}});desknets.page(desknets.docset,"docmsetdelmanagedisp",desknets.PageDispBase,{_initHtml:function(c){var b=this;b.callBase("_initHtml",c);b.$mjPage.find('input[name="stodate"]').val(neo.dateTime.format("yyyy-MM-dd",neo.dateTime.parse(a("#doc-stodate").val())));desknets.htmlparts.setUpForm(a("#dispfrm"));a("#doc-sel-stodate").change(function(){a("#doc-sel-stodate option:selected").each(function(){var d=a(this).val();var e=a("#doc-stodate");if(d=="1"){if(e.hasClass("ui-invalid")){a.datepicker._clearDate(e)}e.hide()}else{e.show()}})})},_validateDateStodate:function(){var b=this;var d=a("#dispfrm").find(".ui-invalid").eq(0);if(d.length>0){var c=d.attr("name")||d.data("name");desknets.validation.showError(d,b._getErrorPlace(c));return false}return true},_inputButton:function(){var b=this;b.callBase("_inputButton");b.$mjPage.find(".doc-mset-delmanage-entry").click(function(c){if(b._validateDateStodate()){b._inputDocManageEntry()}})},_inputDocManageEntry:function(){var b=this;var e={cmd:b._getModExecCmd(),nolimit:b.$mjPage.find('select[name="nolimit"]').val(),stodate:b.$mjPage.find('input[name="stodate"]').val()};var c=desknets.getUrl(b._getRestModule());var d=desknets.paramanalyzer.getHashParams();e.id=d.id;desknets.submitform.setDisabled(a("#dispfrm"));desknets.ajax.rest({url:c,data:e,success:function(g,f,h){b.dispBackListPage()},complete:function(){desknets.submitform.clearDisabled(a("#dispfrm"))}})},_getDispExecCmd:function(){return desknets.docset.CMD_DOCMSETDELMANAGEREFER},_getModExecCmd:function(){return desknets.docset.CMD_DOCMSETDELMANAGEENTRY},_getDelExecCmd:function(){return desknets.docset.CMD_DOCMSETDELMANAGEDELETE},_getRestModule:function(){return desknets.doc.MODULE_DOC_API_MAIN}});app.addInitialAction(function(){desknets.docset.init()})})(jQuery);