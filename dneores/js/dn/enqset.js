/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){(function(b){desknets.enqset={PAGE_ENQINDEX:"enqindex",PAGE_ENQMSETINDEX:"enqmsetenq",PAGE_ENQMSET_ANSWER:"enqmsetanswer",PAGE_ENQMSET_ANSWERS:"enqmsetanswers",PAGE_ENQMSET_ANSWERSCSV:"enqmsetanswerscsv",PAGE_ENQMSETSUBJECTLIST:"enqmsetsubjectlist",PAGE_ENQMSETFORMATLIST:"enqmsetformatlist",PAGE_ENQSETADMIN:"enqsetadmin",PAGE_ENQSETGEN:"enqsetgen",PAGE_ENQSETMANAGER:"enqsetmanager",CMD_ENQMSETINDEX:"enqmsetcmdenq",CMD_ENQMSETSEARCHINDEX:"enqmsetcmdsrchindex",CMD_ENQMSETDISPPAGE:"enqcmddisppage",CMD_ENQMSET_DISP:"enqmsetcmddisp",CMD_ENQMSET_ROUTE:"enqmsetcmdroute",CMD_ENQMSET_FINISHCONF:"enqmsetcmdfinishconf",CMD_ENQMSET_FINISH:"enqmsetcmdfinish",CMD_ENQMSET_DELCONF:"enqmsetcmddelconf",CMD_ENQMSET_DEL:"enqmsetcmddel",CMD_ENQPSETFORMATENTRYPAGE:"enqpsetcmdformatentrypage",CMD_ENQPSETFORMATENTRY:"enqpsetcmdformatentry",CMD_ENQPSETFORMATDEL:"enqpsetcmdformatdel",CMD_ENQPSETFORMATMOVE:"enqpsetcmdformatmove",CMD_ENQPSETFORMATIMPORT:"enqpsetcmdformatimport",CMD_ENQPSETFORMATEXPORT:"enqpsetcmdformatexport",CMD_ENQMSETFORMATENTRYPAGE:"enqmsetcmdformatentrypage",CMD_ENQMSETFORMATENTRY:"enqmsetcmdformatentry",CMD_ENQMSETFORMATDEL:"enqmsetcmdformatdel",CMD_ENQMSETFORMATMOVE:"enqmsetcmdformatmove",CMD_ENQMSETFORMATIMPORT:"enqmsetcmdformatimport",CMD_ENQMSETFORMATEXPORT:"enqmsetcmdformatexport",CMD_ENQPSETROUTEENTRYPAGE:"enqpsetcmdrouteentrypage",CMD_ENQPSETROUTEENTRY:"enqpsetcmdrouteentry",CMD_ENQPSETROUTEDEL:"enqpsetcmdroutedel",CMD_ENQPSETROUTEMOVE:"enqpsetcmdroutemove",CMD_ENQMSETROUTEENTRYPAGE:"enqmsetcmdrouteentrypage",CMD_ENQMSETROUTEENTRY:"enqmsetcmdrouteentry",CMD_ENQMSETROUTEDEL:"enqmsetcmdroutedel",CMD_ENQMSETROUTEMOVE:"enqmsetcmdroutemove",CMD_ENQMSETSEARCHPAGE:"enqmsetcmdsearchindexpage",CMD_ENQSETGEN:"enqsetcmdgen",init:function(){var c=b("#jco-pv-funcid").val();desknets.pageframe.setFuncSel(c);desknets.hashobserver.init(desknets.enqset);if(c in desknets.enqset){desknets.enqset[c].init()}if(c.match("enqmset")){desknets.enqset.subwin.init()}else{if(c.match("enqpset")){desknets.enq.subwin.init()}}}}})(jQuery);(function(b){desknets.page(desknets.enqset,"subwin",desknets.enq.subwin,{_getSearchPrm:function(c){c=this.callBase("_getSearchPrm",c);return c},_getMainCmd:function(){return desknets.enqset.CMD_ENQMSETSEARCHINDEX},_getSearchCmd:function(){return desknets.enqset.CMD_ENQMSETSEARCHPAGE},banpei:null})})(jQuery);(function(b){desknets.page(desknets.enqset,"FormatPreviewDialog",null,{_dialogId:"jenq-format-preview-dialog",_inputFieldName:"format-id",$dialog:null,options:{},_options:{onOk:null,onCancel:null},_htmlPreview:null,_TMPL_DIALOG:"enq/enq.formatPreviewDialog.html",_DIALOG_TITLE:desknets.Resource.preview,init:function(c){this.destroy();this.options=b.extend({},this._options,c)},destroy:function(){if(this.$dialog){this.$dialog.dialog("destroy");this.$dialog=null}b("#"+this._dialogId).remove();this._htmlPreview=null;this.options={}},open:function(c){this._htmlPreview=c;if(this.$dialog==null){this.$dialog=b("<div />").attr("id",this._dialogId).appendTo(document.body);desknets.tmpl.load(this.$dialog,this._TMPL_DIALOG,b.proxy(function(){desknets.dialog.setUp(this.$dialog,this._getDialogOptions());this._buildContents();this.$dialog.dialog("open");desknets.dialog.setFirstDialogOpen(this.$dialog)},this),{})}else{this.$dialog.dialog("open").find('input[type="button"]').blur()}return this.$dialog},_getDialogOptions:function(){var e={};e[desknets.Resource.CloseButtonLabel]=b.proxy(this._onClickCancel,this);var d=desknets.dialog.getDialogOption();var c={buttons:e,dialogClass:"dn-dialog",resizable:false,draggable:true,title:this._DIALOG_TITLE,width:"741",height:"auto",open:b.proxy(this._onOpen,this)};b.extend(d,c);return d},_buildContents:function(){},_updatePreview:function(d){var c=this;this.$dialog.find(".form-format-preview-in").empty().html(d||"<BR>");c.$dialog.dialog("option","height","auto");setTimeout(function(){var e=c.$dialog.dialog("widget").height();c.$dialog.dialog("option","height",e)},0)},_onClickCancel:function(c){if(this.options.onCancel){this.options.onCancel(c)}this._htmlPreview=null;this._updatePreview(null);this.$dialog.dialog("close")},_onOpen:function(c){this._updatePreview(this._htmlPreview)},banpei:null})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetusergen",desknets.PageSet,{_getNextCmd:function(){return desknets.enqset.PAGE_ENQINDEX}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetformatlist",desknets.PageInputList,{_listLine:function(c,d){d.formcnt=d.formcnt==""?desknets.Resource.enq.setnot:"";return this.callBase("_listLine",c,d)},_replaceListLine:function(d,f,e){var c=this;if(f=="id"){d=desknets.tmpl.replaceWordHtml(d,"draft","")}d=c.callBase("_replaceListLine",d,f,e);return d},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){var c=this;return c._getListExecCmd()},_getListExecCmd:function(){return desknets.enq.CMD_ENQUSERFORMATLIST},_getListAddCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATENTRYPAGE},_getListModCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATENTRYPAGE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATDEL},_getMoveExecCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATMOVE},_getListEntryClass:function(){return desknets.enqset.enqpsetformatentry},_getListModClass:function(){return desknets.enqset.enqpsetformatentry}})})(jQuery);desknets.page(desknets.enqset,"enqpsetformatentry",desknets.enq.EnqInputBase,{_inputButton:function(){var b=this;b.callBase("_inputButton");this._initCopyButton()},_initCopyButton:function(){var b=this;this.$mjPage.find(".jenq-input-copy").click(function(){var c=desknets.paramanalyzer.getHashParams();desknets.paramanalyzer.setLocationHash({cmd:c.cmd,copyid:c.id})})},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATDEL},_getAddExecCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATENTRY},getTempName:function(){return"enqformatpsetentry"},});(function(b){desknets.page(desknets.enqset,"enqpsetformatimport",desknets.PageImport,{init:function(){var c=this;c.callBase("init");c._initHelpLink()},_initHelpLink:function(){var c=this;b("#jform-imp-help-contents").delegate("a.jform-imp-help","click",function(d){d.preventDefault();c._onClickHelpLink(d)})},_onClickHelpLink:function(e){var d=this;var f=b(e.target);var c=f.attr("data-id");desknets.form.ImpHelpDialog.open(c)},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getAjaxFormOption:function(){var c=this;var d={};d=this.callBase("_getAjaxFormOption");d.errorconvmsg=function(e,f){var g=desknets.getErrField(e,f);g.fieldname=c._getErrorPlace(g.fieldid);return desknets.getErrConvMsg(g)};return d},makeFileInput:function(){var c=this;c.callBase("makeFileInput");b('#frm input[name="Name"]').val("")}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetformatexport",desknets.PageInputList,{_initSet:function(){var d=this;var c,e={};this.callBase("_initSet");c=this.$mjListPage.find("form");c.find(":hidden[name=cmd]").val(d._getExportExecCmd());e={};e["$control"]=this.$mjListPage.find(".jco-export-config-control");e.useCharSep=true;desknets.exportConfigControl.init(e);this.$mjListPage.find("form").submit(b.proxy(this._onSubmitForm,this));this.$mjListPage.find("form").delegate("a.jenq-format-name","click",b.proxy(this._onClickFormatName,this))},_onSubmitForm:function(c){if(this.$mjListPage.find(":radio[name=id]:checked").length<=0){desknets.dialog.alert(desknets.Resource.Message.enq_formatnoselect,{type:"warn"});return false}},_onClickFormatName:function(c){c.preventDefault();var d=b(c.target).closest("tr").find(".jco-id").val();desknets.enq.ajaxUserFormatGet(d,function(e){desknets.enqset.FormatPreviewDialog.init();desknets.enqset.FormatPreviewDialog.open(e.html)})},_replaceListLine:function(d,f,e){var c=this;if(f=="id"){d=desknets.tmpl.replaceWordHtml(d,"draft","")}d=c.callBase("_replaceListLine",d,f,e);return d},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){return desknets.enq.CMD_ENQUSERFORMATLIST},_getListExecCmd:function(){return desknets.enq.CMD_ENQUSERFORMATLIST},_getExportExecCmd:function(){return desknets.enqset.CMD_ENQPSETFORMATEXPORT},_getListEntryClass:function(){return null},_getListModClass:function(){return null}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetroutelist",desknets.PageInputList,{_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){return desknets.enq.CMD_ENQUSERROUTELIST},_getListExecCmd:function(){return desknets.enq.CMD_ENQUSERROUTELIST},_getListAddCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEENTRYPAGE},_getListModCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEENTRYPAGE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEDEL},_getMoveExecCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEMOVE},_getListEntryClass:function(){return desknets.enqset.enqpsetrouteentry},_getListModClass:function(){return desknets.enqset.enqpsetrouteentry}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetrouteentry",desknets.PageInputBase,{_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEDEL},_getAddExecCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEENTRY},_getModExecCmd:function(){return desknets.enqset.CMD_ENQPSETROUTEENTRY},_initSet:function(){var c=this;c._initUserSelectDialog();c.callBase("_initSet")},_initUserSelectDialog:function(){var e=this;var g=b(".jenq-sel-items-area");var c=g.find("table").find("thead").remove().html();var f={chooseTarget:["user"],allGroup:"choosable",choosePrivateGroup:"choosable",unassignGroup:"choosable"};var d=desknets.chooser.getItemsFromElement(g,{itemFilter:function(j,h){var i=h.closest("tr").find(".jenq-route-grp").html();cGroupTitle=desknets.stripTags(h.closest("tr").find(".jenq-route-grp").html());cGroupTitle=desknets.escapeValue(cGroupTitle);j.summary=i;j.summaryAsText=cGroupTitle;return j}});desknets.chooser.setUpEntry(g,d,{dialogID:"jenq-user-sel",initCreate:true,template:c,dialogOptions:f,extraVars:{user:{keyName:"id"}}})},_getSelectedItems:function(){var d=this;var c=[];var e="";b(".jco-sel-items").children().each(function(){var f=b(this);e="user";c.push({id:f.find(".jenq-route-id").val(),type:e,name:f.find(".jenq-route-name").text(),description:f.find(".jenq-route-grp").html()})});return c},_formObserveSave:function(d,c){this.callBase("_formObserveSave",d,c);c.cmd=""}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqpsetusernotice",desknets.PageSet,{init:function(){var c=this;c.callBase("init");c._initAlertMessage()},_initAlertMessage:function(){var c="alert";var d=b("#jenq-topmsg").html();if(d.length!=0){desknets.pageframe.viewTopMsg(d,c)}},_getNextCmd:function(){return desknets.enqset.PAGE_ENQINDEX}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetenq",desknets.PageListBase,{_cmdNo:null,_initListEnd:function(){var c=this;c.callBase("_initListEnd");c.$mjListPage.find(".jco-list-del-submit").unbind("click").click(function(d){c._onClickDel(d)});c.$mjListPage.find(".jco-list-finish-submit").click(function(d){c._onClickFinish(d)});c.$mjListPage.find("select[name=sts]").change(function(d){c._onChangeStatusCombox(d)});this.$mjListPage.find(".jco-list-del-submit").show();this.$mjListPage.find(".jco-list-finish-submit").show()},_getListAjaxSuccessEnd:function(){this.callBase("_getListAjaxSuccessEnd");var c=this.$mjListPage.find(".jco-back-page-data").find("input[name=sts]").val();this.$mjListPage.find("select[name=sts]").val(c)},_onChangeStatusCombox:function(f){var c=this.$mjListPage.find("select[name=sts]").val();var d=desknets.getInputDataToObj(this.$mjListPage.find(".jco-back-page-data"));d.sts=c;d.row="0";this._setLocationHash(d);return false},_getDelAddPrm:function(){var d={};if(this._cmdNo==desknets.enqset.CMD_ENQMSET_DEL){var c=this.getListParamToObj();d.lcmd=c.cmd;d.sts=c.sts}else{if(this._cmdNo==desknets.enqset.CMD_ENQMSET_FINISH){if(this.$mjListPage.find(".co-chk-cnt-all:not(:hidden)").length>0){var c=this.getListParamToObj();d.lcmd=c.cmd;d.sts=c.sts}}}return d},_delNoChkMessage:function(){if(this._cmdNo==desknets.enqset.CMD_ENQMSET_FINISH){return desknets.Resource.Message.enq_finish_nochecked}else{return this.callBase("_delNoChkMessage")}},_onClickDel:function(c){this._cmdNo=desknets.enqset.CMD_ENQMSET_DEL;this._listDelSubmit(c)},_onClickFinish:function(c){this._cmdNo=desknets.enqset.CMD_ENQMSET_FINISH;this._listDelSubmit(c)},_listLine:function(e,f){var d=this;var c="";if(typeof f=="object"){var h;var g="";if(f.unread==="1"){g+="enq-tr-unread"}e=desknets.tmpl.replaceWordHtml(e,"enq-tr",g)}e=d.callBase("_listLine",e,f);return e},_replaceListLine:function(e,g,f){var d=this;var c;c=desknets.enq.replaceEnqListLine(e,g,f);if(c){return c}return d.callBase("_replaceListLine",e,g,f)},_onClickSubject:function(d){var c=b(d.target).closest("tr").find(".jco-id").val();switch(d.type){case"click":case"dblclick":this.inputDispPage(c);break;default:break}},_initListStartModLink:function(){var d=this;var e=b.proxy(this._onClickSubject,this);var c=b.proxy(this._onClickSubject,this);d.$mjTableList.dnclick(".jco-modlink",e,c)},_hashUpdatePageView:function(d){var c=this;if(d==desknets.enqset.CMD_ENQMSETSEARCHPAGE){desknets.enqset.searchindex.initPage(desknets.enqset.PAGE_ENQMSETINDEX,"jco-m-list-container");c.mhashBackErrCmd=c.mhashBackCmd;c.mhashIdErrBack=c.mhashIdBack;c.mhashBackCmd=d;c.mhashIdBack="jco-m-search-container"}else{if(d==desknets.enq.CMD_ENQSEARCHDISPPAGE){desknets.enqset.enqdisp.initPage(desknets.enqset.CMD_ENQMSETSEARCHPAGE,"jco-m-search-container")}}},_getSizeHideWidth:function(){return"100"},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){return desknets.enqset.PAGE_ENQMSETINDEX},_getListExecCmd:function(){return desknets.enqset.CMD_ENQMSETINDEX},_getListDispCmd:function(){return desknets.enqset.CMD_ENQMSETDISPPAGE},_getDelExecCmd:function(){return this._cmdNo},_getDelCmd:function(){if(this._cmdNo==desknets.enqset.CMD_ENQMSET_FINISH){return desknets.enqset.CMD_ENQMSET_FINISHCONF}return""},_getListDispClass:function(){return desknets.enqset.enqdisp},banpei:null})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqdisp",desknets.PageDispBase,{_initGetHtml:function(){var c=desknets.paramanalyzer.getPageCmd();this._getDispComponent().init({"$page":this.$mjPage,onCreate:b.proxy(function(){this._initSet()},this),onResize:b.proxy(function(){},this),onUpdData:b.proxy(function(){desknets.enqset.searchindex._onSrchExec=true},this),onExit:b.proxy(function(){this.dispBackListPage()},this),search:(c==desknets.enq.CMD_ENQSEARCHDISPPAGE),manage:true})},_initSet:function(c){this.callBase("_initSet",null)},_getDispComponent:function(){return desknets.enq.enqdispCompo},banpei:null})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetsubjectlist",desknets.PageInputList,{_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){return desknets.enqset.CMD_ENQSUBJECTLIST},_getListExecCmd:function(){return desknets.enqset.CMD_ENQSUBJECTLIST},_getListAddCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTENTRYPAGE},_getListModCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTENTRYPAGE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTDEL},_getMoveExecCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTMOVE},_getListEntryClass:function(){return desknets.enqset.enqmsetsubjectentry},_getListModClass:function(){return desknets.enqset.enqmsetsubjectentry}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetsubjectentry",desknets.PageInputBase,{_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTDEL},_getAddExecCmd:function(){return desknets.enqset.CMD_ENQMSETSUBJECTENTRY},_getModExecCmd:function(){var c=this;return c._getAddExecCmd()}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetformatlist",desknets.PageInputList,{_initSet:function(){var c=this;c.$mjListPage.find("#jenq-form-legend").show();c.callBase("_initSet")},_listLine:function(c,d){d.formcnt=d.formcnt==""?desknets.Resource.enq.setnot:"";return this.callBase("_listLine",c,d)},_replaceListLine:function(e,g,f){var d=this;if(g=="draft"){var c="";if(f[g]=="1"){c="enq-msg-warning"}e=desknets.tmpl.replaceWordHtml(e,g,c)}else{e=d.callBase("_replaceListLine",e,g,f)}return e},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){var c=this;return c._getListExecCmd()},_getListExecCmd:function(){return desknets.enq.CMD_ENQFORMATLIST},_getListAddCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATENTRYPAGE},_getListModCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATENTRYPAGE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATDEL},_getMoveExecCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATMOVE},_getListEntryClass:function(){return desknets.enqset.enqmsetformatentry},_getListModClass:function(){return desknets.enqset.enqmsetformatentry}})})(jQuery);desknets.page(desknets.enqset,"enqmsetformatentry",desknets.enq.EnqInputBase,{_inputButton:function(){var b=this;b.callBase("_inputButton");this._initCopyButton()},_initCopyButton:function(){var b=this;this.$mjPage.find(".jenq-input-copy").click(function(){var c=desknets.paramanalyzer.getHashParams();desknets.paramanalyzer.setLocationHash({cmd:c.cmd,copyid:c.id})})},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATDEL},_getAddExecCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATENTRY},getTempName:function(){return"enqformatmsetentry"},_initSet:function(d){var c=this;var b=c.$mjPage.find("form[name=inputfrm]");if(b.find('[name="id"]').val()!=""&&b.find('[name="draft"]').val()=="1"){c.$mjPage.find(".enq-warning-area").show()}c.callBase("_initSet",d)}});(function(b){desknets.page(desknets.enqset,"enqmsetroutelist",desknets.enqset.enqpsetroutelist,{_getListCmd:function(){return desknets.enq.CMD_ENQROUTELIST},_getListExecCmd:function(){return desknets.enq.CMD_ENQROUTELIST},_getListAddCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEENTRYPAGE},_getListModCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEENTRYPAGE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEDEL},_getMoveExecCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEMOVE},_getListEntryClass:function(){return desknets.enqset.enqmsetrouteentry},_getListModClass:function(){return desknets.enqset.enqmsetrouteentry}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetrouteentry",desknets.enqset.enqpsetrouteentry,{_initUserSelectDialog:function(){var e=this;var g=b(".jenq-sel-items-area");var c=g.find("table").find("thead").remove().html();var f={chooseTarget:["user"],allGroup:"choosable",unassignGroup:"choosable"};var d=desknets.chooser.getItemsFromElement(g,{itemFilter:function(j,h){var i=h.closest("tr").find(".jenq-route-grp").html();cGroupTitle=desknets.stripTags(h.closest("tr").find(".jenq-route-grp").html());cGroupTitle=desknets.escapeValue(cGroupTitle);j.summary=i;j.summaryAsText=cGroupTitle;return j}});desknets.chooser.setUpEntry(g,d,{dialogID:"jenq-user-sel",initCreate:true,template:c,dialogOptions:f,extraVars:{user:{keyName:"id"}}})},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getDelExecCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEDEL},_getAddExecCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEENTRY},_getModExecCmd:function(){return desknets.enqset.CMD_ENQMSETROUTEENTRY}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetformatimport",desknets.enqset.enqpsetformatimport,{_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetformatexport",desknets.PageInputList,{_initSet:function(){var d=this;var c,e={};this.callBase("_initSet");c=this.$mjListPage.find("form");c.find(":hidden[name=cmd]").val(d._getExportExecCmd());e={};e["$control"]=this.$mjListPage.find(".jco-export-config-control");e.useCharSep=true;desknets.exportConfigControl.init(e);this.$mjListPage.find("form").submit(b.proxy(this._onSubmitForm,this));this.$mjListPage.find("form").delegate("a.jenq-format-name","click",b.proxy(this._onClickFormatName,this));this.$mjListPage.find("#jenq-form-legend").show()},_onSubmitForm:function(c){if(this.$mjListPage.find(":radio[name=id]:checked").length<=0){desknets.dialog.alert(desknets.Resource.Message.enq_formatnoselect,{type:"warn"});return false}},_onClickFormatName:function(c){c.preventDefault();var d=b(c.target).closest("tr").find(".jco-id").val();desknets.enq.ajaxFormatGet(d,function(e){desknets.enqset.FormatPreviewDialog.init();desknets.enqset.FormatPreviewDialog.open(e.html)})},_replaceListLine:function(e,g,f){var d=this;if(g=="draft"){var c="";if(f[g]=="1"){c="enq-msg-warning"}e=desknets.tmpl.replaceWordHtml(e,g,c)}else{e=d.callBase("_replaceListLine",e,g,f)}return e},_getRestModule:function(){return desknets.enq.MODULE_API_ENQUETE},_getListCmd:function(){return desknets.enq.CMD_ENQFORMATLIST},_getListExecCmd:function(){return desknets.enq.CMD_ENQFORMATLIST},_getExportExecCmd:function(){return desknets.enqset.CMD_ENQMSETFORMATEXPORT},_getListEntryClass:function(){return null},_getListModClass:function(){return null}})})(jQuery);desknets.page(desknets.enqset,"searchindex",desknets.enq.searchindex,{_getListCmd:function(){return desknets.enqset.CMD_ENQMSETSEARCHPAGE},_getListExecCmd:function(){return desknets.enqset.CMD_ENQMSETSEARCHINDEX},_getListDispCmd:function(){return desknets.enqset.CMD_ENQMSETDISPPAGE},_getDelCmd:function(){if(this._cmdNo==desknets.enq.CMD_ENQFINISH){return desknets.enqset.CMD_ENQMSET_FINISHCONF}else{if(this._cmdNo==desknets.enq.CMD_ENQDEL){return desknets.enqset.CMD_ENQMSET_DELCONF}}return""},_getDelExecCmd:function(){if(this._cmdNo==desknets.enq.CMD_ENQFINISH){return desknets.enqset.CMD_ENQMSET_FINISH}else{if(this._cmdNo==desknets.enq.CMD_ENQDEL){return desknets.enqset.CMD_ENQMSET_DEL}}},banpei:null});(function(b){desknets.page(desknets.enqset,"enqsetgen",desknets.PageSet,{_getNextCmd:function(){return desknets.enqset.PAGE_ENQSETADMIN},_getAjaxFormOption:function(){var c=this;var d={};d=c.callBase("_getAjaxFormOption");d.validation=function(e){var f=c.checkInput(e);if(neo.isSet(f,{blank:false})){desknets.dialog.alert(f);return false}return true};return d},checkInput:function(d){var c=this;var e=null;d.find(".jco-validation-number").each(function(){if(!desknets.validation.isNumber(b(this).val())){var f={};f.msg=desknets.Resource.Message.com_invalid_number;f.fieldid=b(this).attr("name");f.fieldname=c._getErrorPlace(f.fieldid);e=desknets.getErrConvMsg(f);return false}});return e}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqsetmanager",desknets.PageAdmin,{_getSetCondition:function(){return true},_getNextCmd:function(){return desknets.enqset.PAGE_ENQSETADMIN}})})(jQuery);(function(b){desknets.page(desknets.enqset,"enqmsetanswer",desknets.enq.enqanswer,{_getAnswerDetailCmd:function(){return desknets.enqset.CMD_ENQMSET_DISP},banpein:null})})(jQuery);app.addInitialAction(function(){desknets.enqset.init()})})(jQuery);