/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){(function(b){desknets.mailset={MODULE_API_MAIL:"zrmail",PAGE_MAILMSETUSERACCOUNT:"mailmsetuseraccount",CMD_MAILMSETUSERACCOUNT:"mailmsetcmduseraccount",PAGE_MAILMSETACCOUNTS:"mailmsetaccounts",CMD_MAILMSETACCOUNTS:"mailmsetcmdaccounts",PAGE_MAILMSETACCOUNTENTRY:"mailmsetaccountentry",CMD_MAILMSETACCOUNTENTRY:"mailmsetcmdaccountentry",CMD_MAILMSETACCOUNTDEL:"mailmsetcmddelaccount",CMD_MAILMSETACCOUNTUSE:"mailmsetcmduseaccount",CMD_MAILMSETACCOUNTDEF:"mailmsetcmddefaccount",CMD_MAILMSETACCOUNTMAILUSE:"mailmsetcmdusemail",PAGE_MAILMSETACCOUNTIMP:"mailmsetaccimp",CMD_MAILMSETACCOUNTIMP:"mailmsetcmdaccimp",PAGE_MAILMSETACCOUNTEXP:"mailmsetaccexp",CMD_MAILMSETACCOUNTEXP:"mailmsetcmdaccexp",PAGE_MAILMSETVACUUM:"mailmsetvacuum",CMD_MAILMSETVACUUM:"mailmsetcmdvacuum",CMD_MAILMSETVACUUMEXEC:"mailmsetcmdvacuumexec",PAGE_MAILMSETVACUUMSHARE:"mailmsetvacuumshare",CMD_MAILMSETVACUUMSHARE:"mailmsetcmdvacuumshare",CMD_MAILMSETVACUUMSHAREEXEC:"mailmsetcmdvacuumshareexec",PAGE_MAILSETCAPACITYSHAREACC:"mailsetcapacityshareacc",PAGE_MAILSETCAPACITYSHAREACC:"mailsetcapacityshareacc",PAGE_MAILSETCAPACITYSHAREACC:"mailsetcapacityshareacc",PAGE_MAILMSETSHAREACCOUNTS:"mailmsetshareaccounts",CMD_MAILMSETSHAREACCOUNTS:"mailmsetcmdshareaccounts",CMD_MAILMSETSHAREACCOUNTDEL:"mailmsetcmddelshareaccount",CMD_MAILMSETSHAREACCOUNTUSE:"mailmsetcmduseshareaccount",CMD_MAILMSETSHAREACCOUNTMOVE:"mailmsetcmdmovemailshareacc",CMD_MAILMSETSHAREACCOUNTMAILUSE:"mailmsetcmdusemailshareacc",PAGE_MAILMSETSHAREACCOUNTENTRY:"mailmsetshareaccountentry",CMD_MAILMSETSHAREACCOUNTENTRY:"mailmsetcmdshareaccountentry",PAGE_MAILSETADMIN:"mailsetadmin",PAGE_MAILSETGEN:"mailsetgen",CMD_MAILSETGEN:"mailsetcmdgen",PAGE_MAILSETMANAGER:"mailsetmanager",CMD_MAILSETMANAGER:"mailsetcmdmanager",PAGE_MAILSETSHAREACCSET:"mailsetshareaccset",CMD_MAILSETSHAREACCSET:"mailsetcmdshareaccset",PAGE_MAILSETSERVER:"mailsetserver",CMD_MAILSETSERVER:"mailsetcmdserver",PAGE_MAILSETEXPORT:"mailsetexport",CMD_MAILSETEXPORT:"mailsetcmdexport",PAGE_MAILSETCAPACITY:"mailsetcapacity",CMD_MAILSETCAPACITY:"mailsetcmdcapacity",PAGE_MAILSETCAPACITYENTRY:"mailsetcapacityentry",CMD_MAILSETCAPACITYENTRY:"mailsetcmdcapentry",CMD_MAILSETCAPACITYENTRYS:"mailsetcmdcapentrys",PAGE_MAILSETCAPACITYSHAREACC:"mailsetcapacityshareacc",CMD_MAILSETSHAREACCOUNTS:"mailsetcmdshareaccounts",PAGE_MAILSETCAPACITYSHAREACCENTRY:"mailsetcapacityshareaccentry",CMD_MAILSETCAPACITYSHAREACCENTRY:"mailsetcmdcapshareaccentry",CMD_MAILSETCAPACITSHAREACCYENTRYS:"mailsetcmdcapshareaccentrys",PAGE_MAILSETSENDMISTAKE:"mailsetsendmistake",CMD_MAILSETSENDMISTAKE:"mailsetcmdsendmistake",PAGE_MAILSETWLISTADDR:"mailsetwlistaddr",CMD_MAILSETWLISTADDR:"mailsetcmdwlistaddr",PAGE_MAILSETWLISTADDRENTRY:"mailsetwlistaddrentry",CMD_MAILSETWLISTADDRENTRY:"mailsetcmdwlistaddrentry",CMD_MAILSETWLISTADDRDEL:"mailsetcmdwlistaddrdel",CMD_MAILSETWLISTADDRMV:"mailsetcmdwlistaddrmv",VALUE_CAPACITYCOMDEFID:"com",FIELD_MAILUSE:"mailuse",FIELD_ACCLIST:"acclist",FIELD_ACCID:"accid",FIELD_ACCOUNT:"account",FIELD_USE:"use",FIELD_DEFACCOUNT:"defacc",FIELD_RECVSTATUS:"rstatus",FIELD_RECVSTATUSTIME:"rstatustime",FIELD_ACCRECVSTATUSDISPMSG:"rstatdispmsg",FIELD_RECVSTATUSMSG:"rstatusmsg",FIELD_VACTIME:"vac_time",FIELD_VACSTATUS:"vac_status",FIELD_VACERRTIME:"vac_errtime",FIELD_DUSTKIND:"dustkind",FIELD_DUSTDELDAYS:"ddeldays",FIELD_DUSTINDELDAYS:"dindeldays",FIELD_COMCAPACITYSIZE:"comsize",FIELD_COMCAPACITYCAPA:"comcapa",FIELD_COMDUSTKIND:"comdustkind",FIELD_COMDUSTDELDAYS:"comddeldays",FIELD_COMDUSTINDELDAYS:"comdindeldays",FIELD_MAILTOTALFILESIZE:"totalfilesize",FIELD_ACCOUNTUSE:"accountuse",ZERR_MAILVACUUMDBNOTNOTHING:"-6024",init:function(){var c=b("#jco-pv-funcid").val();desknets.pageframe.setFuncSel(c);if(c==desknets.mailset.PAGE_MAILMSETUSERACCOUNT){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailmsetuseraccount.init()}else{if(c==desknets.mailset.PAGE_MAILMSETACCOUNTIMP){desknets.mailset.mailmsetaccimp.init()}else{if(c==desknets.mailset.PAGE_MAILMSETACCOUNTEXP){desknets.mailset.mailmsetaccexp.init()}else{if(c==desknets.mailset.PAGE_MAILMSETVACUUM){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailmsetvacuum.init()}else{if(c==desknets.mailset.PAGE_MAILMSETVACUUMSHARE){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailmsetvacuumshare.init()}}}}}if(c==desknets.mailset.PAGE_MAILMSETSHAREACCOUNTS){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailmsetshareaccounts.init()}else{if(c==desknets.mailset.PAGE_MAILSETGEN){desknets.mailset.mailsetgen.init()}else{if(c==desknets.mailset.PAGE_MAILSETMANAGER){desknets.mailset.mailsetmanager.init()}else{if(c==desknets.mailset.PAGE_MAILSETSHAREACCSET){desknets.mailset.mailsetshareaccset.init()}else{if(c==desknets.mailset.PAGE_MAILSETSERVER){desknets.mailset.mailsetserver.init()}else{if(c==desknets.mailset.PAGE_MAILSETEXPORT){desknets.mailset.mailsetexport.init()}else{if(c==desknets.mailset.PAGE_MAILSETCAPACITY){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailsetcapacity.init()}else{if(c==desknets.mailset.PAGE_MAILSETCAPACITYSHAREACC){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailsetcapacityshareacc.init()}else{if(c==desknets.mailset.PAGE_MAILSETSENDMISTAKE){desknets.mailset.mailsetsendmistake.init()}else{if(c==desknets.mailset.PAGE_MAILSETWLISTADDR){desknets.hashobserver.init(desknets.mailset);desknets.mailset.mailsetwlistaddr.init()}}}}}}}}}}}}})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetacclistcom",desknets.PageListBase,{_MailUseSubmit:function(g,c,d,f){var j=this;var i={};var e={};var h={};var k=[];h.cmd=desknets.mailset.CMD_MAILMSETACCOUNTUSE;h.uid=g;h.id=c;h.useflg=d;k={success:function(n,l,p){var o="";var m="off";if(d=="1"){o=desknets.Resource.mail.accuseon;m="on"}else{o=desknets.Resource.mail.accuseoff}f.text(o);f.data("flg",m)}};j._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,h,k)},inputDispPage:function(d){var c=this;c.inputModPage(d)},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getListModCmd:function(){return desknets.mailset.PAGE_MAILMSETACCOUNTENTRY},})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetuseraccount",desknets.mailset.mailmsetacclistcom,{_sDelFlg:"0",_muid:"",_maccid:"",_initListStart:function(){var c=this;c.callBase("_initListStart");var d={allGroup:"choosable",unassignGroup:"choosable"};desknets.page.groupSelect.init({},d)},_getListAjaxSuccess:function(d){var c=this;c.callBase("_getListAjaxSuccess",d);desknets.page.groupSelect.editSelectedGroup(c.$mjListPage.find(".jco-sel-items"),d)},init:function(){var c=this;c.callBase("init");c._initMailSetUserAccountRegistryEvent()},_initMailSetUserAccountRegistryEvent:function(){var d=this;var c=d.$mjListPage.find(d._mIdPageForm);d.$mjListPage.delegate(".jmail-multiple-sel-text","click",function(e){e.preventDefault();d._muid=b(this).closest("tr").find(".jco-id").val();d._maccid=b(this).data("accid");if(b(this).data("flg")=="on"){d.$mjListPage.find(".co-multiple-sel-item.paramon").addClass("on");d.$mjListPage.find(".co-multiple-sel-item.paramoff").removeClass("on")}else{d.$mjListPage.find(".co-multiple-sel-item.paramon").removeClass("on");d.$mjListPage.find(".co-multiple-sel-item.paramoff").addClass("on")}});d.$mjListPage.find(".jmail-multiple-sel-item").click(function(g){g.preventDefault();var e="0";if(b(this).hasClass("paramon")){e="1"}var f=d.$mjListPage.find('input[name="id"]+input[value='+d._muid+"]").closest("tr").find(".jmail-multiple-sel-text").filter(function(){if(b(this).data("accid")==d._maccid){return b(this)}});d._MailUseSubmit(d._muid,d._maccid,e,f);desknets.popUp.hide(b(this))});c.delegate(".jmail-user-listlink","click",function(f){f.preventDefault();var e={};e.cmd=desknets.mailset.PAGE_MAILMSETACCOUNTS;e.uid=b(this).parent().parent().find(".jco-id").val();e.num=d.$mjListPage.find('input[name="num"]').val();d._setLocationHash(e)});d.$mjListPage.find(".jmail-list-enable-submit").click(function(e){d._sDelFlg="1";d._listDelSubmit(e)});d.$mjListPage.find(".jmail-list-disables-submit").click(function(e){d._sDelFlg="0";d._listDelSubmit(e)})},_delNoChkMessage:function(){var c=this;if(c._sDelFlg=="0"){return desknets.Resource.Message.mail_accuse_off_nochecked}else{return desknets.Resource.Message.mail_accuse_on_nochecked}},_delConfMessage:function(){var d=this;var c="";if(d._sDelFlg=="0"){if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.mail_accuse_off_allconf}else{if(d.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){c=desknets.Resource.Message.mail_accuse_off_someconf}else{c=desknets.Resource.Message.mail_accuse_off_listconf}}return desknets.tmpl.replaceWordHtml(c,"count",d._getListCheckCount())}else{if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.mail_accuse_on_allconf}else{if(d.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){c=desknets.Resource.Message.mail_accuse_on_someconf}else{c=desknets.Resource.Message.mail_accuse_on_listconf}}return desknets.tmpl.replaceWordHtml(c,"count",d._getListCheckCount())}},_getDelAddPrm:function(){var c=this;var d={};if(c._sDelFlg=="0"){d.mailuse="0"}else{if(c._sDelFlg=="1"){d.mailuse="1"}}var e=c.$mjListPage.find(".jco-back-page-data").find('input[name="gid"]').val();if(neo.isSet(e)&&e!="all"){d.gid=e}return d},_initListStartModLink:function(){var c=this;c.$mjTableList.dnclick(".jco-modlink",function(f){var d=b(this).parent().parent().find(".jco-id").val();var e=b(this).prev('[name="accid"]').val();c._inputModPageAccount(d,e)},function(f){var d=b(this).parent().parent().find(".jco-id").val();var e=b(this).prev('[name="accid"]').val();c._inputModPageAccount(d,e)})},_inputModPageAccount:function(g,d){var c=this;var f="";var e={};f=c._getListModCmd();e=c._getModPageParam();e.cmd=f;e.uid=g;e.id=d;c._inputPage(e)},_hashUpdatePageView:function(d){var c=this;var e=desknets.paramanalyzer.getHashParams();if(d==desknets.mailset.PAGE_MAILMSETACCOUNTS){if(b("#jco-m-acclist-container").find(".jco-title").length>0){desknets.mailset.mailmsetaccounts._getListAjax(e.row)}else{desknets.mailset.mailmsetaccounts.initPage(desknets.mailset.PAGE_MAILMSETUSERACCOUNT,"jco-m-list-container")}c.mhashBackCmd=desknets.mailset.PAGE_MAILMSETACCOUNTS;c.mhashIdBack="jco-m-acclist-container"}},_replaceListLine:function(d,f,e){var c=this;if(f==desknets.mailset.FIELD_ACCLIST){d=c._replaceAccountLine(d,e[f])}else{if(f==desknets.mailset.FIELD_MAILUSE){d=c._replaceMailUseLine(d,f,e)}else{d=c.callBase("_replaceListLine",d,f,e)}}return d},_replaceMailUseLine:function(d,f,e){var c="";if(e[f]=="1"){c=desknets.Resource.mail.mailuseon}else{c=desknets.Resource.mail.mailuseoff}d=desknets.tmpl.replaceWordHtml(d,f,c);return d},_replaceAccountLine:function(f,g){var e=this;var d="";var c="";if(typeof g=="object"){f=e._replaceAccountListLine(f,g)}else{c=desknets.mailset.FIELD_ACCOUNT;d=desknets.Resource.Message.mail_acc_nodata;f=desknets.tmpl.replaceWordHtml(f,c,d);c=desknets.mailset.FIELD_USE;d="";f=desknets.tmpl.replaceWordHtml(f,c,d)}return f},_replaceAccountListLine:function(d,n){var c="";var k="";var l=0;var h="";var m="";var g="";var e=[];if(!b.isArray(n)){e=[n]}else{e=n}for(l=0;l<e.length;l++){var f=e[l];if(typeof f=="object"){var j="";for(c in f){if(c==desknets.mailset.FIELD_ACCID){j=f[c];break}}if(j==""){continue}for(c in f){if(c==desknets.mailset.FIELD_ACCOUNT){k=desknets.escape(f[c]);k=desknets.escapeValue(k);k=desknets.escapeSpace(k);if(l>0){h+="<br>"}h+='<input type="hidden" name="accid" value="'+j+'">';h+='<a href="#" class="jco-modlink" title="'+k+'">'+k+"</a>"}else{if(c==desknets.mailset.FIELD_USE){var i="";if(f[c]=="1"){k=desknets.Resource.mail.accuseon;i="on"}else{k=desknets.Resource.mail.accuseoff}if(l>0){m+="<br>"}m+='<a class="co-drop-down-button co-multiple-sel-text jmail-multiple-sel-text" ';m+='data-accid="'+j+'" ';m+='data-flg="'+i+'" ';m+='data-for="mail-multiple-usersel-list" href="#">'+k+"</a>"}}}}}g=desknets.mailset.FIELD_ACCOUNT;d=desknets.tmpl.replaceWordHtml(d,g,h);g=desknets.mailset.FIELD_USE;d=desknets.tmpl.replaceWordHtml(d,g,m);return d},_getListCmd:function(){return desknets.mailset.PAGE_MAILMSETUSERACCOUNT},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETUSERACCOUNT},_getListModClass:function(){return desknets.mailset.mailmsetaccountentry},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTMAILUSE}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetaccounts",desknets.mailset.mailmsetacclistcom,{_muid:"",_maccid:"",_getFieldsCheckScroll:function(){return["uid"]},_listMoveScroll:function(){this._setClearScrollPosition();this.callBase("_listMoveScroll")},initGetPageId:function(){var c=this;c.callBase("initGetPageId");c.boGetHtmlSingle=false},_initListStart:function(){var c=this;c.callBase("_initListStart");c._initMailSetUserAccountRegistryEvent()},_initMailSetUserAccountRegistryEvent:function(){var c=this;c.$mjListPage.delegate(".jmail-multiple-sel-text","click",function(d){d.preventDefault();var e=desknets.paramanalyzer.getHashParams();c._muid=e.uid;c._maccid=b(this).closest("tr").find(".jco-id").val();if(b(this).data("flg")=="on"){c.$mjListPage.find(".co-multiple-sel-item.paramon").addClass("on");c.$mjListPage.find(".co-multiple-sel-item.paramoff").removeClass("on")}else{c.$mjListPage.find(".co-multiple-sel-item.paramon").removeClass("on");c.$mjListPage.find(".co-multiple-sel-item.paramoff").addClass("on")}});c.$mjListPage.find(".jmail-multiple-sel-item").click(function(f){f.preventDefault();var d="0";if(b(this).hasClass("paramon")){d="1"}var e=c.$mjListPage.find("input[value="+c._maccid+"]").closest("tr").find(".jmail-multiple-sel-text");c._MailUseSubmit(c._muid,c._maccid,d,e);desknets.popUp.hide(b(this))});c.$mjTableList.delegate(".mail-co-table-list-del","click",function(d){d.preventDefault();var e=b(this).parent().parent().find(".jco-id").val();c._inputDelConfSubmit(e)});c.$mjListPage.find(".co-pageback").click(function(d){d.preventDefault();c.dispBackListPage();b("#jco-m-acclist-container").empty()});c.$mjListPage.find(".jmail-acclist-mod-submit").click(function(d){d.preventDefault();c._inputDefSubmit()})},_inputDelConfSubmit:function(d){var c=this;var g=c._delConfMessage();var f=null;var e={};e.extraMessage=desknets.Resource.Message.mail_delmessage_option;e.extraClass="co-msg-rs";f=desknets.dialog.confirm(g,function(){c._inputDelSubmit(f,d);return false},e)},_delConfMessage:function(){return desknets.Resource.Message.com_del_conf},_inputDelSubmit:function(i,d){var c=this;var h={};var g={};var f={};var e=[];var j=desknets.paramanalyzer.getHashParams();if(i!=null){desknets.submitform.setDialogDisabled(i)}f.cmd=c._getDelExecCmd();f.uid=j.uid;f.id=d;g=c.getListParamToObj();h["0"]=f;h["1"]=g;e=c._getListAjaxOptionsExec(i);c._sendRequestAjax(desknets.ajax.REQTYPE_MULTI,desknets.ajax.RESTYPE_JSON,h,e)},_inputDefSubmit:function(){var c=this;var d={};var e=desknets.paramanalyzer.getHashParams();d.cmd=c._getDefExecCmd();d.uid=e.uid;d.id=c.$mjListPage.find('[name="id"]:checked').val();desknets.ajax.rest({url:desknets.getUrl(c._getRestModule()),data:d,success:function(g,f,h){c._onSuccessDef(g)}})},_onSuccessDef:function(d){var c=this;c.dispBackListPage();b("#jco-m-acclist-container").empty()},_getAddPageParam:function(){var c={};var d=desknets.paramanalyzer.getHashParams();c.uid=d.uid;return c},_getModPageParam:function(){var c={};var d=desknets.paramanalyzer.getHashParams();c.uid=d.uid;return c},_getListAjaxSuccess:function(d){var c=this;c.callBase("_getListAjaxSuccess",d);if(d&&d.defacc){c._setDefMailAccount(d.defacc)}},_setDefMailAccount:function(d){var c=this;c.$mjListPage.find('[name="id"]').filter('[value="'+d+'"]').attr("checked",true)},_replaceListLine:function(d,f,e){var c=this;if(f==desknets.mailset.FIELD_USE){d=c._replaceRecvUseLine(d,f,e)}else{if(f==desknets.mailset.FIELD_RECVSTATUS){d=c._replaceRecvStatusLine(d,f,e)}else{d=c.callBase("_replaceListLine",d,f,e)}}return d},_replaceRecvUseLine:function(d,g,f){var c="";var e="";if(f[g]=="1"){c=desknets.Resource.mail.accuseon;e="on"}else{c=desknets.Resource.mail.accuseoff}d=desknets.tmpl.replaceWordHtml(d,g,c);d=desknets.tmpl.replaceWordHtml(d,"useon",e);return d},_replaceRecvStatusLine:function(d,h,e){var g="";var c="";if(e[h]=="0"||e[h]==""){c=desknets.Resource.mail.statok}else{c=desknets.Resource.mail.statng;g="co-msg-required"}var f=e[desknets.mailset.FIELD_RECVSTATUSTIME];if(!!f){c+=" (";c+=desknets.dateTime.dispDateTime(f,{type:"list"});c+=")"}d=desknets.tmpl.replaceWordHtml(d,h,c);d=desknets.tmpl.replaceWordHtml(d,"staterrclass",g);return d},_getIdListPage:function(){return"jco-m-acclist-container"},_getIdListPageForm:function(){return"acclistfrm"},_getListCmd:function(){return desknets.mailset.PAGE_MAILMSETACCOUNTS},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTS},_getListAddCmd:function(){return desknets.mailset.PAGE_MAILMSETACCOUNTENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTDEL},_getDefExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTDEF}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetaccountentry",desknets.PageInputBase,{_initSet:function(){var c=this;c._initSetWarningArea();c.callBase("_initSet")},_initSetWarningArea:function(){var d=b("#mail-warning-area");var c=b("#mail-warning-msg");var e=b("#mail-warning-detail");if(c.text()!=""||e.text()!=""){if(e.text()!=""){b("<br />").insertBefore(e)}d.show()}},_getErrorPlace:function(d){var e=this;var f="";var c="";if(d=="pop3server"||d=="pop3"||d=="pop3secure"||d=="smtpserver"||d=="smtp"||d=="smtpsecure"||d=="smtpauthuid"||d=="smtpauthpwd"){f=b("#inputfrm").find(".jco-input-"+d).closest("td").prev().find(".co-colon").eq(0).text();c=b("#inputfrm").find(".jco-input-"+d).closest("table").closest("td").prev().find(".co-colon").eq(0).text();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{return e.callBase("_getErrorPlace",d)}},_inputDelConfSubmit:function(){var c=this;var f=c._delConfMessage();var e=null;var d={};d.extraMessage=desknets.Resource.Message.mail_delmessage_option;d.extraClass="co-msg-rs";e=desknets.dialog.confirm(f,function(){c._inputDelSubmit(e);return false},d)},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getAddExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTENTRY},_getModExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTDEL},_getDelPrm:function(){var c={};var d=desknets.paramanalyzer.getHashParams();c.uid=d.uid;return c}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetaccimp",desknets.PageImport,{_chkImport:function(){var d=this;var h="";var c="";var f={};var e=[];h=d._getRestModule();c=d._getChkCmd();var g=desknets.getUrl(h);f.cmd=c;f.execcheck="1";e.success=function(j,i,k){d._makeImport(j)};d._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,f,e)},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getChkCmd:function(){return desknets.mailset.CMD_MAILMSETACCOUNTIMP}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetaccexp",desknets.PageExport,{init:function(){var c=this;c.callBase("init");var d={pageID:"jmail-m-export-page",onSelectGroup:function(f){return}};var e={allGroup:"choosable",unassignGroup:"choosable"};desknets.page.groupSelect.init(d,e,true)}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailmsetvacuum",desknets.PageListBase,{_mfuncTimer:null,_mAllMsg:"mail_vac_alluserconf",_mboFirstChk:true,_initListStart:function(){var c=this;c.callBase("_initListStart");c._initGroupSelectMailVacuum()},_initGroupSelectMailVacuum:function(){var c={allGroup:"choosable",unassignGroup:"choosable"};desknets.page.groupSelect.init({},c)},_listPage:function(c){if(c==""||c==0){this._mboFirstChk=true}this.callBase("_listPage",c)},_getListAjax:function(c){if(this._mboFirstChk==true){this._chkVacuuming(false);this._mboFirstChk=false}else{this.callBase("_getListAjax",c)}},_getListAjaxSuccess:function(d){var c=this;c.callBase("_getListAjaxSuccess",d);c._editSelectedGroupMailVacuum(d);if(c._mboFirstChk==true){c._chkVacuuming(true);c._mboFirstChk=false}},_editSelectedGroupMailVacuum:function(c){desknets.page.groupSelect.editSelectedGroup(this.$mjListPage.find(".jco-sel-items"),c)},init:function(){var c=this;c.callBase("init");c._initMailSetUserAccountRegistryEvent()},_initMailSetUserAccountRegistryEvent:function(){var c=this;var d=c.$mjListPage.find(".co-setarea");d.delegate("#jmail-all-vacuum-submit","click",function(e){e.preventDefault();c._vacuumConfSubmit(true)});d.delegate(".jmail-list-vacuum-submit","click",function(e){e.preventDefault();c._vacuumConfSubmit(false)})},_vacuumConfSubmit:function(e){var c=this;var f="";if(e==false&&c._getListCheckCount()<1){return}f=c._vacuumConfMessage(e);var d=desknets.dialog.confirm(f,function(){c._vacuumSubmit(e,d);return false})},_vacuumConfMessage:function(e){var d=this;var c="";if(e==true){return desknets.Resource.Message[d._mAllMsg]}else{if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.mail_vac_allconf}else{if(d.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){c=desknets.Resource.Message.mail_vac_someconf}else{c=desknets.Resource.Message.mail_vac_listconf}}}return desknets.tmpl.replaceWordHtml(c,"count",d._getListCheckCount())},_vacuumSubmit:function(i,h){var c=this;var g={};var f={};var e={};var d=[];desknets.submitform.setDialogDisabled(h);e=c._makeVacuumSubmitParams(i);f=c.getListParamToObj();g["0"]=e;g["1"]=f;d=c._getListAjaxOptionsExec(h);c._sendRequestAjax(desknets.ajax.REQTYPE_MULTI,desknets.ajax.RESTYPE_JSON,g,d)},_makeVacuumSubmitParams:function(f){var d=this;var c=[];var e={};e.cmd=d._getVacuumExecCmd();if(f==true){e.all="1"}else{if(d.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){c=desknets.PRM_VAL_ALLDEL}else{d.$mjListPage.find('input[name="id"]:checked').each(function(){c[c.length]=b(this).val()})}e.id=c;d._setGidMailVacuum(e)}return e},_setGidMailVacuum:function(c){c.gid=this.$mjListPage.find(".jco-back-page-data").find('input[name="gid"]').val()},_chkVacuuming:function(g){var c=this;var h={};var f={};var e={};var d=[];e.cmd=c._getChkCmd();e.execcheck="1";if(g==true){d.success=function(j,i,k){c._makeVacuuming(j)};c._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,e,d)}else{f=c.getListParamToObj();h["0"]=e;h["1"]=f;d=c._getListAjaxOptionsExec(null);c._sendRequestAjax(desknets.ajax.REQTYPE_MULTI,desknets.ajax.RESTYPE_JSON,h,d)}},_getListAjaxSuccessExec:function(d){var c=this;if(d[0]["status"]!=desknets.RES_STATUS_SUCCESS){desknets.ajax.onError(d[0]["errorno"],d[0]["errormessage"])}else{c._makeVacuuming(d[0]);c._getListAjaxSuccess(d[1])}},_makeVacuuming:function(d){var c=this;if(d.execflg=="0"){desknets.submitform.clearDisabled(b("#listfrm"));if(neo.isSet(d.mymessage)||neo.isSet(d.message)){desknets.pageframe.viewTopMsg(d.mymessage+"<br />"+d.message,"alert")}else{desknets.pageframe.closeTopMsg()}c.delTimer()}else{desknets.submitform.setDisabled(b("#listfrm"));desknets.pageframe.viewTopMsg(c._vacuumExecMessage(),"info");c.setTimer()}},setTimer:function(){var c=this;var d=5000;if(c._mfuncTimer==null){c._mfuncTimer=setInterval(function(){c._chkVacuuming(false)},d)}},delTimer:function(){var c=this;clearInterval(c._mfuncTimer);c._mfuncTimer=null},_vacuumExecMessage:function(){return desknets.Resource.Message.mail_vac_nowexec},_replaceListLine:function(d,f,e){var c=this;if(f==desknets.mailset.FIELD_VACTIME){d=c._replaceDateLine(d,f,e)}else{if(f==desknets.mailset.FIELD_VACSTATUS){d=c._replaceStatusLine(d,f,e)}else{if(f==desknets.mailset.FIELD_VACERRTIME){d=c._replaceErrDateLine(d,f,e)}else{d=c.callBase("_replaceListLine",d,f,e)}}}return d},_replaceDateLine:function(d,f,e){var c="";if(e[f]!=""){c=desknets.dateTime.dispDateTime(e[f],{type:"list"})}d=desknets.tmpl.replaceWordHtml(d,f,c);return d},_replaceStatusLine:function(c,f,d){var e="";if(d[f]=="1"){e="mail-tr-vacuuming"}else{if(d[f]==desknets.mailset.ZERR_MAILVACUUMDBNOTNOTHING){c=desknets.tmpl.replaceWordHtml(c,"vac_errtime","")}}c=desknets.tmpl.replaceWordHtml(c,"vacuuming",e);return c},_replaceErrDateLine:function(d,f,e){var c="";if(e[f]!=""){c+="[";c+=desknets.dateTime.dispDateTime(e[f],{type:"list"});c+="]"}d=desknets.tmpl.replaceWordHtml(d,f,c);return d},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getListCmd:function(){return desknets.mailset.PAGE_MAILMSETVACUUM},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUM},_getVacuumExecCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUMEXEC},_getChkCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUMEXEC}})})(jQuery);desknets.page(desknets.mailset,"mailmsetvacuumshare",desknets.mailset.mailmsetvacuum,{_mAllMsg:"mail_vac_allshareconf",_initGroupSelectMailVacuum:function(){},_editSelectedGroupMailVacuum:function(b){},_setGidMailVacuum:function(b){},_getListCmd:function(){return desknets.mailset.PAGE_MAILMSETVACUUMSHARE},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUMSHARE},_getVacuumExecCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUMSHAREEXEC},_getChkCmd:function(){return desknets.mailset.CMD_MAILMSETVACUUMSHAREEXEC}});desknets.page(desknets.mailset,"mailmsetshareaccounts",desknets.PageInputList,{_sDelFlg:"2",_msid:"",_initSet:function(){var b=this;b.callBase("_initSet");b._initMailUseShareAccountRegistryEvent()},_initMailUseShareAccountRegistryEvent:function(){var b=this;b.$mjListPage.delegate(".jmail-multiple-sel-text","click",function(c){c.preventDefault();b._msid=a(this).closest("tr").find(".jco-id").val();if(a(this).data("flg")=="on"){b.$mjListPage.find(".co-multiple-sel-item.paramon").addClass("on");b.$mjListPage.find(".co-multiple-sel-item.paramoff").removeClass("on")}else{b.$mjListPage.find(".co-multiple-sel-item.paramon").removeClass("on");b.$mjListPage.find(".co-multiple-sel-item.paramoff").addClass("on")}});b.$mjListPage.find(".jmail-multiple-sel-item").click(function(d){d.preventDefault();var c="0";if(a(this).hasClass("paramon")){c="1"}b._MailUseSubmit(b._msid,c);desknets.popUp.hide(a(this))})},_MailUseSubmit:function(c,b){var d=this;var h={};var g={};var f={};var e=[];f.cmd=desknets.mailset.CMD_MAILMSETSHAREACCOUNTUSE;f.sid=c;f.useflg=b;e={success:function(l,i,n){var m="";var k="off";if(b=="1"){m=desknets.Resource.mail.accuseon;k="on"}else{m=desknets.Resource.mail.accuseoff}var j=d.$mjListPage.find('input[name="id"]+input[value='+c+"]").closest("tr").find(".jmail-multiple-sel-text");j.text(m);j.data("flg",k)}};d._sendRequestAjax(desknets.ajax.REQTYPE_SINGLE,desknets.ajax.RESTYPE_JSON,f,e)},_initListEndButton:function(){var b=this;b.callBase("_initListEndButton");b.$mjListPage.find(".jmail-list-disables-submit").click(function(c){b._sDelFlg="0";b._listDelSubmit(c)});b.$mjListPage.find(".jmail-list-enable-submit").click(function(c){b._sDelFlg="1";b._listDelSubmit(c)});b.$mjListPage.find(".jmail-list-del-submit").click(function(c){b._sDelFlg="2";b._listDelSubmit(c)})},_replaceListLine:function(c,e,d){var b=this;if(e==desknets.mailset.FIELD_USE){c=b._replaceRecvUseLine(c,e,d)}else{if(e==desknets.mailset.FIELD_RECVSTATUS){c=b._replaceRecvStatusLine(c,e,d)}else{if(e==desknets.mailset.FIELD_ACCOUNTUSE){c=b._replaceAccountUseLine(c,e,d)}else{c=b.callBase("_replaceListLine",c,e,d)}}}return c},_replaceRecvUseLine:function(c,f,e){var b="";var d="";if(e[f]=="1"){b=desknets.Resource.mail.accuseon;d="on"}else{b=desknets.Resource.mail.accuseoff}c=desknets.tmpl.replaceWordHtml(c,f,b);c=desknets.tmpl.replaceWordHtml(c,"useon",d);return c},_replaceRecvStatusLine:function(c,g,d){var f="";var b="";if(d[g]=="0"||d[g]==""){b=desknets.Resource.mail.statok}else{b=desknets.Resource.mail.statng;f="co-msg-required"}var e=d[desknets.mailset.FIELD_RECVSTATUSTIME];if(!!e){b+=" (";b+=desknets.dateTime.dispDateTime(e,{type:"list"});b+=")"}c=desknets.tmpl.replaceWordHtml(c,g,b);c=desknets.tmpl.replaceWordHtml(c,"staterrclass",f);return c},_replaceAccountUseLine:function(d,f,e){var c=this;var b="";if(e[f]=="1"){b=desknets.Resource.mail.mailuseon}else{b=desknets.Resource.mail.mailuseoff}d=desknets.tmpl.replaceWordHtml(d,f,b);return d},_delNoChkMessage:function(){var b=this;if(b._sDelFlg=="0"){return desknets.Resource.Message.mail_accuse_off_nochecked}else{if(b._sDelFlg=="1"){return desknets.Resource.Message.mail_accuse_on_nochecked}}return b.callBase("_delNoChkMessage")},_delConfMessage:function(){var c=this;var b="";if(c._sDelFlg=="0"){if(c.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.mail_accuse_off_allconf}else{if(c.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){b=desknets.Resource.Message.mail_accuse_off_someconf}else{b=desknets.Resource.Message.mail_accuse_off_listconf}}return desknets.tmpl.replaceWordHtml(b,"count",c._getListCheckCount())}else{if(c._sDelFlg=="1"){if(c.$mjListPage.find(".co-chk-cnt-all").css("display")=="block"){return desknets.Resource.Message.mail_accuse_on_allconf}else{if(c.$mjListPage.find(".co-chk-cnt-some").css("display")=="block"){b=desknets.Resource.Message.mail_accuse_on_someconf}else{b=desknets.Resource.Message.mail_accuse_on_listconf}}return desknets.tmpl.replaceWordHtml(b,"count",c._getListCheckCount())}}return c.callBase("_delConfMessage")},_setDelConfirm:function(e){var b=this;var d=null;var c={};if(b._sDelFlg=="2"){c.extraMessage=desknets.Resource.Message.mail_delmessage_option;c.extraClass="co-msg-rs";d=desknets.dialog.confirm(e,function(){b._listDel(true,d);return false},c)}else{b.callBase("_setDelConfirm",e)}},_getDelAddPrm:function(){var b=this;var c={};if(b._sDelFlg=="0"){c.accountuse="0"}else{if(b._sDelFlg=="1"){c.accountuse="1"}}return c},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getListCmd:function(){return desknets.mailset.PAGE_MAILMSETSHAREACCOUNTS},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTS},_getMoveExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTMOVE},_getListAddCmd:function(){return desknets.mailset.PAGE_MAILMSETSHAREACCOUNTENTRY},_getListModCmd:function(){return desknets.mailset.PAGE_MAILMSETSHAREACCOUNTENTRY},_getListEntryClass:function(){return desknets.mailset.mailmsetshareaccountentry},_getListModClass:function(){return desknets.mailset.mailmsetshareaccountentry},_getDelExecCmd:function(){var b=this;if(b._sDelFlg=="0"){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTMAILUSE}else{if(b._sDelFlg=="1"){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTMAILUSE}}return desknets.mailset.CMD_MAILMSETSHAREACCOUNTDEL}});desknets.page(desknets.mailset,"mailmsetshareaccountentry",desknets.mailset.mailmsetaccountentry,{_inputButton:function(){var b=this;b.$mjPage.find(".jmail-input-copy").click(function(c){b._onClickCopy()});b.$mjPage.find(".jmail-accsel-button").click(function(c){c.preventDefault();desknets.chooser.open("jmail-accsel-dialog",b._getSelDialogOptions())});b.callBase("_inputButton")},_getSelDialogOptions:function(){var b=this;var c=desknets.chooser.getItemsFromElement(b.$mjPage.find(".jco-sel-items"),{itemFilter:function(f,d){var e=d.closest(".co-selitem").find('input[name="condition"]').val();if(e.substring(e.indexOf("_")+1)=="2"){e="all"}else{e=""}f.descendant=e;return f}});options={chooseTarget:["user","group","role"],allGroup:"readonly",unassignGroup:"readonly",cmdusers:desknets.CMD_CHOOSERMSETUSERSEL,editDescendant:true,choose:function(d){b._onSetSelect(d)},items:c};return options},_onSetSelect:function(j){var m;var n=this;var c="";var g="";var d="";var k="";var h=a(".jco-sel-items");var f=j.length;n.$mjPage.find(".co-selitem").remove();for(m=0;m<f;m++){var l=j[m];g=l.id;c=l.type.substring(0,1);if(c=="g"&&l.descendant=="all"){d=c+g+"_2"}else{d=c+g+"_1"}var i='<span class="co-selitem"><span title="{{titlename}}">{{Name}}</span><input type="hidden" value="{{id}}" name="id"><input type="hidden" value="{{id}}_1" name="accesskind"><input type="hidden" value="{{condition}}" name="condition"><input type="hidden" class="jco-sel-item" data-id="{{id}}" data-name="{{Name}}" data-description="{{description}}" /></span>';if(c=="u"){k=desknets.escapeValue(desknets.escape(l.description))}else{k=l.description}var e=desknets.escapeValue(desknets.escape(l.name));var b="";if(c=="r"||c=="u"){b=e}else{if(neo.isSet(l.description,{blank:false})){b=l.description+"-"}b=b+e}i=desknets.tmpl.replaceWordHtml(i,"Name",e);i=desknets.tmpl.replaceWordHtml(i,"titlename",b);i=desknets.tmpl.replaceWordHtml(i,"id",c+g);i=desknets.tmpl.replaceWordHtml(i,"condition",d);i=desknets.tmpl.replaceWordHtml(i,"description",k);h.append(i)}},_onClickCopy:function(){var b=this;var c=desknets.paramanalyzer.getHashParams();var d={};d.cmd=b._getFormatEntryPageCmd();d.copyid=c.id;desknets.paramanalyzer.setLocationHash(d)},_getAddExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTENTRY},_getModExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTDEL},_getListModClass:function(){return desknets.mailset.mailmsetshareaccountentry},_getFormatEntryPageCmd:function(){return desknets.mailset.PAGE_MAILMSETSHAREACCOUNTENTRY}});(function(b){desknets.page(desknets.mailset,"mailsetgen",desknets.PageSet,{_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN},})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailsetmanager",desknets.PageAdmin,{_getSetCondition:function(){return false},_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailsetserver",desknets.PageSet,{_getErrorPlace:function(d){var e=this;var f="";var c="";if(d=="pop3"||d=="pop3secure"||d=="smtp"||d=="smtpsecure"){f=b("#frm").find(".jco-input-"+d).prev("span").text();c=b("#frm").find(".jco-input-"+d).closest("td").prev().find(".co-colon").eq(0).text();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{return e.callBase("_getErrorPlace",d)}},_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailsetexport",desknets.PageSet,{_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailsetcapacity",desknets.PageCapacityList,{init:function(){var c=this;c.callBase("init");c._initMailSetCapaRegistryEvent()},_initMailSetCapaRegistryEvent:function(){var c=this;b(".jmail-capadef-modlink").click(function(d){d.preventDefault();c.inputModPage(desknets.mailset.VALUE_CAPACITYCOMDEFID)})},_getListAjaxSuccess:function(d){var c=this;c.callBase("_getListAjaxSuccess",d);c._replaceComSetting(d)},_replaceComSetting:function(f){var e=this;var d="";var c=f[desknets.mailset.FIELD_COMCAPACITYSIZE];var g=f[desknets.mailset.FIELD_COMCAPACITYCAPA];if(c===""){d=desknets.Resource.setnot}else{d=desknets.numberFormat(parseInt(c,10))+" MB"}b("#jmail-capadef-size").text(d);if(g=="1"){d=desknets.Resource.capaenable}else{d=desknets.Resource.capadisables}b("#jmail-capadef-capa").text(d)},_replaceListLine:function(d,f,e){var c=this;if(f==desknets.mailset.FIELD_DUSTKIND){d=c._replaceDustDelLine(d,f,e)}else{if(f==desknets.mailset.FIELD_MAILTOTALFILESIZE){d=c._replaceTotalSizeLine(d,f,e)}else{d=c.callBase("_replaceListLine",d,f,e)}}return d},_replaceTotalSizeLine:function(d,i,g){var c=parseInt(g[i]||"0",10);var f=desknets.numberFormatByte(c,0,0,2);var e="";if(g.capa=="1"){var h=parseInt(g.size,10)*1024*1024;e=" ("+desknets.capacity.formatPercentage(c,h)+")"}d=desknets.tmpl.replaceWordHtml(d,i,f);d=desknets.tmpl.replaceWordHtml(d,"rate",e);return d},_replaceDustDelLine:function(f,j,h){var e=this;var c="";var i=h[j];var g=h[desknets.mailset.FIELD_DUSTDELDAYS];var d=h[desknets.mailset.FIELD_DUSTINDELDAYS];c=e._getStrDeletionSetting(i,g,d);f=desknets.tmpl.replaceWordHtml(f,j,c);return f},_getStrDeletionSetting:function(h,d,f){var c="";var e="";var g="";if(h=="1"){e=desknets.Resource.Message.mail_cap_ddelday;g=desknets.numberFormat(parseInt(d,10));c=desknets.tmpl.replaceWordHtml(e,"days",g)}else{if(h=="3"){e=desknets.Resource.Message.mail_cap_dindelday;g=desknets.numberFormat(parseInt(f,10));c=desknets.tmpl.replaceWordHtml(e,"days",g)}else{c=desknets.Resource.unlimited}}return c},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getListCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITY},_getListExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITY},_getListAddCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITYENTRY},_getListModCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITYENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITYENTRYS},_getListEntryClass:function(){return desknets.mailset.mailsetcapacityentry},_getListModClass:function(){return desknets.mailset.mailsetcapacityentry}})})(jQuery);(function(b){desknets.page(desknets.mailset,"mailsetcapacityentry",desknets.PageCapacityInput,{_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getAddExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITYENTRYS},_getModExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITYENTRY}})})(jQuery);desknets.page(desknets.mailset,"mailsetshareaccset",desknets.PageSet,{_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN}});desknets.page(desknets.mailset,"mailsetcapacityshareacc",desknets.mailset.mailsetcapacity,{_getListCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITYSHAREACC},_replaceComSetting:function(e){var d=this;var c="";var b=e[desknets.mailset.FIELD_COMCAPACITYSIZE];var f=e[desknets.mailset.FIELD_COMCAPACITYCAPA];if(b===""){c=desknets.Resource.setnot}else{c=desknets.numberFormat(parseInt(b,10))+" MB"}a("#jmail-capadef-size").text(c);if(f=="1"){c=desknets.Resource.capaenable}else{c=desknets.Resource.capadisables}a("#jmail-capadef-capa").text(c)},_getListExecCmd:function(){return desknets.mailset.CMD_MAILSETSHAREACCOUNTS},_getListAddCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITYSHAREACCENTRY},_getListModCmd:function(){return desknets.mailset.PAGE_MAILSETCAPACITYSHAREACCENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITSHAREACCYENTRYS},_getListEntryClass:function(){return desknets.mailset.mailsetcapacityshareaccentry},_getListModClass:function(){return desknets.mailset.mailsetcapacityshareaccentry}});desknets.page(desknets.mailset,"mailsetcapacityshareaccentry",desknets.PageInputBase,{$mjListData:null,$mjListPage:null,$mitem:null,$mselarea:"#jamail-sel-items-area",$mdialog:"#jmail-shareacc-dialog",msId:"#jmail-shareaccsel-data",initPage:function(d,c){var b=this;a("#jmail-shareacc-dialog").dialog("destroy");a("#jmail-shareacc-dialog").dialog("widget").remove();b.callBase("initPage",d,c)},_initSet:function(){var b=this;b.callBase("_initSet");b._initShareAccSelectDialog();b._initShareAccSelected()},_initShareAccSelected:function(){var b=this;$mselarea.on("mouseenter","tr",function(c){var d=a(this);setTimeout(function(){d.addClass("hover")},0)});$mselarea.on("mouseleave","tr",function(c){var d=a(this);setTimeout(function(){d.removeClass("hover")},0)});$mselarea.delegate(".jmail-btn-close","click",function(c){c.preventDefault();a(this).closest("tr").remove();if($mselarea.find(".co-table-set-list").find("tr").length==0){$mselarea.find(".co-table-set-list").hide()}})},_initShareAccSelectDialog:function(){var c=this;$mjListData=a("#jmail-table-list");c.$mjListPage=a(c.msId);$mdialog=a("#jmail-shareacc-dialog");$mselarea=a("#jamail-sel-items-area");var f=$mselarea.find(".co-table-set-list");f.hide();var b=$mselarea.find(".jmail-shreacc-sel-templ").html();$mitem=a("#jamail-sel-items-area").find(".jmail-sel-items");var e=0;var d=desknets.dialog.getDialogOption();d.width=500;d.autoOpen=false;d.title=desknets.Resource.mail.shareaccdialogtitle;d.open=function(){$mdialog.find(".co-nodata").hide();c._getListAjax(c.$mjListPage.find('input[name="row"]').val())};d.buttons={};d.buttons[desknets.Resource.OKButtonLabel]=function(){var g=false;$mdialog.find('input:checkbox[name="repid"]:checked').each(function(){if(!c._chkAdd(a(this).val(),$mitem)){var i=a(this).closest("tr");var h=b;h=desknets.tmpl.replaceWord(h,"id",a(this).val());h=desknets.tmpl.replaceWord(h,"account",i.find(".jmail-name").text());$mitem.append(h);g=true}});if(g){f.show()}a(this).dialog("close")};d.buttons[desknets.Resource.CancelButtonLabel]=function(){a(this).dialog("close")};$mdialog=desknets.dialog.setUp($mdialog,d);a(".jmail-sel-btn").click(function(){$mdialog.dialog("open")});$mdialog.find(".co-table-list-scroll").delegate("input[type=checkbox]","click",function(g){if(a(this).attr("checked")){a(this).closest("tr").addClass("co-tr-selected")}else{a(this).closest("tr").removeClass("co-tr-selected")}})},_chkAdd:function(d,c){var b=false;c.find(".jmail-rep-id").each(function(){if(a(this).val()==d){b=true}});return b},_getListAjax:function(d){var b=this;var e={};var c={};e=desknets.getInputDataToObj(this.$mjListPage.find(".jco-back-page-data"));e.cmd=b._getListExecCmd();e.row=d;c={success:function(g,f,h){b._getListAjaxSuccess(g)}};c.url=desknets.getUrl(b._getRestModule());c.data=e;desknets.ajax.rest(c)},_getListAjaxSuccess:function(j){var m=this;var g=desknets.ajax.getJsonItems(j);var l=[];var b=[];var f=0;var k=0;var c="";var d='<tr {{class}}><td class="co-chk"><input type="checkbox" value="{{id}}" name="repid" {{chk}}></td><td><span title="{{account}}" class="jmail-name">{{account}}</span></td></tr>';if(g.length<=0){$mdialog.find(".co-nodata").show();c="0"}else{$mjListData.show();var i=[];$mitem.find(".jmail-rep-id").each(function(){i[i.length]=a(this).val()});f=g.length;for(k=0;k<f;k++){l=g[k];b[b.length]=m._listLine(d,l,i)}$mjListData.html(b.join(""));c=j.row}var h=m.$mjListPage.find(".jco-back-page-data").find('input[name="num"]').val();var e=m.$mjListPage.find(".co-sub-page");if(parseInt(h)>=parseInt(j.allcnt)){e.css("display","none")}else{e.css("display","block")}m.$mjListPage.find(".jco-back-page-data").find('input[name="row"]').val(c);m.$mjListPage.find(".jco-pv-cnt").val(k);m.$mjListPage.find(".jco-pv-all-cnt").val(j.allcnt);desknets.Pager.output("#jmail-shareacc-dialog",".jco-pager",m._listPageLinkOption())},_listLine:function(g,h,f){var e=this;var c="";var i;var b;var d;b=f.length;if(typeof h=="object"){for(c in h){d=false;if(c=="id"){for(i=0;i<b;i++){if(h[c]==f[i]){d=true}}if(d){g=desknets.tmpl.replaceWordChk(g,c,h[c]);g=desknets.tmpl.replaceWordChk(g,"chk","checked");g=desknets.tmpl.replaceWordChk(g,"class","class = co-tr-selected")}else{g=desknets.tmpl.replaceWordChk(g,c,h[c])}}else{if(c=="account"){g=desknets.tmpl.replaceWordChk(g,c,h[c])}}}}return g},_listPageLinkOption:function(){var c=this;var d=c.$mjListPage.find(".jco-pv-cnt").val();var e=c.$mjListPage.find(".jco-pv-all-cnt").val();var g=c.$mjListPage.find(".jco-back-page-data").find('input[name="num"]').val();var f=c.$mjListPage.find(".jco-back-page-data").find('input[name="row"]').val();var b={};b={getCount:d,allCount:e,pageMaxView:g,startRow:f,clickFunc:function(h){c._getListAjax(h)}};return b},_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getAddExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITSHAREACCYENTRYS},_getModExecCmd:function(){return desknets.mailset.CMD_MAILSETCAPACITYSHAREACCENTRY},_getListExecCmd:function(){return desknets.mailset.CMD_MAILMSETSHAREACCOUNTS}});(function(b){desknets.page(desknets.mailset,"mailsetsendmistake",desknets.PageSet,{_getNextCmd:function(){return desknets.mailset.PAGE_MAILSETADMIN},_getErrorPlace:function(d){var e=this;var f="";var c="";if(d=="manysendcount"){f=b("#frm").find(".jco-input-"+d).closest("td").find(".jmail-manysend").eq(0).text();c=b("#frm").find(".jco-input-"+d).closest("table").closest("td").closest("table").closest("td").prev().find(".co-colon").eq(0).text();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{if(d=="undosendtime"){f=b("#frm").find(".jco-input-"+d).closest("td").find(".jmail-undosendtype").eq(0).text();c=b("#frm").find(".jco-input-"+d).closest("table").closest("td").prev().find(".co-colon").eq(0).text();if(neo.isSet(f)&&f.length>0){f=c+" - "+f+desknets.merrMsgConnect}return f}else{return e.callBase("_getErrorPlace",d)}}}})})(jQuery);desknets.page(desknets.mailset,"mailsetwlistaddr",desknets.PageInputList,{_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getListCmd:function(){return desknets.mailset.PAGE_MAILSETWLISTADDR},_getListExecCmd:function(){return desknets.mailset.CMD_MAILSETWLISTADDR},_getListAddCmd:function(){return desknets.mailset.PAGE_MAILSETWLISTADDRENTRY},_getListModCmd:function(){return desknets.mailset.PAGE_MAILSETWLISTADDRENTRY},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILSETWLISTADDRDEL},_getMoveExecCmd:function(){return desknets.mailset.CMD_MAILSETWLISTADDRMV},_getListEntryClass:function(){return desknets.mailset.mailsetwlistaddrentry},_getListModClass:function(){return desknets.mailset.mailsetwlistaddrentry}});desknets.page(desknets.mailset,"mailsetwlistaddrentry",desknets.PageInputBase,{_getRestModule:function(){return desknets.mailset.MODULE_API_MAIL},_getDelExecCmd:function(){return desknets.mailset.CMD_MAILSETWLISTADDRDEL},_getAddExecCmd:function(){return desknets.mailset.CMD_MAILSETWLISTADDRENTRY},_getModExecCmd:function(){var b=this;return b._getAddExecCmd()}});app.addInitialAction(function(){desknets.mailset.init()})})(jQuery);