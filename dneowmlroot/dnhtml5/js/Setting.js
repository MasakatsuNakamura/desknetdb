/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(b){var d=neo.core.readyNamespace("neo.denbun.Setting");if(!d){return}var c=neo.denbun;var a=neo.denbun.Setting=new neo.core.Class({classProperties:{CLS_COM_ITEM:"page-setting_com-item",CLS_PAGE_ITEM_SETTING_TAB_SELECTED:"setting-tab-item-selected",CLS_PAGE_ITEM_SETTING_INDEX_LINK:"setting-index-link",_index:null,_getIndex:function(){return this._index||this._initIndex()},_initIndex:function(){var f={};var e=new neo.denbun.Setting.Index(f);e.initialize();return this._index=e},_mailAddonSetting:null,getMailAddonSetting:function(){return this._mailAddonSetting},_setMailAddonSetting:function(e){return this._mailAddonSetting=e},_ajaxGetMailAddonSetting:null,_getAjaxGetMailAddonSetting:function(){return this._ajaxGetMailAddonSetting||this._initAjaxGetMailAddonSetting()},_initAjaxGetMailAddonSetting:function(){var e=this;var f={getSendData:this.__closure(e._getDataToGetMailAddonSetting),onsuccess:this.__closure(this.onsuccessGetMailAddonSetting)};var g=new neo.denbun.Ajax(f);g.initialize();return this._ajaxGetMailAddonSetting=g},_elToolbar:null,_getElToolbar:function(){return this._elToolbar||this._initElToolbar()},_initElToolbar:function(){return this._elToolbar=b("."+a.CLS_COM_ITEM+"."+c.Page.CLS_TOOLBAR_ITEM)},_elOkButtonOfToolbar:null,_getElOkButtonOfToolbar:function(){return this._elOkButtonOfToolbar||this._initElOkButtonOfToolbar()},_initElOkButtonOfToolbar:function(){return this._elOkButtonOfToolbar=this._getElToolbarItemOf("ok")},_elCancelButtonOfToolbar:null,_getElCancelButtonOfToolbar:function(){return this._elCancelButtonOfToolbar||this._initElCancelButtonOfToolbar()},_initElCancelButtonOfToolbar:function(){return this._elCancelButtonOfToolbar=this._getElToolbarItemOf("cancel")},_elSeparatorBeforeRemove:null,_getElSeparatorBeforeRemove:function(){return this._elSeparatorBeforeRemove||this._initElSeparatorBeforeRemove()},_initElSeparatorBeforeRemove:function(){var e=this._getElToolbar();var f=e.find("."+c.App.Menu.CLS_ITEM);return this._elSeparatorBeforeRemove=f.filter(".setting_com_menu-separator_before_remove")},_elRemoveButtonOfToolbar:null,_getElRemoveButtonOfToolbar:function(){return this._elRemoveButtonOfToolbar||this._initElRemoveButtonOfToolbar()},_initElRemoveButtonOfToolbar:function(){return this._elRemoveButtonOfToolbar=this._getElToolbarItemOf("remove")},_elLeftPageBody:null,_getElLeftPageBody:function(){return this._elLeftPageBody||this._initElLeftPageBody()},_initElLeftPageBody:function(){return this._elLeftPageBody=b("."+a.CLS_COM_ITEM+"."+c.Page.CLS_LEFT_ITEM+" ."+c.CLS_COM_CONTENT_BODY)},_elSelectTab:null,_getSelectElTab:function(){return this._elSelectTab||this._initElSelectTab()},_initElSelectTab:function(){return this._elSelectTab=b("#setting-tab-list .setting-tab-item")},constructor:function(){},initSetting:function(){if(DENBUN_MODE_XNEO){this._getIndex()}else{if(!this.getMailAddonSetting()){this.loadMailAddonSetting()}}},loadSetting:function(){if(DENBUN_MODE_XNEO){this._getIndex()}else{this.loadMailAddonSetting()}},loadMailAddonSetting:function(){var e=this._getAjaxGetMailAddonSetting();e.sendRequest()},_getDataToGetMailAddonSetting:function(){var e={cmd:"mailaddonsetting"};return e},_setToMailAddonSetting:function(e){this._setMailAddonSetting(e);this._setMailAddonSettingToIndex(e)},_setMailAddonSettingToIndex:function(e){var f=this._getIndex();f.setMailAddonSettingToSetting(e)},setResponseToForm:function(g,f){var e=c.parseFlatData(f);this.setFormValues(g,e)},setFormValues:function(h,e){for(var f in e){var g=e[f];this._setFormValue(h,f,g)}},_setFormValue:function(i,f,h){var e=i._getElInputOf(f);var g=e.attr("type");switch(g){case"radio":e.filter('[value="'+h+'"]').attr("checked",true);break;case"checkbox":e.attr("checked",(h=="1"?true:false));break;default:e.val(h)}},resetForm:function(f){var e=f._getElForm();e[0].reset()},deleteAccount:function(f,e){this._deleteEdittingItems("mailaccountdel",f,e)},deleteShareAccount:function(g,e,f){this._deleteEdittingItems("mailcmdshareaccountdel",g,e,f)},deleteSign:function(f,e){this._deleteEdittingItems("mailsigndel",f,e)},deleteShareAccountSign:function(g,e,f){this._deleteEdittingItems("mailcmdshareaccsigndel",g,e,f)},deleteFilter:function(f,e){this._deleteEdittingItems("mailfilterdel",f,e)},deleteShareAccountFilter:function(g,e,f){this._deleteEdittingItems("mailcmdshareaccfilterdel",g,e,f)},deleteJunkSetting:function(f,e){this._deleteEdittingItems("mailtroubledel",f,e)},deleteShareAccountJunkSetting:function(g,e,f){this._deleteEdittingItems("mailcmdshareacctroubledel",g,e,f)},_deleteEdittingItems:function(j,h,e,f){var g={getSendData:function(){var k={cmd:j,id:h};if(DENBUN_MODE_XNEO){if(f){k[c.PARAM_SHARE_ACCOUNT_ID]=f}}return k},onsuccess:function(){if(e){e()}}};var i=new c.Ajax(g);i.initialize();i.sendRequest();c.app.setSettingModified()},setDefaultShareAccAccessSelItems:function(g,f){g.empty();var i=b(".accessown");var h=c.comSetting.getSysUserId();var e=c.comSetting.getUserName();var j={id:"u"+h,name:e,accesskind:"u"+h+"_1",condition:"u"+h+"_1",titlename:e,description:"",item_value:"u"+h+"_1",item_data:e,item_title:c.comSetting.getUserDispItemTitle()};a.addShareAccAccessSelItem(g,f,j)},addShareAccAccessSelItem:function(h,g,i){var j;j=g.find(".selitem-name");j.attr("title",i.titlename);var f=neo.core.escape(i.name);f=desknets.escapeSpace(f);j.html(f);j=g.find('[name="id"]');j.val(i.id);j=g.find('[name="accesskind"]');j.val(i.accesskind);j=g.find('[name="condition"]');j.val(i.condition);var e='<input type="hidden" class="jco-sel-item" '+i.item_title+" />";j=b(e);j.attr("data-id",i.id);j.attr("data-name",i.name);g.append(j);j=g.find(".jmail-acc-description");var f=i.description;if(i.id&&i.id.charAt(0)!="u"){f=desknets.escapeValue(desknets.escape(f))}j.html(f);h.append(g);return},_getElToolbarItemOf:function(g){var f=this._getElToolbar();var e;if(f){e=f.find("[data-"+c.App.Menu.KEY_TOOLBAR_ACTION+'="'+g+'"]')}return e},toggleVisibilityOkAndCancelToolbarButton:function(f){var e=this._getElOkButtonOfToolbar();e.toggle(f);var g=this._getElCancelButtonOfToolbar();g.toggle(f)},toggleVisibilityCancelToolbarButton:function(e){var f=this._getElCancelButtonOfToolbar();f.toggle(e)},toggleVisibilityRemoveToolbarButton:function(f){var g=this._getElSeparatorBeforeRemove();g.toggle(f);var e=this._getElRemoveButtonOfToolbar();e.toggle(f)},toggleEnableOfOkToolbarButton:function(f){var e=this._getElOkButtonOfToolbar();e.toggleClass(c.CLS_DISABLED,!f)},getScrollTopOfLeftPageBody:function(){var e=this._getElLeftPageBody();return e.scrollTop()},setScrollTopToLeftPageBody:function(e){var f=this._getElLeftPageBody();f.scrollTop(e)},updateTableHeight:function(j,g,l){g.hide();var i=j._getElPageBody();var e=j._getElForm();var h=i.innerHeight();var k=e.outerHeight(true);var f=h-k;f+=l;g.show();g.setHeight(f)},updateSettingTab:function(f){var e=this._getSelectElTab();var i;var h=b("#setting-menu-pset");var g=b("#setting-menu-shareaccount");if(f.indexOf(c.PAGE_SETTING_SHARE_ACCOUNT)>=0){i=b("#setting-tab-shareaccount");h.hide();g.show()}else{i=b("#setting-tab-pset");h.show();g.hide()}e.removeClass(a.CLS_PAGE_ITEM_SETTING_TAB_SELECTED);i.addClass(a.CLS_PAGE_ITEM_SETTING_TAB_SELECTED)},onsuccessGetMailAddonSetting:function(f,e,g){this._setToMailAddonSetting(f);c.app.setMailAddonSettingToIAppAddonSettingPage(f)},__closure:c.__closure,__bind:c.__bind,banpei:null},properties:{__constructor:function(){if(this instanceof a){var e="Class <neo.denbun.Setting> is not allowed to build instances.";throw new Error("neo.denbun.Setting.__constructor : "+e)}}}});a.constructor()})(jQuery);(function(a){var d=neo.core.readyNamespace("neo.denbun.Setting.Index");if(!d){return}var b=neo.denbun;var c=neo.denbun.Setting.Index=new neo.core.Class({classProperties:{constructor:function(){}},properties:{_elLink:null,_getElLink:function(){return this._elLink||this._initElLink()},_initElLink:function(){return this._elLink=a(".setting-index-link")},setting:null,_getPage:function(){return this.setting.page},_accountEnable:false,_getAccountEnable:function(){return this._accountEnable},_setAccountEnable:function(e){return this._accountEnable=e},_autoRecvEnable:false,_getAutoRecvEnable:function(){return this._autoRecvEnable},_setAutoRecvEnable:function(e){return this._autoRecvEnable=e},_iAppAddonEnable:false,_getIAppAddonEnable:function(){return this._iAppAddonEnable},_setIAppAddonEnable:function(e){return this._iAppAddonEnable=e},_gadgetAddonEnable:false,_getGadgetAddonEnable:function(){return this._gadgetAddonEnable},_setGadgetAddonEnable:function(e){return this._gadgetAddonEnable=e},_vacuumEnable:false,_getVacuumEnable:function(){return this._vacuumEnable},_setVacuumEnable:function(e){return this._vacuumEnable=e},_publicAddrDelEnable:false,_getPublicAddrDelEnable:function(){return this._publicAddrDelEnable},_setPublicAddrDelEnable:function(e){return this._publicAddrDelEnable=e},_elSelectTabLink:null,_getSelectElTabLink:function(){return this._elSelectTabLink||this._initElSelectTabLink()},_initElSelectTabLink:function(){return this._elSelectTabLink=a("#setting-tab-list .tab_selector-link")},__constructor:function(e){this.setting=e},initialize:function(){this._hook();this._setMailGeneralSettingToForm();if(!DENBUN_MODE_XNEO){this._initElAdminLink()}},_setMailGeneralSettingToForm:function(){var f=b.comSetting.isAllowedToAccountSetting();var g=b.comSetting.isAllowedToAutoReceive();this._setAccountSettingEnableToSetting(f);this._setAutoRecvSettingEnableToSetting(g);if(DENBUN_MODE_XNEO){if(!b.comSetting.isAvailableWebMail()){a(".setting-index-category-mail").hide()}var h=b.comSetting.isAllowedToVacuum();this._setVacuumSettingEnableToSetting(h);if(!b.comSetting.isAvailableAddress()){a(".setting-index-category-address").hide()}var e=b.comSetting.hasAuthorityToDelAllPublicAddress();this._setPublicAddrDelSettingEnableToSetting(e)}},_initElAdminLink:function(){var g=a("#setting-index-admin_link-container");var f=g.find("a");var e=b.getUrl(b.CGI_CONFIG);f.attr("href",e)},_setAccountSettingEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_ACCOUNT+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled");if(DENBUN_MODE_XNEO){this._convLinkElement(element,elParent)}}this._setAccountEnable(e)},_setAutoRecvSettingEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_AUTORECV+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled");if(DENBUN_MODE_XNEO){this._convLinkElement(element,elParent)}}this._setAutoRecvEnable(e)},setMailAddonSettingToSetting:function(f){var g=a(f);var j;var m=g.find("iapp");var k=m.find("enable");var e=false;if(k.text()=="1"){e=true}this._setIAppAddonEnableToSetting(e);var l=g.find("gadget");var i=l.find("enable");var h=false;if(i.text()=="1"){h=true}this._setGadgetAddonEnableToSetting(h)},_setIAppAddonEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_IAPPADDON+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled")}this._setIAppAddonEnable(e)},_setGadgetAddonEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_GADGETADDON+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled")}this._setGadgetAddonEnable(e)},_setVacuumSettingEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_VACUUM+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled");if(DENBUN_MODE_XNEO){this._convLinkElement(element,elParent)}}this._setVacuumEnable(e)},_setPublicAddrDelSettingEnableToSetting:function(e){element=a('[href="#page='+b.PAGE_SETTING_PUBLICADDRESSDELETE+'"]');elParent=element.parent();if(e){elParent.removeClass("disabled")}else{elParent.addClass("disabled");if(DENBUN_MODE_XNEO){this._convLinkElement(element,elParent)}}this._setPublicAddrDelEnable(e)},_convLinkElement:function(f,g){if(f.length>0&&g.length>0){var h=f.eq(0).text();var e=a("<span />").addClass(b.Setting.CLS_PAGE_ITEM_SETTING_INDEX_LINK).text(h);g.empty().append(e)}},_hook:function(){var e;e=this._getElLink();this.__bind(e,"click","Link");if(DENBUN_MODE_XNEO){e=this._getSelectElTabLink();this.__bind(e,"click","Tab")}},_openLink:function(e){b.openPage(e)},onclickLink:function(g,h){g.preventDefault();var f=a(h);var e=f.attr("href");if(DENBUN_MODE_XNEO){if(!e){return}}if(!this._getAccountEnable()){if(e=="#page="+b.PAGE_SETTING_ACCOUNT){return}}if(!this._getAutoRecvEnable()){if(e=="#page="+b.PAGE_SETTING_AUTORECV){return}}if(DENBUN_MODE_XNEO){if(!this._getVacuumEnable()){if(e=="#page="+b.PAGE_SETTING_VACUUM){return}}if(!this._getPublicAddrDelEnable()){if(e=="#page="+b.PAGE_SETTING_PUBLICADDRESSDELETE){return}}}else{if(!this._getIAppAddonEnable()){if(e=="#page="+b.PAGE_SETTING_IAPPADDON){return}}if(!this._getGadgetAddonEnable()){if(e=="#page="+b.PAGE_SETTING_GADGETADDON){return}}}this._openLink(f)},onclickTab:function(j,l){var f=a(l);var g=f.attr("href");var k=g.slice(g.indexOf("#")+1);var i=neo.core.splitParam(k);var e=i[b.PARAM_PAGE];var h={};b.openPage(e,h)},__closure:b.__closure,__bind:b.__bind,banpei:null}});c.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.SettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.SettingPage=new neo.core.Class({superClass:d.Page,classProperties:{constructor:function(){}},properties:{_ajaxGetSetting:null,_getAjaxGetSetting:function(){return this._ajaxGetSetting||this._initAjaxGetSetting()},_initAjaxGetSetting:function(){var f={url:this._getUrlToGetSetting(),getSendData:this.__closure(this._getDataToGetSetting),onsuccess:this.__closure(this.onsuccessGetSetting)};var g=new neo.denbun.Ajax(f);g.initialize();return this._ajaxGetSetting=g},_ajaxSetSetting:null,_getAjaxSetSetting:function(){return this._ajaxSetSetting||this._initAjaxSetSetting()},_initAjaxSetSetting:function(){var f={url:this._getUrlToSetSetting(),type:this._getHttpMethod(),getSendData:this.__closure(this._getDataToSetSetting),onsuccess:this.__closure(this.onsuccessSetSetting),onerror:this.__closure(this.onerrorSetSetting)};if(DENBUN_MODE_XNEO){f.errorconvmsg=this.__closure(this.onerrorConvMsg)}var g=new neo.denbun.Ajax(f);g.initialize();return this._ajaxSetSetting=g},_elForm:null,_getElForm:function(){return this._elForm||this._initElForm()},_initElForm:function(){var f=this._getClsThisPage();return this._elForm=c("."+f+" .setting_form")},_elPageTitle:null,_getElPageTitle:function(){return this._elPageTitle||this._initElPageTitle()},_initElPageTitle:function(){var f=this._getClsThisPage();return this._elPageTitle=c("."+f+"."+d.Page.CLS_CENTER_ITEM+" ."+d.CLS_COM_CONTENT_TITLE+":first")},_elPageBody:null,_getElPageBody:function(){return this._elPageBody||this._initElPageBody()},_initElPageBody:function(){var f=this._getClsThisPage();return this._elPageBody=c("."+f+"."+d.Page.CLS_CENTER_ITEM+" ."+d.CLS_COM_CONTENT_BODY+":first")},_elOk:null,_getElOk:function(){return this._elOk||this._initElOk()},_initElOk:function(){var f=this._getElForm();return this._elOk=f.find(".setting_form-ok")},_elCancel:null,_getElCancel:function(){return this._elCancel||this._initElCancel()},_initElCancel:function(){var f=this._getElForm();return this._elCancel=f.find(".setting_form-cancel")},_elRemove:null,_getElRemove:function(){return this._elRemove||this._initElRemove()},_initElRemove:function(){var f=this._getElForm();return this._elRemove=f.find(".setting_form-remove")},_elTableNoteContainer:null,_getElTableNoteContainer:function(){return this._elTableNoteContainer||this._initElTableNoteContainer()},_initElTableNoteContainer:function(){var f=this._getElForm();return this._elTableNoteContainer=f.find(".setting-table-note-container")},_elFormSubmitContainer:null,_getElFormSubmitContainer:function(){return this._elFormSubmitContainer||this._initElFormSubmitContainer()},_initElFormSubmitContainer:function(){var f=this._getElForm();return this._elFormSubmitContainer=f.find(".setting_form-submit-container")},_shareAccId:null,getShareAccId:function(){return this._shareAccId},_setShareAccId:function(){return this._shareAccId=d.getParameter(d.PARAM_SHARE_ACCOUNT_ID)||null},__constructor:function(){},initialize:function(){this._hook()},open:function(g){var h=b.getScrollTopOfLeftPageBody();if(DENBUN_MODE_XNEO){var f=d.getCurPageName();b.updateSettingTab(f);this._setShareAccId();this._setPageTitleSubToPage()}d.Page.prototype.open.apply(this,arguments);b.setScrollTopToLeftPageBody(h)},_setPageTitleSubToPage:function(){var i=this._getElPageTitle();var h=i.find(".page-setting-content-sub-title");if(h.length>0){var g=this.getShareAccId();if(g){var f=this;d.comSetting.getAccountList(function(o){var j="";var n=o.list;var l=n.length;for(var k=0;k<l;k++){var m=n[k];if(m.share=="1"&&m.id==g){j=" ("+m.accountName+" <"+m.mail+">)";break}}h.html("<br>");var p=neo.core.escape(j);p=desknets.escapeSpace(p);h.html(p)})}else{h.empty()}}},_hook:function(){var f;f=this._getElForm();this.__bind(f,"submit");f=this._getElOk();this.__bind(f,"click","Ok");f=this._getElCancel();this.__bind(f,"click","Cancel");f=this._getElRemove();this.__bind(f,"click","Remove")},_clean:function(){d.Page.prototype._clean.apply(this,arguments);b.resetForm(this);var f=this;setTimeout(function(){f._revertScrolling()},0)},_revertScrolling:function(){var f=this._getElPageBody();f.scrollTop(0)},_initOnOpening:function(){this._showLeft();this._hideRight();this._updateToolbarMenuVisiblity();this._load();b.initSetting()},_getElOwnItemsLow:function(){var f=this._getClsThisPage();return c("."+b.CLS_COM_ITEM+", ."+f)},_getClsThisPage:function(){},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(false);b.toggleVisibilityRemoveToolbarButton(false)},_load:function(){this._disableOkButton();var f=this._getAjaxGetSetting();f.sendRequest()},_getUrlToGetSetting:function(){return undefined},_getDataToGetSetting:function(){},_setPageTitle:function(h){var g=this._getElPageTitle();if(DENBUN_MODE_XNEO){var f=g.find(".page-setting-content-main-title");if(f.length>0){f.text(h);return}}g.text(h)},ok:function(){var f=this._validate();if(f.length>0){this._showValidationError(f)}else{this._decide()}},_decide:function(){var f=this._getAjaxSetSetting();f.sendRequest();this._disableOkButton();d.app.setSettingModified()},_validate:function(){var f=[];if(false){f.push("駄目です。")}return f},_showValidationError:function(g){var f="";if(g.length>0){f="- "+g.join("\n- ")}neo.denbun.alert(f)},_getUrlToSetSetting:function(){return a.URL_DEFAULT},_getHttpMethod:function(){return undefined},_getDataToSetSetting:function(){var f=this._getElForm();var n=f.serializeArray();var k={};for(var j=0;j<n.length;j++){k[n[j].name]=n[j].value}var m=f.find('input[type="checkbox"]');for(var j=0;j<m.length;j++){var h=m.eq(j);var g=h.attr("name");var l=(h.attr("checked")?"1":"0");k[g]=l}return k},_setToForm:function(f){},cancel:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT,null,false);return}}d.openPage(d.PAGE_SETTING_INDEX,null,false)},remove:function(){},_showRemoveButton:function(){var f=this._getElRemove();f.show();b.toggleVisibilityRemoveToolbarButton(true)},_hideRemoveButton:function(){var f=this._getElRemove();f.hide();b.toggleVisibilityRemoveToolbarButton(false)},_getElInputOf:function(h){var g=this._getElForm();var f=g.find('[name="'+h+'"]');return f},_enableOkButton:function(){var f=this._getElOk();f.attr("disabled",false);b.toggleEnableOfOkToolbarButton(true)},_disableOkButton:function(){var f=this._getElOk();f.attr("disabled",true);b.toggleEnableOfOkToolbarButton(false)},_initEncodeType:function(){var g=this._getElForm();var h=c.cookie(desknets.COOKIENAME_IMEX_CCODE);var f=c.cookie(desknets.COOKIENAME_IMEX_CSEP);if(h){g.find('[name="char_code"]').val(h)}if(f){g.find('[name="char_sep"]').val(f)}},_setCookiesEncodeType:function(){var f=this._getElForm();desknets.saveCookieToDisk(desknets.COOKIENAME_IMEX_CCODE,f.find('[name="char_code"]').val());desknets.saveCookieToDisk(desknets.COOKIENAME_IMEX_CSEP,f.find('[name="char_sep"]').val())},onsuccessGetSetting:function(g,f,h){this._setToForm(g);this._enableOkButton()},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT);return}}d.openPage(d.PAGE_SETTING_INDEX)},onerrorSetSetting:function(h,g,i){this._enableOkButton();if(DENBUN_MODE_XNEO){var f=i.type;var g={onok:g.afterShowError};h=h.replace(/(\r\n|\r|\n)/g,"<br />");neo.denbun.alert(h,g,f,true);return false}},onsubmit:function(f,g){f.preventDefault()},onclickOk:function(f,g){this.ok()},onclickCancel:function(f,g){this.cancel()},onclickRemove:function(f,g){this.remove()},onerrorConvMsg:function(h){var g="";if(!!h&&!!h.errmsgadd&&h.errmsgadd!=""){var f=this._getElForm().find('[name="'+h.errmsgadd+'"]').closest("td").prev("th").find(".setting-item_name").eq(0).text();g=f+desknets.merrMsgConnect}return g},__closure:d.__closure,__bind:d.__bind,banpei:null}});a.constructor()})(jQuery);(function(b){var d=neo.core.readyNamespace("neo.denbun.Setting.SettingTable");if(!d){return}var c=neo.denbun;var a=neo.denbun.Setting.SettingTable=new neo.core.Class({superClass:c.Table,classProperties:{CLS_USUALLYUSE_LABEL:"setting-table-usuallyuse-label",NAME_USUALLYUSE:"setting-table-usuallyuse",MOVEROW_UP:"up",MOVEROW_DOWN:"down"},properties:{_getUrlToLoad:function(){return c.getUrl(c.CGI_EML)},_hookCom:function(){c.Table.prototype._hookCom.apply(this,arguments);var e;e=this._getElContainer().find('[name="'+a.NAME_USUALLYUSE+'"]');this.__bind(e,"click","UsuallyUse")},_defaultId:null,getDefaultId:function(){return this._defaultId},_setDefaultId:function(e){return this._defaultId=e},_getPage:function(){return this.setting.page},moveRangeCheck:function(f,e){var g;if(e==a.MOVEROW_UP){g=this.getFirstRowId()}else{if(e==a.MOVEROW_DOWN){g=this.getLastRowId()}}if(!g){return false}if(b.inArray(g,f)>=0){return false}return true},getFirstRowId:function(){var e=this._getIdList();var f=null;if(e){f=e[0]}return f},getLastRowId:function(){var e=this._getIdList();var f=null;if(e){f=e[e.length-1]}return f},moveRow:function(g,e){if(!g||g.length<1){return}if(this.moveRangeCheck(g,e)!=true){return}var h=this._getIdList();var f;f=this.getMovedArray(h,g,e);this._setIdList(f);this._updateTable()},getMovedArray:function(h,e,f){var g;if(f==a.MOVEROW_UP){g=this._getMovedUpArray(h,e)}else{if(f==a.MOVEROW_DOWN){g=this._getMovedDownArray(h,e)}}return g},_getMovedUpArray:function(g,e){var f=[];g.reverse();try{f=this._getMovedDownArray(g,e)}finally{g.reverse()}f.reverse();return f},_getMovedDownArray:function(p,l){var g=[];var n=[];var e=false;var k=null;for(var h=0;h<p.length;h++){var o=p[h];if(b.inArray(o,l)>=0){if(e==true){n.push(o);continue}e=true;for(var f=h+1;f<p.length;f++){var m=p[f];if(b.inArray(m,l)>=0){continue}k=f;g.push(m);break}n.push(o);continue}if(e){g=g.concat(n);n=[];e=false}if(o==p[k]){continue}g.push(o)}if(e){g=g.concat(n);n=[]}return g},_setIdList:function(f){var h=this._getData();h.idList=f;var g=this._getRows();for(var e=0;e<f.length;e++){var k=f[e];var j=g[k];if(j){j.index=e}}},deleteRowByIds:function(f){for(var e=0;e<f.length;e++){this.deleteRowById(f[e])}this._updateTable()},deleteRowById:function(e){this._setCurRow(null);var g=this._getIdList();var h=[];for(var f=0;f<g.length;f++){var j=g[f];if(j!=e){h.push(j)}}this._setIdList(h)},show:function(){var e=this._getElContainer();e.show()},hide:function(){var e=this._getElContainer();e.hide()},setHeight:function(e){var f=this._getElContainer();f.height(e)},onclickUsuallyUse:function(e,f){var g=this._getRowIdFrom(b(e.target));this._setDefaultId(g)},banpei:null}});a.constructor()})(jQuery);(function(a){var d=neo.core.readyNamespace("neo.denbun.Setting.SettingAddressImportExportList");if(!d){return}var c=neo.denbun;var b=neo.denbun.Setting.SettingAddressImportExportList=new neo.core.Class({classProperties:{MOVEITEM_UP:"up",MOVEITEM_DOWN:"down",constructor:function(){}},properties:{_getElList:function(){return this.setting.elList},_data:null,_getData:function(){return this._data},_setData:function(e){return this._data=e},setting:null,_ajaxLoad:null,_getAjaxLoad:function(){return this._ajaxLoad||this._initAjaxLoad()},_initAjaxLoad:function(){var e=this;var f={getSendData:function(){var h=e._getDataToLoad();return h},onsuccess:this.__closure(this.onsuccessLoad)};var g=new c.Ajax(f);g.initialize();return this._ajaxLoad=g},__constructor:function(e){this.setting=e},initialize:function(){this._hook()},_hook:function(){},load:function(f){var e=this._getAjaxLoad();e.sendRequest()},_getDataToLoad:function(){var e={cmd:"addritemseq"};return e},_parseData:function(f){var g={};var e=a(f).children();g.list=this._parseDataList(e);return g},_parseDataList:function(f){var l=this._getDefaultListOrder();var k=new Array(l.length);var e=f.children();for(var j=0;j<l.length;j++){var g=f.children(l[j][0]);if(g.length>0){var h=g.attr("seq")-1;var m={id:l[j][0],text:l[j][1]};k[h]=m}}return k},_update:function(f){this._setData(f);var e=f.list;this._updateList(e)},_updateList:function(e){this._buildElList(e)},_buildElList:function(j){var f=this._getElList();f.empty();for(var g=0;g<j.length;g++){var h=j[g];if(!h){continue}var e=this._buildElItem(h);f.append(e)}},_buildElItem:function(f){var e=a("<option />");e.attr("value",f.id);e.text(f.text);return e},getElSelectedItem:function(){var f=this._getElList();var e=f.children(":selected");return e},getSelectedItemId:function(){var e=this.getElSelectedItem();return e.val()},getItemIdList:function(){var f=this._getElList();var e=f.children();var h=[];for(var g=0;g<e.length;g++){var j=e.eq(g).attr("value");h.push(j)}return h},moveListItem:function(h,g){if(!h){return}if(this.moveRangeCheck(h,g)!=true){return}var e=this.getItemIdList();var f=this._getMovedArray(e,h,g);this._setListOrderByRowIds(f)},moveRangeCheck:function(i,f){var h=this._getElList();var e=h.children();var g=0;for(;g<e.length;g++){if(e.eq(g).attr("value")==i){break}}if(f==b.MOVEITEM_UP){if(g<1){return false}}else{if(f==b.MOVEITEM_DOWN){if(g>=e.length-1){return false}}}return true},_setListOrderByRowIds:function(e){var f=this;var g=function(){var n=0;var q=f._getElList();var p=q.children();var r=[];for(var o=0;o<p.length;o++){r.push(p.eq(o))}for(var o=0;o<e.length;){if(n>=r.length){break}var l=r[n];if(l==null){n++;continue}var h=l.attr("value");if(e[o]==h){n++;o++;continue}for(var m=n+1;m<r.length;m++){var s=r[m];if(s==null){continue}var t=s.attr("value");if(e[o]==t){l.before(s);r[m]=null;break}}o++}};this._updateOrder(e,function(){g()})},_updateOrder:function(f,e){var k={cmd:"addrcmditemseq"};for(var g=0;g<f.length;g++){k[f[g]]=g+1}var h={getSendData:function(){return k},onsuccess:function(){if(e){e()}}};var j=new c.Ajax(h);j.initialize();j.sendRequest()},restoreDefault:function(){var f=this._getDefaultListOrder();var g=[];for(var e=0;e<f.length;e++){g.push(f[e][0])}this._setListOrderByRowIds(g)},_getDefaultListOrder:function(){var h=c.getLang();if(h==c.LANG_JA){var f=[["id",c.getText("ＩＤ（システムＩＤ：自動発番）")],["Name",c.getText("氏名")],["Kana",c.getText("ふりがな")],["Mail",c.getText("e-mail")],["TelHand",c.getText("携帯電話")],["homeCountry",c.getText("自宅－国名")],["homeZip",c.getText("自宅－郵便番号")],["homeState",c.getText("自宅－都道府県")],["homeCity",c.getText("自宅－市区町村・番地")],["homeAddress",c.getText("自宅－ビル・マンション名")],["TelHome",c.getText("自宅－TEL")],["Country",c.getText("勤務先－国名")],["Zip",c.getText("勤務先－郵便番号")],["State",c.getText("勤務先－都道府県")],["City",c.getText("勤務先－市区町村・番地")],["Address",c.getText("勤務先－ビル・マンション名")],["Company",c.getText("勤務先－会社名")],["CompanyKana",c.getText("勤務先－会社名ふりがな")],["Tel1",c.getText("勤務先－代表TEL")],["CompanyFax",c.getText("勤務先－代表FAX")],["Post",c.getText("勤務先－役職")],["Office",c.getText("勤務先－事業所")],["Dept1",c.getText("勤務先－部署１")],["Dept2",c.getText("勤務先－部署２")],["Tel2",c.getText("勤務先－部署TEL")],["TelFax",c.getText("勤務先－部署FAX")],["mailprivate",c.getText("個人－e-mail(個人)")],["mailmobile",c.getText("個人－e-mail(携帯)")],["Birthday",c.getText("個人－生年月日")],["Memo",c.getText("個人－備考")]]}else{var f=[["id",c.getText("ＩＤ（システムＩＤ：自動発番）")],["Name",c.getText("氏名")],["Mail",c.getText("e-mail")],["TelHand",c.getText("携帯電話")],["homeCountry",c.getText("自宅－国名")],["homeZip",c.getText("自宅－郵便番号")],["homeState",c.getText("自宅－都道府県")],["homeCity",c.getText("自宅－市区町村・番地")],["homeAddress",c.getText("自宅－ビル・マンション名")],["TelHome",c.getText("自宅－TEL")],["Country",c.getText("勤務先－国名")],["Zip",c.getText("勤務先－郵便番号")],["State",c.getText("勤務先－都道府県")],["City",c.getText("勤務先－市区町村・番地")],["Address",c.getText("勤務先－ビル・マンション名")],["Company",c.getText("勤務先－会社名")],["Tel1",c.getText("勤務先－代表TEL")],["CompanyFax",c.getText("勤務先－代表FAX")],["Post",c.getText("勤務先－役職")],["Office",c.getText("勤務先－事業所")],["Dept1",c.getText("勤務先－部署１")],["Dept2",c.getText("勤務先－部署２")],["Tel2",c.getText("勤務先－部署TEL")],["TelFax",c.getText("勤務先－部署FAX")],["mailprivate",c.getText("個人－e-mail(個人)")],["mailmobile",c.getText("個人－e-mail(携帯)")],["Birthday",c.getText("個人－生年月日")],["Memo",c.getText("個人－備考")]]}if(c.getCurPageName()==c.PAGE_SETTING_ADDRESSIMPORT){var g=0;var e=f.length;for(g=0;g<e;g++){if(f[g][0]=="Name"){f[g][1]=f[g][1]+" (*)"}else{if(f[g][0]=="Kana"){f[g][1]=f[g][1]+" (*)"}}}}return f},_getMovedArray:function(m,l,e){var k=[];for(var h=0;h<m.length;h++){var j=m[h];k.push(j)}var g=null;for(var h=0;h<k.length;h++){var j=k[h];if(j==l){g=h;break}}if(g==null){return}if(e==b.MOVEITEM_UP){if(g<1){return}var f=k[g-1];k[g-1]=k[g];k[g]=f}else{if(e==b.MOVEITEM_DOWN){if(g>=k.length-1){return}var f=k[g+1];k[g+1]=k[g];k[g]=f}}return k},onsuccessLoad:function(f,e,g){var h=this._parseData(f);this._update(h)},__closure:c.__closure,__bind:c.__bind,banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.IndexPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.IndexPage=new neo.core.Class({superClass:d.Page,classProperties:{CLS_INDEX_ITEM:"page-setting_index-item",constructor:function(){}},properties:{_elPageBody:null,_getElPageBody:function(){return this._elPageBody||this._initElPageBody()},_initElPageBody:function(){return this._elPageBody=c("."+a.CLS_INDEX_ITEM+"."+d.Page.CLS_CENTER_ITEM+" ."+d.CLS_COM_CONTENT_BODY+":first")},__constructor:function(){},initialize:function(){if(DENBUN_MODE_XNEO){b._getIndex()._setMailGeneralSettingToForm()}},open:function(g){if(DENBUN_MODE_XNEO){var f=d.getCurPageName();b.updateSettingTab(f)}d.Page.prototype.open.apply(this,arguments)},_initOnOpening:function(){this._showLeft();this._hideRight();b.setScrollTopToLeftPageBody(0);var f=this;setTimeout(function(){f._revertScrolling()},0);this._updateToolbarMenuVisiblity();b.loadSetting()},_revertScrolling:function(){var f=this._getElPageBody();f.scrollTop(0)},_getElOwnItemsLow:function(){return c("."+b.CLS_COM_ITEM+", ."+a.CLS_INDEX_ITEM)},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(false);b.toggleVisibilityRemoveToolbarButton(false)},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.VisualSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.VisualSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{FIELD_NAME_AJAXDDCTRLUSE:"ajaxddctrluse",FIELD_NAME_SVCONFIRM:"svconfirm",VAL_AJAXDDCTRLUSE_NONUSE:"0",constructor:function(){}},properties:{_elDDCtrlDataCell:null,_getElDDCtrlDataCell:function(){return this._elDDCtrlDataCell||this._initElDDCtrlDataCell()},_initElDDCtrlDataCell:function(){var f=this._getElForm();return this._elDDCtrlDataCell=f.find(".setting_visual-ddctrluse-data-cell")},_elSavePeriodRow:null,_getElSavePeriodRow:function(){return this._elSavePeriodRow||this._initElSavePeriodRow()},_initElSavePeriodRow:function(){var f=this._getElForm();return this._elSavePeriodRow=f.find(".setting_visual-svconfirm-row")},_getClsThisPage:function(){return"page-setting_visual-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToGetSetting:function(){var f={cmd:"mailgenprivate"};return f},_setToForm:function(g){if(!DENBUN_MODE_XNEO){var f=c(g).children();var h="";h=f.find(b.FIELD_NAME_AJAXDDCTRLUSE).text();this._setToFileDragAndDrop(h);h=f.find(b.FIELD_NAME_SVCONFIRM).text();this._setToSavePeriod(h)}a.setResponseToForm(this,g)},_setToFileDragAndDrop:function(h){var f=this._getElInputOf(b.FIELD_NAME_AJAXDDCTRLUSE);var g=this._getElDDCtrlDataCell();if(h){f.attr("disabled",false);g.removeClass("disabled")}else{f.attr("disabled",true);f.val([b.VAL_AJAXDDCTRLUSE_NONUSE]);g.addClass("disabled")}},_setToSavePeriod:function(f){var g=this._getElSavePeriodRow();if(f){g.show()}else{g.hide()}},banpei:null}});b.constructor()})(jQuery);(function(b){var e=neo.core.readyNamespace("neo.denbun.Setting.BasicSettingPage");if(!e){return}var c=neo.denbun;var a=c.Setting;var d=neo.denbun.Setting.BasicSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{FIELD_NAME_AJAXDDCTRLUSE:"ajaxddctrluse",FIELD_NAME_SVCONFIRM:"svconfirm",VAL_AJAXDDCTRLUSE_NONUSE:"0",constructor:function(){}},properties:{_elDDCtrlDataCell:null,_getElDDCtrlDataCell:function(){return this._elDDCtrlDataCell||this._initElDDCtrlDataCell()},_initElDDCtrlDataCell:function(){var f=this._getElForm();return this._elDDCtrlDataCell=f.find(".setting_basic-ddctrluse-data-cell")},_elSavePeriodRow:null,_getElSavePeriodRow:function(){return this._elSavePeriodRow||this._initElSavePeriodRow()},_initElSavePeriodRow:function(){var f=this._getElForm();return this._elSavePeriodRow=f.find(".setting_basic-svconfirm-row")},_elSendRow:null,_getElSendRow:function(){return this._elSendRow||this._initElSendRow()},_initElSendRow:function(){var f=this._getElForm();return this._elSendRow=f.find(".setting_basic-send-row")},_elMlOpenTypeRow:null,_getElMlOpenTypeRow:function(){return this._elMlOpenTypeRow||this._initElMlOpenTypeRow()},_initElMlOpenTypeRow:function(){var f=this._getElForm();return this._elMlOpenTypeRow=f.find(".setting_basic-mlopentype-row")},_elSavePeriod:null,_getElSavePeriod:function(){return this._elSavePeriod||this._initElSavePeriod()},_initElSavePeriod:function(){var f=this._getElForm();return this._elSavePeriod=f.find(".setting_basic-svrmail-value")},_getClsThisPage:function(){return"page-setting_basic-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_initOnOpening:function(){if(DENBUN_MODE_XNEO){this._clean();if(this.getShareAccId()){this._getElSendRow().hide();this._getElMlOpenTypeRow().hide()}else{this._getElSendRow().show();this._getElMlOpenTypeRow().show()}var g=this._getElSavePeriod();var f=c.comSetting.getSavePeriod();var i="";if(f==0){i=c.getText("無期限")}else{var h=c.getText("$$ヶ月");i=neo.core.replace(h,f+"")}g.text(i)}this.__call("_initOnOpening",arguments)},_getDataToGetSetting:function(){var f={cmd:"mailgenprivate"};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccgen";f[c.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_setToForm:function(g){var f=b(g).children();var h="";if(!DENBUN_MODE_XNEO){h=f.find(d.FIELD_NAME_AJAXDDCTRLUSE).text();this._setToFileDragAndDrop(h)}h=f.find(d.FIELD_NAME_SVCONFIRM).text();this._setToSavePeriod(h);a.setResponseToForm(this,g)},_setToFileDragAndDrop:function(h){var f=this._getElInputOf(d.FIELD_NAME_AJAXDDCTRLUSE);var g=this._getElDDCtrlDataCell();if(h){f.attr("disabled",false);g.removeClass("disabled")}else{f.attr("disabled",true);f.val([d.VAL_AJAXDDCTRLUSE_NONUSE]);g.addClass("disabled")}},_setToSavePeriod:function(f){var g=this._getElSavePeriodRow();if(f){g.show()}else{g.hide()}},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(DENBUN_MODE_XNEO){if(this.getShareAccId()){delete f.mlopentime;delete f.mlopentype;f.cmd="mailcmdshareaccgen";f[c.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},banpei:null}});d.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.SendMistakeSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.SendMistakeSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_elSendRow:null,_getElSendRow:function(){return this._elSendRow||this._initElSendRow()},_initElSendRow:function(){var f=this._getElForm();return this._elSendRow=f.find(".setting_sendmistake-send-row")},_elUndoSendRow:null,_getElUndoSendRow:function(){return this._elUndoSendRow||this._initElUndoSendRow()},_initElUndoSendRow:function(){var f=this._getElForm();return this._elUndoSendRow=f.find(".setting_sendmistake-undosend-row")},_getClsThisPage:function(){return"page-setting_sendmistake-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToGetSetting:function(){var f={cmd:"mailgenprivate"};return f},_setToForm:function(h){var v=c(h).children();var C="";a.setResponseToForm(this,h);if(DENBUN_MODE_XNEO){if(!d.comSetting.getFlgConfirmBeforeSendSetting()){var C=d.comSetting.getConfirmBeforeSendGen();var z=this._getElInputOf("send");z.filter('[value="'+C+'"]').attr("checked",true);z.attr("disabled",true);var l=d.comSetting.isSendConfTargetFrom();var t=this._getElInputOf("sendconffrom");t.attr("checked",l);var A=d.comSetting.isSendConfTargetTo();var K=this._getElInputOf("sendconfto");K.attr("checked",A);var M=d.comSetting.isSendConfTargetCc();var y=this._getElInputOf("sendconfcc");y.attr("checked",M);var m=d.comSetting.isSendConfTargetBcc();var i=this._getElInputOf("sendconfbcc");i.attr("checked",m);var q=d.comSetting.isSendConfTargetPriority();var J=this._getElInputOf("sendconfpriority");J.attr("checked",q);var r=d.comSetting.isSendConfTargetNotify();var o=this._getElInputOf("sendconfnotify");o.attr("checked",r);var B=d.comSetting.isSendConfTargetCharset();var k=this._getElInputOf("sendconfcharset");k.attr("checked",B);var s=d.comSetting.isSendConfTargetSubject();var n=this._getElInputOf("sendconfsubject");n.attr("checked",s);var F=d.comSetting.isSendConfTargetBody();var L=this._getElInputOf("sendconfbody");L.attr("checked",F);var f=d.comSetting.isSendConfTargetAtt();var H=this._getElInputOf("sendconfatt");H.attr("checked",f);var x=(d.comSetting.isSendConfExceptWhiteList()?1:0);var u=this._getElInputOf("exceptwhitelist");u.filter('[value="'+x+'"]').attr("checked",true);var w=(d.comSetting.isSendConfManySend()?1:0);var I=this._getElInputOf("manysend");I.filter('[value="'+w+'"]').attr("checked",true);var g=d.comSetting.getSendConfManySendCount();var D=this._getElInputOf("manysendcount");D.val(g);t.attr("disabled",true);K.attr("disabled",true);y.attr("disabled",true);i.attr("disabled",true);J.attr("disabled",true);o.attr("disabled",true);k.attr("disabled",true);n.attr("disabled",true);L.attr("disabled",true);H.attr("disabled",true);u.attr("disabled",true);I.attr("disabled",true);D.attr("disabled",true)}if(!d.comSetting.getFlgUndoSendSetting()){var E=d.comSetting.getUndoSendTypeGen();var j=this._getElInputOf("undosendtype");j.attr("checked",(E=="1"?true:false));var G=d.comSetting.getUndoSendTimeGen();var p=this._getElInputOf("undosendtime");p.val(G);j.attr("disabled",true);p.attr("disabled",true)}}},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);return f},onsuccessGetSetting:function(g,f,h){this.__call("onsuccessGetSetting",arguments);if(!d.comSetting.getFlgConfirmBeforeSendSetting()&&!d.comSetting.getFlgUndoSendSetting()){this._disableOkButton()}},banpei:null}});b.constructor()})(jQuery);(function(b){var e=neo.core.readyNamespace("neo.denbun.Setting.TrushSettingPage");if(!e){return}var c=neo.denbun;var a=c.Setting;var d=neo.denbun.Setting.TrushSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{VAL_DUSTKIND_DELETE:"1",VAL_DUSTKIND_DELETE_INDUSTTRAY:"3",constructor:function(){}},properties:{getDustKind:function(){var f=this._getElForm();return f.find("input[name=dustkind]:checked").val()},getDelDays:function(){var f=this._getElForm();return f.find("input[name=ddeldays]").val()},_getInDelDays:function(){var f=this._getElForm();return f.find("input[name=dindeldays]").val()},_getClsThisPage:function(){return"page-setting_trush-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_validate:function(){var g=[];var f;if(this._validateDeleteButElapsedDaysIsNothing()){var h=c.getText("経過日数");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validateElapsedDaysIsNaN()){var h=c.getText("経過日数");var i=neo.denbun.getText("$$に不正な文字が使われています。");f=neo.core.replace(i,h);g.push(f)}return g},_validateDeleteButElapsedDaysIsNothing:function(){if(this.getDustKind()==d.VAL_DUSTKIND_DELETE){if(!this.getDelDays()){return true}}if(DENBUN_MODE_XNEO){if(this.getDustKind()==d.VAL_DUSTKIND_DELETE_INDUSTTRAY){if(!this._getInDelDays()){return true}}}return false},_validateElapsedDaysIsNaN:function(){if(isNaN(this.getDelDays())){return true}if(DENBUN_MODE_XNEO){if(isNaN(this._getInDelDays())){return true}}return false},_getDataToGetSetting:function(){var f={cmd:"maildusttray"};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccdusttray";f[c.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_setToForm:function(f){a.setResponseToForm(this,f)},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareaccdusttray";f[c.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},banpei:null}});d.constructor()})(jQuery);(function(b){var e=neo.core.readyNamespace("neo.denbun.Setting.AccountSettingPage");if(!e){return}var c=neo.denbun;var a=c.Setting;var d=neo.denbun.Setting.AccountSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_elNew:null,_getElNew:function(){return this._elNew||this._initElNew()},_initElNew:function(){var f=this._getElForm();return this._elNew=f.find(".setting_account-new")},_elEdit:null,_getElEdit:function(){return this._elEdit||this._initElEdit()},_initElEdit:function(){var f=this._getElForm();return this._elEdit=f.find(".setting_account-edit")},_elDelete:null,_getElDelete:function(){return this._elDelete||this._initElDelete()},_initElDelete:function(){var f=this._getElForm();return this._elDelete=f.find(".setting_account-delete")},_elUp:null,_getElUp:function(){return this._elUp||this._initElUp()},_initElUp:function(){var f=this._getElForm();return this._elUp=f.find(".setting_account-up")},_elDown:null,_getElDown:function(){return this._elDown||this._initElDown()},_initElDown:function(){var f=this._getElForm();return this._elDown=f.find(".setting_account-down")},_table:null,_getTable:function(){return this._table||this._initTable()},_initTable:function(){var f={};if(DENBUN_MODE_XNEO){f={page:this}}var g=new d.Table(f);g.initialize();return this._table=g},_elMenu:null,_getElMenu:function(){return this._elMenu||this._initElMenu()},_initElMenu:function(){return this._elMenu=b("#popup_menu-setting_share_account-shareaccount_setting")},_boShareAccFlg:null,isShareAcc:function(){return this._boShareAccFlg},_setShareAccFlg:function(f){return this._boShareAccFlg=f},initialize:function(){this.__call("initialize",arguments);if(DENBUN_MODE_XNEO){this._setMailGeneralSettingToMenu()}},_setMailGeneralSettingToMenu:function(){var g=this._getElMenu();if(!c.comSetting.isAllowedToAutoReceive()){var f=g.find("."+c.App.Menu.CLS_MENU_ITEM+".setting_share_account-autorecv");f.addClass(c.CLS_DISABLED)}if(!c.comSetting.isAllowedToVacuum()){var f=g.find("."+c.App.Menu.CLS_MENU_ITEM+".setting_share_account-vacuum");f.addClass(c.CLS_DISABLED)}},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElNew();this.__bind(f,"click","New");f=this._getElEdit();this.__bind(f,"click","Edit");f=this._getElDelete();this.__bind(f,"click","Delete");f=this._getElUp();this.__bind(f,"click","Up");f=this._getElDown();this.__bind(f,"click","Down")},_getClsThisPage:function(){return"page-setting_account-item"},open:function(f){if(DENBUN_MODE_XNEO){var g=(c.getCurPageName()==c.PAGE_SETTING_SHARE_ACCOUNT);this._setShareAccFlg(g);this._updateTableColVisiblity();this._updateButtonVisiblity();this._setPageTitleToPage()}this.__call("open",arguments)},_setPageTitleToPage:function(){var f="";if(this.isShareAcc()){f=neo.denbun.getText("共有アカウント設定")}else{f=neo.denbun.getText("アカウント設定")}this._setPageTitle(f)},_updateTableColVisiblity:function(){var f=this._getClsThisPage();if(this.isShareAcc()){b("."+f+" .setting_account-table-cell-usuallyuse").hide();b("."+f+" .setting_account-table-cell-setting").show()}else{b("."+f+" .setting_account-table-cell-usuallyuse").show();b("."+f+" .setting_account-table-cell-setting").hide()}},_updateButtonVisiblity:function(){var f=this._getClsThisPage();if(this.isShareAcc()){this._getElTableNoteContainer().hide();this._getElFormSubmitContainer().hide()}else{this._getElTableNoteContainer().show();this._getElFormSubmitContainer().show()}},_updateToolbarMenuVisiblity:function(){if(DENBUN_MODE_XNEO){var f=!!this.isShareAcc();a.toggleVisibilityOkAndCancelToolbarButton(!f)}else{a.toggleVisibilityOkAndCancelToolbarButton(true)}a.toggleVisibilityRemoveToolbarButton(false)},_getDataToSetSetting:function(){var f={};f.cmd="mailcmdacclist";var g=this._getTable();var h=g.getDefaultId();if(h){f.id=h}return f},_clean:function(){this.__call("_clean",arguments);var f=this._getTable();f.load()},_load:function(){this._enableOkButton()},startCreatingAccount:function(){if(DENBUN_MODE_XNEO){if(this.isShareAcc()){c.openPage(c.PAGE_SETTING_SHARE_ACCOUNT_EDIT);return}}c.openPage(c.PAGE_SETTING_ACCOUNT_EDIT)},startCreatingAccountGmail:function(){this._startEasySetupAccount("gmail")},startCreatingAccountYahoo:function(){this._startEasySetupAccount("yahoo")},_startEasySetupAccount:function(g){var f={mode:g};if(DENBUN_MODE_XNEO){if(this.isShareAcc()){c.openPage(c.PAGE_SETTING_SHARE_ACCOUNT_EASY_SETUP,f);return}}c.openPage(c.PAGE_SETTING_ACCOUNT_EASY_SETUP,f)},startEditingAccount:function(){var f=this._getSelectedAccountId();if(!f){var h=c.getText("対象アカウントを選択してください。");c.alert(h);return}var g={id:f};if(DENBUN_MODE_XNEO){if(this.isShareAcc()){c.openPage(c.PAGE_SETTING_SHARE_ACCOUNT_EDIT,g);return}}c.openPage(c.PAGE_SETTING_ACCOUNT_EDIT,g)},deleteAccount:function(){var j=this._getTable();var h=j.getSelectedIdList();if(h.length<1){var i=c.getText("対象アカウントを選択してください。");c.alert(i);return}var f=this;var i=c.getText("選択したアカウントを削除してよろしいですか？");var g=c.getText("※対象のアカウントに保存されているメールデータも削除されます。");c.confirm(i,{onok:function(){if(DENBUN_MODE_XNEO){if(f.isShareAcc()){a.deleteShareAccount(h,function(){j.deleteRowByIds(h)},null);return}}a.deleteAccount(h,function(){j.load()})}},g)},moveAccount:function(f){var l=this._getTable();var i=l.getSelectedIdList();if(i.length<1){var k=c.getText("対象アカウントを選択してください。");c.alert(k);return}if(l.moveRangeCheck(i,f)){var h={getSendData:function(){var n={cmd:"mailaccountupdown",id:i,proc:f};return n},onsuccess:function(){l.moveRow(i,f)}};if(DENBUN_MODE_XNEO){if(this.isShareAcc()){var j=l._getIdList();var g=l.getMovedArray(j,i,f);h.getSendData=function(){var n={cmd:"mailcmdshareaccindex",id:g,proc:f};return n}}}var m=new c.Ajax(h);m.initialize();m.sendRequest();c.app.setSettingModified()}},_getSelectedAccountId:function(){var f=this._getTable();if(f.getSelectedCount()>0){var g=f.getCurId();return g}return null},_showCreatingAccountMenu:function(){var g=this._getElNew();var f=c.getRect(g,true);var h={left:f.left,top:f.top+f.height};c.app.showMenu("setting_account","account_create",h)},_openShareAccountSettingPage:function(f){var g=this._getSelectedAccountId();if(!g){var i=c.getText("対象アカウントを選択してください。");c.alert(i);return}var h={};h[c.PARAM_SHARE_ACCOUNT_ID]=g;c.openPage(f,h)},openShareAccountSettingBasic:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_BASIC)},openShareAccountSettingTrush:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_TRUSH)},openShareAccountSettingNotification:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_NOTIFICATION)},openShareAccountSettingAutorecv:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_AUTORECV)},openShareAccountSettingSign:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_SIGN)},openShareAccountSettingFilter:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_FILTER)},openShareAccountSettingJunkMail:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL)},openShareAccountSettingVacuum:function(){this._openShareAccountSettingPage(c.PAGE_SETTING_SHARE_ACCOUNT_VACUUM)},onresize:function(g){var f=this._getTable();var h=-7;if(DENBUN_MODE_XNEO){if(this.isShareAcc()){h=-12}}a.updateTableHeight(this,f,h);f.onresize(g)},onsuccessSetSetting:function(){c.comSetting.clearAccountList();this.__call("onsuccessSetSetting",arguments)},onclickNew:function(f,g){this._showCreatingAccountMenu()},onclickEdit:function(f,g){this.startEditingAccount()},onclickDelete:function(f,g){this.deleteAccount()},onclickUp:function(f,g){this.moveAccount(a.SettingTable.MOVEROW_UP)},onclickDown:function(f,g){this.moveAccount(a.SettingTable.MOVEROW_DOWN)},banpei:null}});d.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AccountSettingPage.Table");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.AccountSettingPage.Table=new neo.core.Class({superClass:b.SettingTable,classProperties:{VAL_MAILRECV_USE:"1",VAL_RECVSTATUS_NORMAL:"0"},properties:{_getElContainerLow:function(){return c("#setting_account-table-container")},_parseListItem:function(f){var h=b.SettingTable.prototype._parseListItem.apply(this,arguments);var g=f.attr("rstatus");if(g==""){g=a.VAL_RECVSTATUS_NORMAL}h.rstatus=g;return h},_updateData:function(g){if(DENBUN_MODE_XNEO){var f=this._getPage();if(f.isShareAcc()){return}}if(g){this._setDefaultId(g.defacc)}},_buildTable:function(g,f){this.__call("_buildTable",arguments);if(DENBUN_MODE_XNEO){var h=this._getPage();h._updateTableColVisiblity()}},_buildTableCellsHtml:function(g,o,h){var l=this._getTableCellEndHtml();var n=0;var j=o.data;var m=false;if(DENBUN_MODE_XNEO){var k=this._getPage();if(k.isShareAcc()){m=true}}g.push(this._getTableCellStartHtml(["setting_account-table-cell-usuallyuse"],h[n++]));if(!m){g.push('<label class="');g.push(b.SettingTable.CLS_USUALLYUSE_LABEL);g.push('"><input type="radio" name="');g.push(b.SettingTable.NAME_USUALLYUSE);g.push('"');if(j.id==this.getDefaultId()){g.push(" checked")}g.push(" /></label>")}g.push(l);g.push(this._getTableCellStartHtml(["setting_account-table-cell-accountname",d.Table.CLS_CELL_FLEXIBLE],h[n++]));g.pushText(j.account);g.push(l);g.push(this._getTableCellStartHtml(["setting_account-table-cell-mailrecv"],h[n++]));g.pushText((j.use==a.VAL_MAILRECV_USE?d.getText("行う"):d.getText("行わない")));g.push(l);g.push(this._getTableCellStartHtml(["setting_account-table-cell-recvstatus"],h[n++]));g.pushText((j.rstatus==a.VAL_RECVSTATUS_NORMAL?d.getText("正常"):d.getText("エラー")));if(!!j.rstatustime){var i=desknets.dateTime.dispDateTime(j.rstatustime,{type:"list"});g.pushText(" (");g.pushText(i);g.pushText(")")}g.push(l);if(DENBUN_MODE_XNEO){g.push(this._getTableCellStartHtml(["setting_account-table-cell-setting"],h[n++]));if(m){var f='<span class="setting_account-table-setting link">';f+=d.getText("設定");f+="</span>";g.push(f)}g.push(l)}},_getDataToLoad:function(){var g=this._getConditions();g.cmd="mailaccounts";if(DENBUN_MODE_XNEO){var f=this._getPage();if(f.isShareAcc()){g[d.PARAM_PROC]=d.PROC_SHARE}}return g},open:function(){var f={id:this.getCurId()};if(DENBUN_MODE_XNEO){var g=this._getPage();if(g.isShareAcc()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_EDIT,f);return}}d.openPage(d.PAGE_SETTING_ACCOUNT_EDIT,f)},onclickRow:function(h,i){var f=c(h.target);var j=f.hasClass("setting_account-table-setting");if(j){var g=d.getRect(f,true);var k={left:g.left,top:g.top+g.height};d.app.showMenu("setting_share_account","shareaccount_setting",k);return}this.__call("onclickRow",arguments)},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AccountEditSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.AccountEditSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{defaults:{account:"",Name:"",Mail:"",use:"1",pop3kind:"2",smtpkind:"2",pop3server:"",pop3:"110",pop3secure:"0",smtpserver:"",smtp:"25",smtpsecure:"0",popbsmtp:"0",smtpauthkind:"3",smtpauthuid:"",userid:"",apop:"0",timeout:"60",color:"1",sync:"0",rstatus:"",recvlog:"0",sendlog:"0",recvlogview:"",sendlogview:""},VAL_DEFAULT_PASSWORD:"***************",FIELD_NAME_PASSWORD:"_word",FIELD_NAME_SMTP_AUTH_PASSWORD:"smtpauthpwd",constructor:function(){}},properties:{_accountId:null,_getAccountId:function(){return this._accountId||this._initAccountId()},_initAccountId:function(){return this._accountId=d.getParameter("id")},_elRStatus:null,_getElRStatus:function(){return this._elRStatus||this._initElRStatus()},_initElRStatus:function(){var f=this._getElForm();return this._elRStatus=f.find(".setting_account_edit-rstatus")},_elComGenPop3Server:null,_getElComGenPop3Server:function(){return this._elComGenPop3Server||this._initElComGenPop3Server()},_initElComGenPop3Server:function(){var f=this._getElForm();return this._elComGenPop3Server=f.find(".setting_account_edit-com_pop3server")},_elComGenPop3:null,_getElComGenPop3:function(){return this._elComGenPop3||this._initElComGenPop3()},_initElComGenPop3:function(){var f=this._getElForm();return this._elComGenPop3=f.find(".setting_account_edit-com_pop3")},_getElComGenPop3Secure:function(){return this._elComGenPop3Secure||this._initElComGenPop3Secure()},_initElComGenPop3Secure:function(){var f=this._getElForm();return this._elComGenPop3Secure=f.find(".setting_account_edit-com_pop3secure")},_elComGenSmtpServer:null,_getElComGenSmtpServer:function(){return this._elComGenSmtpServer||this._initElComGenSmtpServer()},_initElComGenSmtpServer:function(){var f=this._getElForm();return this._elComGenSmtpServer=f.find(".setting_account_edit-com_smtpserver")},_elComGenSmtp:null,_getElComGenSmtp:function(){return this._elComGenSmtp||this._initElComGenSmtp()},_initElComGenSmtp:function(){var f=this._getElForm();return this._elComGenSmtp=f.find(".setting_account_edit-com_smtp")},_elComGenPopBSmtp:null,_getElComGenPopBSmtp:function(){return this._elComGenPopBSmtp||this._initElComGenPopBSmtp()},_initElComGenPopBSmtp:function(){var f=this._getElForm();return this._elComGenPopBSmtp=f.find(".setting_account_edit-com_popbsmtp")},_getElComGenSmtpSecure:function(){return this._elComGenSmtpSecure||this._initElComGenSmtpSecure()},_initElComGenSmtpSecure:function(){var f=this._getElForm();return this._elComGenSmtpSecure=f.find(".setting_account_edit-com_smtpsecure")},_elGenPop3Server:null,_getElGenPop3Server:function(){return this._elGenPop3Server||this._initElGenPop3Server()},_initElGenPop3Server:function(){var f=this._getElForm();return this._elGenPop3Server=f.find(".setting_account_edit-gen_pop3server")},_elGenPop3:null,_getElGenPop3:function(){return this._elGenPop3||this._initElGenPop3()},_initElGenPop3:function(){var f=this._getElForm();return this._elGenPop3=f.find(".setting_account_edit-gen_pop3")},_elGenPop3Secure:null,_getElGenPop3Secure:function(){return this._elGenPop3Secure||this._initElGenPop3Secure()},_initElGenPop3Secure:function(){var f=this._getElForm();return this._elGenPop3=f.find(".setting_account_edit-gen_pop3secure")},_elGenSmtpServer:null,_getElGenSmtpServer:function(){return this._elGenSmtpServer||this._initElGenSmtpServer()},_initElGenSmtpServer:function(){var f=this._getElForm();return this._elGenSmtpServer=f.find(".setting_account_edit-gen_smtpserver")},_elGenSmtp:null,_getElGenSmtp:function(){return this._elGenSmtp||this._initElGenSmtp()},_initElGenSmtp:function(){var f=this._getElForm();return this._elGenSmtp=f.find(".setting_account_edit-gen_smtp")},_elGenSmtpSecure:null,_getElGenSmtpSecure:function(){return this._elGenSmtpSecure||this._initElGenSmtpSecure()},_initElGenSmtpSecure:function(){var f=this._getElForm();return this._elGenSmtpSecure=f.find(".setting_account_edit-gen_smtpsecure")},_elGenPopBSmtp:null,_getElGenPopBSmtp:function(){return this._elGenPopBSmtp||this._initElGenPopBSmtp()},_initElGenPopBSmtp:function(){var f=this._getElForm();return this._elGenPopBSmtp=f.find(".setting_account_edit-gen_popbsmtp")},_boShareAccFlg:null,isShareAcc:function(){return this._boShareAccFlg},_setShareAccFlg:function(f){return this._boShareAccFlg=f},_elShareAccAccessSelItemTemplate:null,_getElShareAccAccessSelItemTemplate:function(){return this._elShareAccAccessSelItemTemplate||this._initElShareAccAccessSelItemTemplate()},_initElShareAccAccessSelItemTemplate:function(){var f=this._getElForm();var g=d.CLS_TEMPLATE;var h=f.find(".co-selitem."+g).removeClass(g).remove();return this._elShareAccAccessSelItemTemplate=h},open:function(g){if(DENBUN_MODE_XNEO){var h=(d.getCurPageName()==d.PAGE_SETTING_SHARE_ACCOUNT_EDIT);this._setShareAccFlg(h);var f=this._getElForm();if(h){f.find(".setting-account-edit-share_access").show()}else{f.find(".setting-account-edit-share_access").hide()}}this.__call("open",arguments)},_hook:function(){var h;this.__call("_hook",arguments);var g=this;var f=this._getElForm();f.find(".jmail-accsel-button").click(function(i){i.preventDefault();desknets.chooser.open("jmail-accsel-dialog",g._getSelDialogOptions())})},_getSelDialogOptions:function(){var g=this;var f=this._getElForm();var h=desknets.chooser.getItemsFromElement(f.find(".jco-sel-items"),{itemFilter:function(k,i){var j=i.closest(".co-selitem").find('input[name="condition"]').val();if(j.substring(j.indexOf("_")+1)=="2"){j="all"}else{j=""}k.descendant=j;return k}});options={chooseTarget:["user","group","role"],allGroup:"readonly",unassignGroup:"readonly",editDescendant:true,choose:function(i){g._onSetSelect(i)},items:h};return options},_onSetSelect:function(o){var r;var s=this;var g="";var l="";var h="";var p="";var j=this._getElForm();var m=j.find(".jco-sel-items");var k=o.length;j.find(".co-selitem").remove();for(r=0;r<k;r++){var q=o[r];l=q.id;g=q.type.substring(0,1);if(g=="g"&&q.descendant=="all"){h=g+l+"_2"}else{h=g+l+"_1"}var n='<span class="co-selitem"><span title="{{titlename}}">{{Name}}</span><input type="hidden" value="{{id}}" name="id"><input type="hidden" value="{{id}}_1" name="accesskind"><input type="hidden" value="{{condition}}" name="condition"><input type="hidden" class="jco-sel-item" data-id="{{id}}" data-name="{{Name}}" data-description="{{description}}" /></span>';if(g=="u"){p=desknets.escapeValue(desknets.escape(q.description))}else{p=q.description}var i=desknets.escapeValue(desknets.escape(q.name));var f="";if(g=="r"||g=="u"){f=i}else{if(DNNEO.neo.isSet(q.description,{blank:false})){f=q.description+"-"}f=f+i}i=desknets.escapeSpace(i);n=desknets.tmpl.replaceWordHtml(n,"Name",i);n=desknets.tmpl.replaceWordHtml(n,"titlename",f);n=desknets.tmpl.replaceWordHtml(n,"id",g+l);n=desknets.tmpl.replaceWordHtml(n,"condition",h);n=desknets.tmpl.replaceWordHtml(n,"description",p);m.append(n)}},_getClsThisPage:function(){return"page-setting_account_edit-item"},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(true)},_validate:function(){var g=[];var f;if(this._validateAccountNameIsNothing()){var h=neo.denbun.getText("アカウント名");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validateEMailIsNothing()){var h=neo.denbun.getText("メールアドレス");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validatePOPServerPortIsNaN()){var h=neo.denbun.getText("受信メールサーバー(POP3):ポート番号");var i=neo.denbun.getText("$$に不正な文字が使われています。");f=neo.core.replace(i,h);g.push(f)}if(this._validatePOPServerTimeoutIsNaN()){var h=neo.denbun.getText("受信メールサーバー(POP3):サーバータイムアウト");var i=neo.denbun.getText("$$に不正な文字が使われています。");f=neo.core.replace(i,h);g.push(f)}if(this._validateSMTPServerPortIsNaN()){var h=neo.denbun.getText("送信メールサーバー(SMTP):ポート番号");var i=neo.denbun.getText("$$に不正な文字が使われています。");f=neo.core.replace(i,h);g.push(f)}return g},_validateAccountNameIsNothing:function(){var f=this._getElInputOf("account");var g=f.val();if(g.length<1){return true}return false},_validateEMailIsNothing:function(){var f=this._getElInputOf("Mail");var g=f.val();if(g.length<1){return true}return false},_validatePOPServerPortIsNaN:function(){var f=this._getElInputOf("pop3");var g=f.val();if(isNaN(g)){return true}return false},_validatePOPServerTimeoutIsNaN:function(){var f=this._getElInputOf("timeout");var g=f.val();if(isNaN(g)){return true}return false},_validateSMTPServerPortIsNaN:function(){var f=this._getElInputOf("smtp");var g=f.val();if(isNaN(g)){return true}return false},_getDataToGetSetting:function(){var f={cmd:"mailaccountentry",id:this._getAccountId()};if(DENBUN_MODE_XNEO){if(this.isShareAcc()){f.cmd="mailshareaccount"}}return f},_getHttpMethod:function(){return"POST"},_getDataToSetSetting:function(){var k=this.__call("_getDataToSetSetting",arguments);if(DENBUN_MODE_XNEO){if(this.isShareAcc()){k.cmd="mailcmdshareaccount";if(this._getAccountId()){k.sid=this._getAccountId()}var f=this._getElForm();var n=f.serializeArray();var j=[];var m=[];var l=[];var h=n.length;for(var g=0;g<h;g++){if(n[g].name=="id"){j.push(n[g].value)}else{if(n[g].name=="accesskind"){m.push(n[g].value)}else{if(n[g].name=="condition"){l.push(n[g].value)}}}}k.id=j;k.accesskind=m;k.condition=l}else{delete k.id;delete k.accesskind;delete k.condition;if(this._getAccountId()){k.id=this._getAccountId()}}}else{if(this._getAccountId()){k.id=this._getAccountId()}}return k},_setToForm:function(h){var g=c(h);var f=g.find("rstatus");this._setRStatusToForm(f.text());if(DENBUN_MODE_XNEO){if(this.isShareAcc()){this._setShareAccAccessSelItemsToForm(g)}this._setSendRecvLoggingSetting(g)}b.setResponseToForm(this,h)},_setRStatusToForm:function(g){var f=this._getElRStatus();var h=neo.core.escape(g).replace(/(\r\n|\r|\n)/g,"<br />");f.html(h)},_setSendRecvLoggingSetting:function(n){var h=this._getElForm();var l=h.find(".setting_account_recvlogview");var o=h.find(".setting_account_sendlogview");l.text("");o.text("");if(n){var g=d.getText("ログをダウンロード");var m=n.find("recvlogurl").text();var j=n.find("recvlogtime").text();var k=n.find("sendlogurl").text();var f=n.find("sendlogtime").text();var i="";var p="";if(m!=""){i='<a href="'+m+'" title="'+g+'" target="_blank">'+g+"</a> ("+j+")"}if(k!=""){p='<a href="'+k+'" title="'+g+'" target="_blank">'+g+"</a> ("+f+")"}l.html(i);o.html(p)}},_setShareAccAccessSelItemsToForm:function(g){var j=this._getElShareAccAccessSelItemTemplate();var h=this._getElForm();var i=h.find(".jco-sel-items");i.empty();var f=g.find(":first > list > item");var k=[];f.each(function(n,l){var o=c(l);var p={id:o.children("id").text(),name:o.children("Name").text(),accesskind:o.children("accesskind").text(),condition:o.children("condition").text(),titlename:o.children("titlename").text(),description:o.children("description").text(),item_value:o.children("item_value").text(),item_data:o.children("item_data").text(),item_title:o.children("item_title").text()};var m=j.clone();b.addShareAccAccessSelItem(i,m,p)})},cancel:function(){if(DENBUN_MODE_XNEO){if(this.isShareAcc()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT,null,false);return}}d.openPage(d.PAGE_SETTING_ACCOUNT,null,false)},_load:function(){this._initAccountId();this._setPageTitleToPage();this._setRemoveButtonVisibility();if(DENBUN_MODE_XNEO){if(d.comSetting.isAllowedToAccountSetting()){this._setComGeneralSettingToForm();this._setMailGeneralSettingToForm()}}else{this._setMailGeneralSettingToForm()}if(this._getAccountId()){this.__call("_load",arguments)}else{this._setDefaultsToForm();this._enableOkButton()}this._setPassWordFiled()},_setPageTitleToPage:function(){var f="";if(this._getAccountId()){f=neo.denbun.getText("アカウントの変更")}else{f=neo.denbun.getText("アカウントの登録")}if(DENBUN_MODE_XNEO){if(this.isShareAcc()){if(this._getAccountId()){f=neo.denbun.getText("共有アカウントの変更")}else{f=neo.denbun.getText("共有アカウントの登録")}}}this._setPageTitle(f)},_setRemoveButtonVisibility:function(){if(this._getAccountId()){this._showRemoveButton()}else{this._hideRemoveButton()}},_setComGeneralSettingToForm:function(){var k={};var j=d.comSetting.getComServerPop3Server();var l=d.comSetting.getComServerPop3();var h=d.comSetting.getComServerSmtpServer();var m=d.comSetting.getComServerSmtp();var f=d.comSetting.getComServerPopBSmtp();k=this._getElComGenPop3Server();k.text(j);k=this._getElComGenPop3();k.text(l);k=this._getElComGenSmtpServer();k.text(h);k=this._getElComGenSmtp();k.text(m);k=this._getElComGenPopBSmtp();k.text(f);if(DENBUN_MODE_XNEO){var i=d.comSetting.getComServerPop3Secure();var g=d.comSetting.getComServerSmtpSecure();k=this._getElComGenPop3Secure();k.text(i);k=this._getElComGenSmtpSecure();k.text(g)}},_setMailGeneralSettingToForm:function(){var k={};var j=d.comSetting.getMailServerPop3Server();var l=d.comSetting.getMailServerPop3();var i=d.comSetting.getMailServerPop3Secure();var h=d.comSetting.getMailServerSmtpServer();var m=d.comSetting.getMailServerSmtp();var g=d.comSetting.getMailServerSmtpSecure();if(DENBUN_MODE_XNEO){var f=d.comSetting.getMailServerPopBSmtp()}k=this._getElGenPop3Server();k.text(j);k=this._getElGenPop3();k.text(l);k=this._getElGenPop3Secure();k.text(i);k=this._getElGenSmtpServer();k.text(h);k=this._getElGenSmtp();k.text(m);k=this._getElGenSmtpSecure();k.text(g);if(DENBUN_MODE_XNEO){k=this._getElGenPopBSmtp();k.text(f)}},_setDefaultsToForm:function(){var j=this._getDefaults();this._setRStatusToForm(j.rstatus);this._setSendRecvLoggingSetting();b.setFormValues(this,j);if(DENBUN_MODE_XNEO){var i=this._getElShareAccAccessSelItemTemplate();var g=this._getElForm();var h=g.find(".jco-sel-items");if(this.isShareAcc()){var f=i.clone();b.setDefaultShareAccAccessSelItems(h,f)}else{h.empty()}}},_getDefaults:function(){var f=d.comSetting.getUserName();var g=d.comSetting.getUserId();var k=d.comSetting.getMailServerTimeout();var h={account:f,Name:f,userid:g,timeout:k,recvlog:"0",sendlog:"0",recvlogview:"",sendlogview:""};if(DENBUN_MODE_XNEO){h.pop3kind="1";h.smtpkind="1";var j=d.comSetting.getUserMail();h.Mail=j;var i=d.comSetting.getAccountNameDef();h.Name=i;if(this.isShareAcc()){h.account="";h.Name="";h.Mail="";h.userid="";h.recvlog="0";h.sendlog="0";h.recvlogview="";h.sendlogview=""}}var l=c.extend(a.defaults,h);return l},_setPassWordFiled:function(){var g="";if(this._getAccountId()){g=a.VAL_DEFAULT_PASSWORD}var f;f=this._getElInputOf(a.FIELD_NAME_PASSWORD);f.val(g);f=this._getElInputOf(a.FIELD_NAME_SMTP_AUTH_PASSWORD);f.val(g)},remove:function(){var h=d.getText("削除してよろしいですか？");var g=d.getText("※対象のアカウントに保存されているメールデータも削除されます。");var f=this;d.confirm(h,{onok:function(){var i=f._getAccountId();if(DENBUN_MODE_XNEO){if(f.isShareAcc()){b.deleteShareAccount(i,function(){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT)},null);return}}b.deleteAccount(i,function(){d.openPage(d.PAGE_SETTING_ACCOUNT)})}},g)},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.isShareAcc()){d.comSetting.clearAccountList();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT);return}}d.openPage(d.PAGE_SETTING_ACCOUNT)},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AccountEasySetupSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.AccountEasySetupSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{defaults:{account:"",Name:"",Mail:"",use:"1",pop3kind:"3",smtpkind:"3",pop3server:"",pop3:"110",pop3secure:"1",smtpserver:"",smtp:"25",smtpsecure:"1",popbsmtp:"2",smtpauthkind:"2",smtpauthuid:"",userid:"",apop:"0",timeout:"60",color:"1",sync:"0",rstatus:"",recvlog:"",sendlog:""},MODE:"mode",MODE_GMAIL:"gmail",MODE_YAHOO:"yahoo",FIELD_NAME_PASSWORD:"_word",constructor:function(){}},properties:{_mode:null,_getMode:function(){return this._mode||this._initMode()},_initMode:function(){return this._mode=d.getParameter(b.MODE)},_boShareAccFlg:null,isShareAcc:function(){return this._boShareAccFlg},_setShareAccFlg:function(f){return this._boShareAccFlg=f},_elShareAccAccessSelItemTemplate:null,_getElShareAccAccessSelItemTemplate:function(){return this._elShareAccAccessSelItemTemplate||this._initElShareAccAccessSelItemTemplate()},_initElShareAccAccessSelItemTemplate:function(){var f=this._getElForm();var g=d.CLS_TEMPLATE;var h=f.find(".co-selitem."+g).removeClass(g).remove();return this._elShareAccAccessSelItemTemplate=h},open:function(g){if(DENBUN_MODE_XNEO){var f=this._getElForm();var i=f.find(".jmail-gmail-msg");this._initMode();if(this.isGmailMode()){i.show()}else{i.hide()}var h=(d.getCurPageName()==d.PAGE_SETTING_SHARE_ACCOUNT_EASY_SETUP);this._setShareAccFlg(h);if(h){f.find(".setting-account-edit-share_access").show()}else{f.find(".setting-account-edit-share_access").hide()}}this.__call("open",arguments)},_hook:function(){var h;this.__call("_hook",arguments);var g=this;var f=this._getElForm();f.find(".jmail-accsel-button").click(function(i){i.preventDefault();desknets.chooser.open("jmail-accsel-easy-dialog",g._getSelDialogOptions())})},_getSelDialogOptions:function(){var g=this;var f=this._getElForm();var h=desknets.chooser.getItemsFromElement(f.find(".jco-sel-items"),{itemFilter:function(k,i){var j=i.closest(".co-selitem").find('input[name="condition"]').val();if(j.substring(j.indexOf("_")+1)=="2"){j="all"}else{j=""}k.descendant=j;return k}});options={chooseTarget:["user","group","role"],allGroup:"readonly",unassignGroup:"readonly",editDescendant:true,choose:function(i){g._onSetSelect(i)},items:h};return options},_onSetSelect:function(o){var r;var s=this;var g="";var l="";var h="";var p="";var j=this._getElForm();var m=j.find(".jco-sel-items");var k=o.length;j.find(".co-selitem").remove();for(r=0;r<k;r++){var q=o[r];l=q.id;g=q.type.substring(0,1);if(g=="g"&&q.descendant=="all"){h=g+l+"_2"}else{h=g+l+"_1"}var n='<span class="co-selitem"><span title="{{titlename}}">{{Name}}</span><input type="hidden" value="{{id}}" name="id"><input type="hidden" value="{{id}}_1" name="accesskind"><input type="hidden" value="{{condition}}" name="condition"><input type="hidden" class="jco-sel-item" data-id="{{id}}" data-name="{{Name}}" data-description="{{description}}" /></span>';if(g=="u"){p=desknets.escapeValue(desknets.escape(q.description))}else{p=q.description}var i=desknets.escapeValue(desknets.escape(q.name));var f="";if(g=="r"||g=="u"){f=i}else{if(DNNEO.neo.isSet(q.description,{blank:false})){f=q.description+"-"}f=f+i}i=desknets.escapeSpace(i);n=desknets.tmpl.replaceWordHtml(n,"Name",i);n=desknets.tmpl.replaceWordHtml(n,"titlename",f);n=desknets.tmpl.replaceWordHtml(n,"id",g+l);n=desknets.tmpl.replaceWordHtml(n,"condition",h);n=desknets.tmpl.replaceWordHtml(n,"description",p);m.append(n)}},_getClsThisPage:function(){return"page-setting_account_easy_setup-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true)},_validate:function(){var g=[];var f;if(this._validateAccountNameIsNothing()){var h=neo.denbun.getText("アカウント名");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validateEMailIsNothing()){var h=neo.denbun.getText("メールアドレス");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validatePassWordIsNothing()){var h=neo.denbun.getText("パスワード");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}return g},_validateAccountNameIsNothing:function(){var f=this._getElInputOf("account");var g=f.val();if(g.length<1){return true}return false},_validateEMailIsNothing:function(){var f=this._getElInputOf("Mail");var g=f.val();if(g.length<1){return true}return false},_validatePassWordIsNothing:function(){var f=this._getElInputOf(b.FIELD_NAME_PASSWORD);var g=f.val();if(g.length<1){return true}return false},_getHttpMethod:function(){return"POST"},_getDataToSetSetting:function(){var n=this.__call("_getDataToSetSetting",arguments);var k=this._getDefaults();n=c.extend({},k,n);var m="";if(this.isGmailMode()){n.pop3server="pop.gmail.com";n.smtpserver="smtp.gmail.com";var m=n.Mail}else{if(this.isYahooMode()){n.pop3server="pop.mail.yahoo.co.jp";n.smtpserver="smtp.mail.yahoo.co.jp";m=this._getUserIdFromMailAddress(n.Mail)}}n.pop3="995";n.smtp="465";n.userid=m;n.smtpauthuid=m;n.smtpauthpwd=n._word;if(DENBUN_MODE_XNEO){if(this.isShareAcc()){n.cmd="mailcmdshareaccount";var h=this._getElForm();var p=h.serializeArray();var f=[];var g=[];var o=[];var j=p.length;for(var l=0;l<j;l++){if(p[l].name=="id"){f.push(p[l].value)}else{if(p[l].name=="accesskind"){g.push(p[l].value)}else{if(p[l].name=="condition"){o.push(p[l].value)}}}}n.id=f;n.accesskind=g;n.condition=o}else{delete n.id;delete n.accesskind;delete n.condition}}return n},cancel:function(){if(DENBUN_MODE_XNEO){if(this.isShareAcc()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT,null,false);return}}d.openPage(d.PAGE_SETTING_ACCOUNT,null,false)},_load:function(){this._initMode();this._setPageTitleToPage();this._setDefaultsToForm();this._enableOkButton()},_setPageTitleToPage:function(){var g="";if(DENBUN_MODE_XNEO){var f="";if(this.isShareAcc()){g=neo.denbun.getText("共有アカウントの登録")}else{g=neo.denbun.getText("アカウントの登録")}if(this.isGmailMode()){f="Gmail"}else{if(this.isYahooMode()){f=neo.denbun.getText("Yahoo!メール")}}g=g+" ("+f+")"}else{if(this.isGmailMode()){g=neo.denbun.getText("Gmailアカウントの登録")}else{if(this.isYahooMode()){g=neo.denbun.getText("Yahoo!メールアカウントの登録")}}}this._setPageTitle(g)},_setDefaultsToForm:function(){var j=this._getDefaults();a.setFormValues(this,j);if(DENBUN_MODE_XNEO){var i=this._getElShareAccAccessSelItemTemplate();var g=this._getElForm();var h=g.find(".jco-sel-items");if(this.isShareAcc()){var f=i.clone();a.setDefaultShareAccAccessSelItems(h,f)}else{h.empty()}}},_getDefaults:function(){var f=d.comSetting.getUserName();var g=d.comSetting.getUserId();var j=d.comSetting.getMailServerTimeout();var h={account:f,Name:f,userid:g,timeout:j,recvlog:"0",sendlog:"0"};if(DENBUN_MODE_XNEO){var i=d.comSetting.getAccountNameDef();h.Name=i;if(this.isShareAcc()){h.account="";h.Name="";h.userid=""}}var k=c.extend(b.defaults,h);return k},isGmailMode:function(){return this._getMode()==b.MODE_GMAIL},isYahooMode:function(){return this._getMode()==b.MODE_YAHOO},_getUserIdFromMailAddress:function(f){var g=f.lastIndexOf("@");return f.substring(0,g)},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.isShareAcc()){d.comSetting.clearAccountList();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT);return}}d.openPage(d.PAGE_SETTING_ACCOUNT)},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.NotificationSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.NotificationSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_getClsThisPage:function(){return"page-setting_notification-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToGetSetting:function(){var f={cmd:"mailnotification"};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccnotification";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_setToForm:function(f){a.setResponseToForm(this,f)},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareaccnotification";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},banpei:null}});b.constructor()})(jQuery);(function(b){var e=neo.core.readyNamespace("neo.denbun.Setting.AutorecvSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var c=neo.denbun.Setting.AutorecvSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{VAL_RECVAUTO_USE:"1",VAL_TIMEKIND_SPECIFYTIME:"2",constructor:function(){}},properties:{_elHour:null,_getElHour:function(){return this._elHour||this._initElHour()},_initElHour:function(){var f=this._getElForm();return this._elHour=f.find(".setting_autorecv-recvtime-hour")},_elMinute:null,_getElMinute:function(){return this._elMinute||this._initElMinute()},_initElMinute:function(){var f=this._getElForm();return this._elMinute=f.find(".setting_autorecv-recvtime-minute")},_elList:null,_getElList:function(){return this._elList||this._initElList()},_initElList:function(){var f=this._getElForm();return this._elList=f.find(".setting_autorecv-recvtime_list")},_elAdd:null,_getElAdd:function(){return this._elAdd||this._initElAdd()},_initElAdd:function(){var f=this._getElForm();return this._elAdd=f.find(".setting_autorecv-recvtime_add")},_elDelete:null,_getElDelete:function(){return this._elDelete||this._initElDelete()},_initElDelete:function(){var f=this._getElForm();return this._elDelete=f.find(".setting_autorecv-recvtime_del")},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElAdd();this.__bind(f,"click","Add");f=this._getElDelete();this.__bind(f,"click","Delete")},getRecvAuto:function(){var f=this._getElForm();return f.find("input[name=recvauto]:checked").val()},getTimeKind:function(){var f=this._getElForm();return f.find("input[name=timekind]:checked").val()},_getClsThisPage:function(){return"page-setting_autorecv-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_validate:function(){var g=[];var f;if(this._validateAutoRecvAndSpecifyTimeButListEmpty()){f=d.getText("受信時刻が未設定です。");g.push(f)}return g},_validateAutoRecvAndSpecifyTimeButListEmpty:function(){if(this.getRecvAuto()==c.VAL_RECVAUTO_USE){if(this.getTimeKind()==c.VAL_TIMEKIND_SPECIFYTIME){var g=this._getElList();var f=g.find("option");if(f.length<1){return true}}}return false},_getDataToGetSetting:function(){var f={cmd:"mailpsetautorecv"};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccnotautorecv";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_getDataToSetSetting:function(){var g=this.__call("_getDataToSetSetting",arguments);var f=this._getRecvTimeToSetSetting();if(f&&f.length>0){g.recvtime=f}if(DENBUN_MODE_XNEO){if(this.getShareAccId()){g.cmd="mailcmdshareaccnotautorecv";g[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return g},_getRecvTimeToSetSetting:function(){var h=[];var g=this._getElList();var f=g.children();for(var j=0;j<f.length;j++){var k=f.eq(j);var l=k.attr("value");if(l){h.push(l)}}return h},_setToForm:function(h){var g=b(h).children();if(DENBUN_MODE_XNEO){var n=b("#setting_autorecv-scheduler_msg");var f=g.find("scheduler").text();if(f!="1"){var m=g.find("msg").text();n.find("em").text(m);n.show()}else{n.hide()}}var k=g.find("recvtime");this._clearHourAndMinute();this._clearList();for(var j=0;j<k.length;j++){var l=k.eq(j).attr("val");if(l){this._addTimeToList(l)}}a.setResponseToForm(this,h)},add:function(){var f=this._getTimeFromEl();if(!f){return}this._addTimeToList(f)},_getTimeFromEl:function(){var f=this._getElHour().val();var g=this._getElMinute().val();if(isNaN(f)){return null}if(isNaN(g)){g="00"}return f+g},_addTimeToList:function(j){var l;var n=this._getElList();l=n.find('[value="'+j+'"]');if(l.length){return}var q;if(DENBUN_MODE_XNEO){var h=j.substr(0,2)+j.substr(2,2);q=desknets.cal.tmplRef.dispTimeShort(h)}else{q=j.substr(0,2)+":"+j.substr(2,2)}var o=b('<option value="'+j+'">'+q+"</option>");var p=n.children();if(p.length==0){n.append(o)}else{var g=false;for(var k=0;k<p.length;k++){var f=p.eq(k);var m=f.attr("value");if(j<m){f.before(o);g=true;break}}if(!g){n.append(o)}}},_clearList:function(){var g;var f=this._getElList();g=f.children();g.remove()},_clearHourAndMinute:function(){var f=this._getElHour();var g=this._getElMinute();f.val("--");g.val("--")},delete_:function(){var g;var f=this._getElList();g=f.find(":selected");if(!g.length){return}g.remove()},onclickAdd:function(f,g){this.add()},onclickDelete:function(f,g){this.delete_()},banpei:null}});c.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.SignSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.SignSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_elNew:null,_getElNew:function(){return this._elNew||this._initElNew()},_initElNew:function(){var f=this._getElForm();return this._elNew=f.find(".setting_sign-new")},_elEdit:null,_getElEdit:function(){return this._elEdit||this._initElEdit()},_initElEdit:function(){var f=this._getElForm();return this._elEdit=f.find(".setting_sign-edit")},_elDelete:null,_getElDelete:function(){return this._elDelete||this._initElDelete()},_initElDelete:function(){var f=this._getElForm();return this._elDelete=f.find(".setting_sign-delete")},_elUp:null,_getElUp:function(){return this._elUp||this._initElUp()},_initElUp:function(){var f=this._getElForm();return this._elUp=f.find(".setting_sign-up")},_elDown:null,_getElDown:function(){return this._elDown||this._initElDown()},_initElDown:function(){var f=this._getElForm();return this._elDown=f.find(".setting_sign-down")},_table:null,_getTable:function(){return this._table||this._initTable()},_initTable:function(){var f={};if(DENBUN_MODE_XNEO){f={page:this}}var g=new b.Table(f);g.initialize();return this._table=g},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElNew();this.__bind(f,"click","New");f=this._getElEdit();this.__bind(f,"click","Edit");f=this._getElDelete();this.__bind(f,"click","Delete");f=this._getElUp();this.__bind(f,"click","Up");f=this._getElDown();this.__bind(f,"click","Down")},_getClsThisPage:function(){return"page-setting_sign-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToSetSetting:function(){var f={};f.cmd="mailcmdsignlist";if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareaccsignlist";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}var g=this._getTable();var h=g.getDefaultId();if(h){f.id=h}return f},_clean:function(){this.__call("_clean",arguments);var f=this._getTable();f.load()},_load:function(){this._enableOkButton()},startCreatingSign:function(){var f={};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN_EDIT,f);return}}d.openPage(d.PAGE_SETTING_SIGN_EDIT,f)},startEditingSign:function(){var f=this._getSelectedSignId();if(!f){var h=d.getText("対象署名を選択してください。");d.alert(h);return}var g={id:f};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){g[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN_EDIT,g);return}}d.openPage(d.PAGE_SETTING_SIGN_EDIT,g)},deleteSign:function(){var i=this._getTable();var g=i.getSelectedIdList();if(g.length<1){var h=d.getText("対象署名を選択してください。");d.alert(h);return}var h=d.getText("選択した署名を削除してよろしいですか？");var f=this;d.confirm(h,{onok:function(){if(DENBUN_MODE_XNEO){if(f.getShareAccId()){a.deleteShareAccountSign(g,function(){i.deleteRowByIds(g)},f.getShareAccId());return}}a.deleteSign(g,function(){i.deleteRowByIds(g)})}})},moveSign:function(f){var k=this._getTable();var i=k.getSelectedIdList();if(i.length<1){var j=d.getText("対象署名を選択してください。");d.alert(j);return}var g;if(DENBUN_MODE_XNEO){g=this.getShareAccId()}if(k.moveRangeCheck(i,f)){var h={getSendData:function(){var m={cmd:"mailsignupdown",id:i,proc:f};if(DENBUN_MODE_XNEO){if(g){m.cmd="mailcmdshareaccsignupdown";m[d.PARAM_SHARE_ACCOUNT_ID]=g}}return m},onsuccess:function(){k.moveRow(i,f)}};var l=new d.Ajax(h);l.initialize();l.sendRequest();d.app.setSettingModified()}},_getSelectedSignId:function(){var f=this._getTable();if(f.getSelectedCount()>0){var g=f.getCurId();return g}return null},onresize:function(g){var f=this._getTable();a.updateTableHeight(this,f,-7);f.onresize(g)},onclickNew:function(f,g){this.startCreatingSign()},onclickEdit:function(f,g){this.startEditingSign()},onclickDelete:function(f,g){this.deleteSign()},onclickUp:function(f,g){this.moveSign(a.SettingTable.MOVEROW_UP)},onclickDown:function(f,g){this.moveSign(a.SettingTable.MOVEROW_DOWN)},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.SignSettingPage.Table");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.SignSettingPage.Table=new neo.core.Class({superClass:b.SettingTable,classProperties:{},properties:{_getElContainerLow:function(){return c("#setting_sign-table-container")},_updateData:function(f){if(f){this._setDefaultId(f.signdefault)}},_buildTableCellsHtml:function(j,k,h){var f=this._getTableCellEndHtml();var g=0;var i=k.data;j.push(this._getTableCellStartHtml(["setting_sign-table-cell-usuallyuse"],h[g++]));j.push('<label class="');j.push(b.SettingTable.CLS_USUALLYUSE_LABEL);j.push('"><input type="radio" name="');j.push(b.SettingTable.NAME_USUALLYUSE);j.push('"');if(i.id==this.getDefaultId()){j.push(" checked")}j.push(" /></label>");j.push(f);j.push(this._getTableCellStartHtml(["setting_sign-table-cell-signname",d.Table.CLS_CELL_FLEXIBLE],h[g++]));j.pushText(i.Name);j.push(f)},_getDataToLoad:function(){var g=this._getConditions();g.cmd="mailsignlist";if(DENBUN_MODE_XNEO){var f=this._getPage();if(f.getShareAccId()){g.cmd="mailshareaccsignlist";g[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId()}}return g},open:function(){var h=this.getCurId();if(DENBUN_MODE_XNEO){var g=this._getPage();if(g.getShareAccId()){var f={};f.id=h;f[d.PARAM_SHARE_ACCOUNT_ID]=g.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN_EDIT,f);return}}d.openPage(d.PAGE_SETTING_SIGN_EDIT,{id:h})},banpei:null}});a.constructor()})(jQuery);(function(b){var e=neo.core.readyNamespace("neo.denbun.Setting.SignEditSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var c=neo.denbun.Setting.SignEditSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{defaults:{Name:"",sign:""},constructor:function(){}},properties:{_signId:null,_getSignId:function(){return this._signId||this._initSignId()},_initSignId:function(){return this._signId=d.getParameter("id")},_getClsThisPage:function(){return"page-setting_sign_edit-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true)},_validate:function(){var g=[];var f;if(this._validateSignNameIsNothing()){var h=neo.denbun.getText("署名名称");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}return g},_validateSignNameIsNothing:function(){var f=this._getElInputOf("Name");var g=f.val();if(g.length<1){return true}return false},_getDataToGetSetting:function(){var f={cmd:"mailsignentry",id:this._getSignId()};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccsign";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_getHttpMethod:function(){return"POST"},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(this._getSignId()){f.id=this._getSignId()}if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareaccsign";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},cancel:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN,f,false);return}}d.openPage(d.PAGE_SETTING_SIGN,null,false)},_load:function(){this._initSignId();this._setPageTitleToPage();this._setRemoveButtonVisibility();if(this._getSignId()){this.__call("_load",arguments)}else{this._setDefaultsToForm();this._enableOkButton()}},_setPageTitleToPage:function(){var f="";if(this._getSignId()){f=neo.denbun.getText("署名の変更")}else{f=neo.denbun.getText("署名の登録")}this._setPageTitle(f)},_setRemoveButtonVisibility:function(){if(this._getSignId()){this._showRemoveButton()}else{this._hideRemoveButton()}},_setDefaultsToForm:function(){var f=c.defaults;a.setFormValues(this,f)},_setToForm:function(f){a.setResponseToForm(this,f)},remove:function(){var g=d.getText("削除してよろしいですか？");var f=this;d.confirm(g,{onok:function(){var h=f._getSignId();if(DENBUN_MODE_XNEO){if(f.getShareAccId()){a.deleteShareAccountSign(h,function(){var i={};i[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN,i)},f.getShareAccId());return}}a.deleteSign(h,function(){d.openPage(d.PAGE_SETTING_SIGN)})}})},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_SIGN,f);return}}d.openPage(d.PAGE_SETTING_SIGN)},banpei:null}});c.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.FilterSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.FilterSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{constructor:function(){}},properties:{_elNew:null,_getElNew:function(){return this._elNew||this._initElNew()},_initElNew:function(){var f=this._getElForm();return this._elNew=f.find(".setting_filter-new")},_elEdit:null,_getElEdit:function(){return this._elEdit||this._initElEdit()},_initElEdit:function(){var f=this._getElForm();return this._elEdit=f.find(".setting_filter-edit")},_elDelete:null,_getElDelete:function(){return this._elDelete||this._initElDelete()},_initElDelete:function(){var f=this._getElForm();return this._elDelete=f.find(".setting_filter-delete")},_elUp:null,_getElUp:function(){return this._elUp||this._initElUp()},_initElUp:function(){var f=this._getElForm();return this._elUp=f.find(".setting_filter-up")},_elDown:null,_getElDown:function(){return this._elDown||this._initElDown()},_initElDown:function(){var f=this._getElForm();return this._elDown=f.find(".setting_filter-down")},_table:null,_getTable:function(){return this._table||this._initTable()},_initTable:function(){var f={};if(DENBUN_MODE_XNEO){f={page:this}}var g=new a.Table(f);g.initialize();return this._table=g},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElNew();this.__bind(f,"click","New");f=this._getElEdit();this.__bind(f,"click","Edit");f=this._getElDelete();this.__bind(f,"click","Delete");f=this._getElUp();this.__bind(f,"click","Up");f=this._getElDown();this.__bind(f,"click","Down")},_getClsThisPage:function(){return"page-setting_filter-item"},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(false);b.toggleVisibilityRemoveToolbarButton(false);if(DENBUN_MODE_XNEO){if(this.getShareAccId()){b.toggleVisibilityCancelToolbarButton(true)}}},_clean:function(){this.__call("_clean",arguments);var f=this._getTable();f.load()},_load:function(){this._enableOkButton()},startCreatingFilter:function(){var f={};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER_EDIT,f);return}}d.openPage(d.PAGE_SETTING_FILTER_EDIT,f)},startEditingFilter:function(){var f=this._getSelectedFilterId();if(!f){var h=d.getText("対象フィルタを選択してください。");d.alert(h);return}var g={id:f};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){g[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER_EDIT,g);return}}d.openPage(d.PAGE_SETTING_FILTER_EDIT,g)},deleteFilter:function(){var i=this._getTable();var g=i.getSelectedIdList();if(g.length<1){var h=d.getText("対象フィルタを選択してください。");d.alert(h);return}var h=d.getText("選択したフィルタを削除してよろしいですか？");var f=this;d.confirm(h,{onok:function(){if(DENBUN_MODE_XNEO){if(f.getShareAccId()){b.deleteShareAccountFilter(g,function(){i.deleteRowByIds(g)},f.getShareAccId());return}}b.deleteFilter(g,function(){i.deleteRowByIds(g)})}})},moveFilter:function(f){var k=this._getTable();var i=k.getSelectedIdList();if(i.length<1){var j=d.getText("対象フィルタを選択してください。");d.alert(j);return}var g;if(DENBUN_MODE_XNEO){g=this.getShareAccId()}if(k.moveRangeCheck(i,f)){var h={getSendData:function(){var m={cmd:"mailfilterupdown",id:i,proc:f};if(DENBUN_MODE_XNEO){if(g){m.cmd="mailcmdshareaccfilterupdown";m[d.PARAM_SHARE_ACCOUNT_ID]=g}}return m},onsuccess:function(){k.moveRow(i,f)}};var l=new d.Ajax(h);l.initialize();l.sendRequest();d.app.setSettingModified()}},_getSelectedFilterId:function(){var f=this._getTable();if(f.getSelectedCount()>0){var g=f.getCurId();return g}return null},onresize:function(g){var f=this._getTable();b.updateTableHeight(this,f,-12);f.onresize(g)},onclickNew:function(f,g){this.startCreatingFilter()},onclickEdit:function(f,g){this.startEditingFilter()},onclickDelete:function(f,g){this.deleteFilter()},onclickUp:function(f,g){this.moveFilter(b.SettingTable.MOVEROW_UP)},onclickDown:function(f,g){this.moveFilter(b.SettingTable.MOVEROW_DOWN)},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.FilterSettingPage.Table");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.FilterSettingPage.Table=new neo.core.Class({superClass:b.SettingTable,classProperties:{VAL_ENABLE_DISABLE:"0",VAL_ENABLE_ENABLE:"1",VAL_TIMING_AUTO:"1",VAL_TIMING_MANUAL:"2"},properties:{_getElContainerLow:function(){return c("#setting_filter-table-container")},_buildTableCellsHtml:function(j,k,h){var f=this._getTableCellEndHtml();var g=0;var i=k.data;j.push(this._getTableCellStartHtml(["setting_filter-table-cell-filtername",d.Table.CLS_CELL_FLEXIBLE],h[g++]));j.pushText(i.Name);j.push(f);j.push(this._getTableCellStartHtml(["setting_filter-table-cell-enable"],h[g++]));j.pushText((i.effect==a.VAL_ENABLE_DISABLE?d.getText("無効"):d.getText("有効")));j.push(f);j.push(this._getTableCellStartHtml(["setting_filter-table-cell-timing"],h[g++]));j.pushText((i.ftype==a.VAL_TIMING_AUTO?d.getText("自動"):d.getText("手動")));j.push(f)},_getDataToLoad:function(){var g=this._getConditions();g.cmd="mailfilter";if(DENBUN_MODE_XNEO){var f=this._getPage();if(f.getShareAccId()){g.cmd="mailshareaccfilterlist";g[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId()}}return g},open:function(){var h=this.getCurId();if(DENBUN_MODE_XNEO){var g=this._getPage();if(g.getShareAccId()){var f={};f.id=h;f[d.PARAM_SHARE_ACCOUNT_ID]=g.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER_EDIT,f);return}}d.openPage(d.PAGE_SETTING_FILTER_EDIT,{id:h})},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.FilterEditSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.FilterEditSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{defaults:{Name:"",effect:"1",ftype:"1",fvalue:"",fromeffect1:"",fromfrange1:"0",fromfvalue1:"",toeffect2:"",tofrange2:"0",tofvalue2:"",subjecteffect3:"",subjectfrange3:"0",subjectfvalue3:"",bodyeffect4:"",bodyfrange4:"0",bodyfvalue4:"",proc:"2",fid:"",forwardto:""},VAL_FILTER_ACTION_FOWARD:"2",VAL_FILTER_ACTION_MOVE_TO_SELECTED_FOLDER:"1",constructor:function(){}},properties:{_filterId:null,_getFilterId:function(){return this._filterId||this._initFilterId()},_initFilterId:function(){return this._filterId=d.getParameter("id")},_folders:null,_getFolders:function(){return this._folders||this._initFolders()},_initFolders:function(){var g={page:this};var f=new a.Folders(g);f.initialize();return this._folders=f},_dlgFolder:null,_getDlgFolder:function(){return this._dlgFolder||this._initDlgFolder()},_initDlgFolder:function(){var f={content:c("#dlg-setting_filter_edit-folder"),title:d.getText("フォルダ選択"),onopen:this.__closure(this._updateDlgFolder),onok:this.__closure(this._selectedIdFromFolder)};var g=new d.Dialog(f);g.initialize();return this._dlgFolder=g},_elAuto:null,_getElAuto:function(){return this._elAuto||this._initElAuto()},_initElAuto:function(){return this._elAuto=this._getElInputOf("ftype").filter('[value="1"]')},_elManual:null,_getElManual:function(){return this._elManual||this._initElManual()},_initElManual:function(){return this._elManual=this._getElInputOf("ftype").filter('[value="2"]')},_elSelectFolder:null,_getElSelectFolder:function(){return this._elSelectFolder||this._initElSelectFolder()},_initElSelectFolder:function(){var f=this._getElForm();return this._elSelectFolder=f.find(".setting_filter_edit-select_folder")},_elFolderId:null,_getElFolderId:function(){return this._elFolderId||this._initElFolderId()},_initElFolderId:function(){return this._elFolderId=this._getElInputOf("fid")},_elFolderName:null,_getElFolderName:function(){return this._elFolderName||this._initElFolderName()},_initElFolderName:function(){var f=this._getElForm();return this._elFolderName=f.find(".setting_filter_edit-select_folder_name")},initialize:function(){this.__call("initialize",arguments);var f=this;d.comSetting.getAccountList(function(g){f._getFolders()})},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElInputOf("proc");this.__bind(f,"click","Proc");f=this._getElSelectFolder();this.__bind(f,"click","SelectFolder")},_getClsThisPage:function(){return"page-setting_filter_edit-item"},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(true)},_validate:function(){var g=[];var f;if(this._validateFilterNameIsNothing()){var h=neo.denbun.getText("フィルタ名");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validateKeywordsIsNothing()){var h;if(DENBUN_MODE_XNEO){h=neo.denbun.getText("条件")}else{h=neo.denbun.getText("文言")}var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}if(this._validateActionIsForwardAndForwadToIsNothing()){var h=neo.denbun.getText("転送先アドレス");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}return g},_validateFilterNameIsNothing:function(){var f=this._getElInputOf("Name");var g=f.val();if(g.length<1){return true}return false},_validateKeywordsIsNothing:function(){if(DENBUN_MODE_XNEO){var f=this._getElForm();var l=f.find(".setting_filter_edit-fvalue-input");var j=l.length;for(var h=0;h<j;h++){var g=l.eq(h);var k=g.val();if(k.length>0){return false}}return true}else{var g=this._getElInputOf("fvalue");var k=g.val();if(k.length<1){return true}return false}},_validateActionIsForwardAndForwadToIsNothing:function(){var f=this._getElInputOf("proc").filter(":checked");var g=f.val();if(g==a.VAL_FILTER_ACTION_FOWARD){var f=this._getElInputOf("forwardto");var g=f.val();if(g.length<1){return true}}return false},_getDataToGetSetting:function(){var f={cmd:"mailfilterentry",id:this._getFilterId()};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareaccfilter";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(this._getFilterId()){f.id=this._getFilterId()}if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareaccfilter";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},cancel:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER,f,false);return}}d.openPage(d.PAGE_SETTING_FILTER,null,false)},_load:function(){this._initFilterId();this._setPageTitleToPage();this._setRemoveButtonVisibility();this._setMailGeneralSettingToForm();if(this._getFilterId()){this.__call("_load",arguments)}else{this._setDefaultsToForm();this._enableOkButton();this._setFolderName("")}},_setPageTitleToPage:function(){var f="";if(this._getFilterId()){f=neo.denbun.getText("フィルタの変更")}else{f=neo.denbun.getText("フィルタの登録")}this._setPageTitle(f)},_setRemoveButtonVisibility:function(){if(this._getFilterId()){this._showRemoveButton()}else{this._hideRemoveButton()}},_setMailGeneralSettingToForm:function(){var h={};var g=d.comSetting.isAllowedToFilterTransfer();h=this._getElInputOf("proc");var j=h.filter("[value="+a.VAL_FILTER_ACTION_FOWARD+"]");var f=j.closest("li");var i=this._getElInputOf("forwardto");if(g){f.removeClass("disabled");j.attr("disabled",false);i.attr("disabled",false)}else{f.addClass("disabled");j.attr("disabled",true);i.attr("disabled",true)}},_setDefaultsToForm:function(){var g=a.defaults;var f=d.comSetting.isAllowedToFilterTransfer();if(f){g.proc=a.VAL_FILTER_ACTION_FOWARD}else{g.proc=a.VAL_FILTER_ACTION_MOVE_TO_SELECTED_FOLDER}b.setFormValues(this,g);this._setAmongTiming()},_setToForm:function(i){b.setResponseToForm(this,i);var j=c(i);var n=j.children("result");var q=n.children("conditions");var p=q.children("from");var f=q.children("to");var m=q.children("subject");var l=q.children("body");var o=n.children("proc");var k={fromeffect1:p.attr("effect"),fromfrange1:p.attr("range"),toeffect2:f.attr("effect"),tofrange2:f.attr("range"),subjecteffect3:m.attr("effect"),subjectfrange3:m.attr("range"),bodyeffect4:l.attr("effect"),bodyfrange4:l.attr("range"),proc:o.attr("val"),fid:o.attr("fid"),forwardto:o.attr("forwardto")};if(DENBUN_MODE_XNEO){k.fromfvalue1=p.attr("value");k.tofvalue2=f.attr("value");k.subjectfvalue3=m.attr("value");k.bodyfvalue4=l.attr("value")}b.setFormValues(this,k);var g=this._getFolderId();if(g){var h=this._getFolders();var r=this;d.comSetting.getAccountList(function(s){h.update(function(){r._updateFolderName()})})}this._setAmongTiming()},_updateFolderName:function(){var g=this._getFolders();var f=this._getFolderId();if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f=d.editShareAccountNodeId(this.getShareAccId(),f)}}var h=g.getNameOf(f);if(!h){h=""}this._setFolderName(h)},_setAmongTiming:function(){var g=this._getElInputOf("proc").filter(":checked");var j=g.val();var i=this._getElAuto();var h=this._getElManual();var f=h.parent();if(j==a.VAL_FILTER_ACTION_FOWARD){i.attr("checked",true);h.attr("disabled",true);f.addClass(d.CLS_DISABLED)}else{h.attr("disabled",false);f.removeClass(d.CLS_DISABLED)}},remove:function(){var g=d.getText("削除してよろしいですか？");var f=this;d.confirm(g,{onok:function(){var h=f._getFilterId();if(DENBUN_MODE_XNEO){if(f.getShareAccId()){b.deleteShareAccountFilter(h,function(){var i={};i[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER,i)},f.getShareAccId());return}}b.deleteFilter(h,function(){d.openPage(d.PAGE_SETTING_FILTER)})}})},_selectFolder:function(){var f=this._getDlgFolder();f.open()},_updateDlgFolder:function(h){var f=this;var g=this._getFolders();g.update(function(){var i=f._getFolderId();if(i){if(DENBUN_MODE_XNEO){if(f.getShareAccId()){i=d.editShareAccountNodeId(f.getShareAccId(),i)}}g.open(i);g.select(null);g.select(i)}})},_selectedIdFromFolder:function(){var g=this._getErrorToSelectFolder();if(g){this._setFolderId(null);this._updateFolderName();return false}var i=this._getFolders();var f=i.getCurNodeId();if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f=d.getShareFolderIdIn(f)}}this._setFolderId(f);this._updateFolderName();if(DENBUN_MODE_XNEO){var h=this._getElInputOf("proc");h.filter("[value="+a.VAL_FILTER_ACTION_MOVE_TO_SELECTED_FOLDER+"]").attr("checked",true);this._setAmongTiming()}},_getErrorToSelectFolder:function(){var h=null;var i=this._getFolders();var f=i.getCurNodeId();var g=i.getElNodeOf(f);if(i.isCannotSelectedFolder(g)){return true}return h},_getFolderId:function(){var f=this._getElFolderId();return f.val()},_setFolderId:function(g){var f=this._getElFolderId();f.val(g)},_setFolderName:function(g){var f=this._getElFolderName();f.text(g)},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_FILTER,f);return}}d.openPage(d.PAGE_SETTING_FILTER)},onclickProc:function(f,g){this._setAmongTiming()},onclickSelectFolder:function(f,g){f.preventDefault();this._selectFolder()},banpei:null}});a.constructor()})(jQuery);(function(c){var f=neo.core.readyNamespace("neo.denbun.Setting.FilterEditSettingPage.Folders");if(!f){return}var e=neo.denbun;var d=e.Tree;var b=e.Setting;var a=neo.denbun.Setting.FilterEditSettingPage.Folders=new neo.core.Class({superClass:e.Tree,classProperties:{CLS_ACCOUNT:"mail-folder-node-account",CLS_ACCOUNT_SHARE:"mail-folder-node-account-share",CLS_RECEIVED:"mail-folder-node-received",CLS_SENT:"mail-folder-node-sent",CLS_TRASH:"mail-folder-node-trash",CLS_DRAFT:"mail-folder-node-draft",CLS_TEMPLATE:"mail-folder-node-template",DATA_ACCOUNT_ID:"data-aid",KEY_NODE_TYPE:"ftype",NODE_TYPE_ACCOUNT:"0",NODE_TYPE_RECEIVED:"1",NODE_TYPE_SENT:"2",NODE_TYPE_TRASH:"3",NODE_TYPE_DRAFT:"4",NODE_TYPE_TEMPLATE:"5",NODE_TYPE_OTHER:"9",constructor:function(){}},properties:{_callbackForUpdating:null,_getCallbackForUpdating:function(){return this._callbackForUpdating},_setCallbackForUpdating:function(g){return this._callbackForUpdating=g},initialize:function(){d.hook()},_getElContainerLow:function(){return c("#setting_filter_edit-folder")},_getSendDataToLoad:function(){var g={cmd:"mailfolders"};if(DENBUN_MODE_XNEO){g[e.PARAM_PROC]=e.PROC_PRIANDSHARE}return g},_openFirstNode:function(){if(DENBUN_MODE_XNEO){var g=this._getPage();if(g.getShareAccId()){h="-"+e.editShareAccountNodeId(g.getShareAccId(),null)}else{h="-"+e.comSetting.getDefaultAccountId()}this.open(h)}else{var h=e.comSetting.getDefaultAccountId();this.open(-h)}this.select(null)},_exTreeOpen:function(h){var g=c(h.target);if(g.children("."+d.CLS_TREE).length==0){this._buildChild(g)}},_buildElNodeLow:function(k){var h=k[a.KEY_NODE_TYPE];var j;switch(h){case a.NODE_TYPE_ACCOUNT:j=this._buildElAccountNode(k);break;case a.NODE_TYPE_TRASH:j=this._buildElTrashNode(k);break;default:j=this.__call("_buildElNodeLow",arguments)}var g=this._getClsNodeType(k);j.addClass(g);if(DENBUN_MODE_XNEO){if(this._isShareAccountNode(k)&&h==a.NODE_TYPE_ACCOUNT){j.addClass(a.CLS_ACCOUNT_SHARE)}}if(this.isCannotSelectedFolder(j)){var i=this._getElLinkFrom(j);i.addClass(e.CLS_DISABLED)}return j},_buildElAccountNode:function(h){var g=this.__call("_buildElNodeLow",arguments);g.attr(d.DATA_ID,"account_"+(new Date().getTime())).attr(a.DATA_ACCOUNT_ID,h.aid);if(DENBUN_MODE_XNEO){if(this._isShareAccountNode(h)){var i=e.editShareAccountNodeId(h.aid,null);g.attr(a.DATA_ACCOUNT_ID,i)}}return g},_buildElTrashNode:function(h){var g=this.__call("_buildElNodeLow",arguments);return g},_getClsNodeType:function(i){var h=i[a.KEY_NODE_TYPE];var g;switch(h){case a.NODE_TYPE_ACCOUNT:g=a.CLS_ACCOUNT;break;case a.NODE_TYPE_RECEIVED:g=a.CLS_RECEIVED;break;case a.NODE_TYPE_SENT:g=a.CLS_SENT;break;case a.NODE_TYPE_TRASH:g=a.CLS_TRASH;break;case a.NODE_TYPE_DRAFT:g=a.CLS_DRAFT;break;case a.NODE_TYPE_TEMPLATE:g=a.CLS_TEMPLATE;break}return g},_buildChild:function(i){var h=this;var k=this.getNodeIdFrom(i);var j=this._getTreeNodeOf(k);var g=this._buildElTree(j.children,0);i.append(g)},_buildTreePathTo:function(g,l){var k=[];if(DENBUN_MODE_XNEO){g=g+"";if(g.charAt(0)=="-"){k.push(g)}else{k=this._getParentsIdList(g)}}else{if(g<0){k.push(g)}else{k=this._getParentsIdList(g)}}for(var j=0;j<k.length;j++){var m=k[j];if(l!==true&&m==g){break}var h=this.getElNodeOf(m);if(!h){return}if(h.children("."+d.CLS_TREE).length==0){this._buildChild(h)}}},_saveAllNodes:function(g){var h=this;for(var j in g){var i=g[j];h._addNode(i);h._saveAllNodes(i.children)}},_saveTreeMaster:function(g){this._setTreeNodes(g)},_getTreeNodeOf:function(i){var g;if(DENBUN_MODE_XNEO){i=i+"";if(i.charAt(0)=="-"){i=i.substring(1);var h=this._getTreeNodes();g=h[i]}else{g=this._getNodeOf(i)}}else{if(i<0){i*=-1;var h=this._getTreeNodes();g=h[i]}else{g=this._getNodeOf(i)}}return g},_getParentsIdList:function(g){var k=[];var j=this._getNodeOf(g);var m=(j)?j.aid:null;if(DENBUN_MODE_XNEO){if(j&&this._isShareAccountNode(j)){m=e.editShareAccountNodeId(m,null)}}var l=this._getTreeNodes();if(l){for(var h=0;h<l.order.length;h++){if(l.order[h]==m){var n=l.order[h];var j=l[n];this._searchIdList(j.children,g,k);if(k.length>0){if(DENBUN_MODE_XNEO){n="-"+n}else{n*=-1}k.unshift(n);break}}}}return k},_searchIdList:function(g,h,l){if(g){for(var j=0;j<g.order.length;j++){if(g.order[j]==h){l.unshift(g.order[j]);return}}for(var j=0;j<g.order.length;j++){var m=g.order[j];var k=g[m];this._searchIdList(k.children,h,l);if(l.length>0){l.unshift(m);return}}}},_addNode:function(h){if(this._isAccountNode(h)){return}var g=this._getNodes();var i=this._getNodeId(h);g.set(i,h)},_getNodeId:function(g){var h;if(this._isAccountNode(g)){h=g.aid;if(DENBUN_MODE_XNEO){if(this._isShareAccountNode(g)){h=e.editShareAccountNodeId(g.aid,null)}}}else{h=g.id;if(DENBUN_MODE_XNEO){if(this._isShareAccountNode(g)){h=e.editShareAccountNodeId(g.aid,g.id)}}}return h},_isShareAccountNode:function(g){return(!!g&&g.share=="1")},_isAccountNode:function(g){return(g[a.KEY_NODE_TYPE]==a.NODE_TYPE_ACCOUNT)},getElNodeOf:function(h){var g;if(DENBUN_MODE_XNEO){h=h+"";if(h.charAt(0)=="-"){h=h.substring(1);g=this._getElAccountNodeOf(h)}else{g=d.prototype.getElNodeOf.apply(this,arguments)}}else{if(h<"0"){g=this._getElAccountNodeOf(-h)}else{g=d.prototype.getElNodeOf.apply(this,arguments)}}return g},_getElAccountNodeOf:function(i){var h=this.getElRoot();var g=h.find("["+a.DATA_ACCOUNT_ID+"="+i+"]");return g},_getNumOfAccounts:function(){var h=this.getElContainer();var g=h.find("."+a.CLS_ACCOUNT);return g.length},_getAccountId:function(g){var h=g.attr(a.DATA_ACCOUNT_ID);return h},update:function(g){this._setCallbackForUpdating(g);this._clean();this._load()},_clean:function(){var g=this.getElContainer();g.empty();this._initNodes()},open:function(g){this._buildTreePathTo(g,true);d.prototype.open.apply(this,arguments)},isCannotSelectedFolder:function(h){if(DENBUN_MODE_XNEO){if(h.hasClass(a.CLS_ACCOUNT)||h.hasClass(a.CLS_RECEIVED)||h.hasClass(a.CLS_TEMPLATE)||h.hasClass(a.CLS_DRAFT)){return true}var j=this._getPage();var g=this.getNodeIdFrom(h);if(!g){return true}if(j.getShareAccId()){var k;var i=this._getTreeNodeOf(g);if(i){k=i.aid}if(j.getShareAccId()!=k){return true}}else{if(g.indexOf(e.SHARE_NODE_ID_PREFIX)==0){return true}}return false}else{return(h.hasClass(a.CLS_ACCOUNT)||h.hasClass(a.CLS_RECEIVED)||h.hasClass(a.CLS_DRAFT))}},getNodeIdFrom:function(g){var h;if(g.hasClass(a.CLS_ACCOUNT)){if(DENBUN_MODE_XNEO){h="-"+this._getAccountId(g)}else{h=-this._getAccountId(g)}}else{h=d.prototype.getNodeIdFrom.apply(this,arguments)}return h},onsuccessLoad:function(h,g,i){this._clean();this.__call("onsuccessLoad",arguments);if(this._getNumOfAccounts()>0){this._openFirstNode()}var j=this._getCallbackForUpdating();if(typeof j=="function"){j()}},__bind:e.__bind,banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.JunkMailSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.JunkMailSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_elNew:null,_getElNew:function(){return this._elNew||this._initElNew()},_initElNew:function(){var f=this._getElForm();return this._elNew=f.find(".setting_junkmail-new")},_elEdit:null,_getElEdit:function(){return this._elEdit||this._initElEdit()},_initElEdit:function(){var f=this._getElForm();return this._elEdit=f.find(".setting_junkmail-edit")},_elDelete:null,_getElDelete:function(){return this._elDelete||this._initElDelete()},_initElDelete:function(){var f=this._getElForm();return this._elDelete=f.find(".setting_junkmail-delete")},_table:null,_getTable:function(){return this._table||this._initTable()},_initTable:function(){var f=this;var g={onloaded:function(){f.onloadedTable()}};if(DENBUN_MODE_XNEO){g.page=this}var h=new b.Table(g);h.initialize();return this._table=h},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElNew();this.__bind(f,"click","New");f=this._getElEdit();this.__bind(f,"click","Edit");f=this._getElDelete();this.__bind(f,"click","Delete")},_getClsThisPage:function(){return"page-setting_junkmail-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToSetSetting:function(){var h={};h.cmd="mailcmdtrouble";if(DENBUN_MODE_XNEO){if(this.getShareAccId()){h.cmd="mailcmdshareacctroublelist";h[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}var g=this._getElInputOf("proc");var f=g.val();h.proc=f;return h},_clean:function(){this.__call("_clean",arguments);var f=this._getTable();f.load()},_load:function(){this._enableOkButton()},startCreatingJunkSetting:function(){var f={};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL_EDIT,f);return}}d.openPage(d.PAGE_SETTING_JUNKMAIL_EDIT)},startEditingJunkSetting:function(){var f=this._getSelectedJunkSettingId();if(!f){var h=d.getText("対象行を選択してください。");d.alert(h);return}var g={id:f};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){g[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL_EDIT,g);return}}d.openPage(d.PAGE_SETTING_JUNKMAIL_EDIT,g)},deleteJunkSetting:function(){var i=this._getTable();var g=i.getSelectedIdList();if(g.length<1){var h=d.getText("対象行を選択してください。");d.alert(h);return}var h=d.getText("選択した迷惑メール設定を削除してよろしいですか？");var f=this;d.confirm(h,{onok:function(){if(DENBUN_MODE_XNEO){if(f.getShareAccId()){a.deleteShareAccountJunkSetting(g,function(){i.deleteRowByIds(g)},f.getShareAccId());return}}a.deleteJunkSetting(g,function(){i.deleteRowByIds(g)})}})},_getSelectedJunkSettingId:function(){var f=this._getTable();if(f.getSelectedCount()>0){var g=f.getCurId();return g}return null},_setJunkMailProcToForm:function(f){var g=this._getElInputOf("proc");g.val(f)},onresize:function(g){var f=this._getTable();a.updateTableHeight(this,f,-7);f.onresize(g)},onloadedTable:function(){var g=this._getTable();var f=g.getJunkMailProc();this._setJunkMailProcToForm(f)},onclickNew:function(f,g){this.startCreatingJunkSetting()},onclickEdit:function(f,g){this.startEditingJunkSetting()},onclickDelete:function(f,g){this.deleteJunkSetting()},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.JunkMailSettingPage.Table");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.JunkMailSettingPage.Table=new neo.core.Class({superClass:b.SettingTable,classProperties:{VAL_TASK_FORCEDELETE:"1",VAL_TASK_DELETEEXCLUDED:"2"},properties:{_getElContainerLow:function(){return c("#setting_junkmail-table-container")},_updateData:function(f){if(f){if(this.setting.onloaded){this.setting.onloaded()}}},_buildTableCellsHtml:function(j,k,h){var f=this._getTableCellEndHtml();var g=0;var i=k.data;j.push(this._getTableCellStartHtml(["setting_junkmail-table-cell-subject",d.Table.CLS_CELL_FLEXIBLE],h[g++]));j.pushText(i.subject);j.push(f);j.push(this._getTableCellStartHtml(["setting_junkmail-table-cell-task"],h[g++]));j.pushText((i.type==a.VAL_TASK_FORCEDELETE?d.getText("強制削除"):d.getText("削除対象外")));j.push(f)},_getDataToLoad:function(){var g=this._getConditions();g.cmd="mailtrouble";if(DENBUN_MODE_XNEO){var f=this._getPage();if(f.getShareAccId()){g.cmd="mailshareacctroublelist";g[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId()}}return g},open:function(){var h=this.getCurId();if(DENBUN_MODE_XNEO){var g=this._getPage();if(g.getShareAccId()){var f={};f.id=h;f[d.PARAM_SHARE_ACCOUNT_ID]=g.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL_EDIT,f);return}}d.openPage(d.PAGE_SETTING_JUNKMAIL_EDIT,{id:h})},getJunkMailProc:function(){var f=this._getData();return f.proc},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.JunkMailEditSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.JunkMailEditSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{defaults:{subject:"",type:"1"},constructor:function(){}},properties:{_junkSettingId:null,_getJunkSettingId:function(){return this._junkSettingId||this._initJunkSettingId()},_initJunkSettingId:function(){return this._junkSettingId=d.getParameter("id")},_getClsThisPage:function(){return"page-setting_junkmail_edit-item"},_updateToolbarMenuVisiblity:function(){b.toggleVisibilityOkAndCancelToolbarButton(true)},_validate:function(){var g=[];var f;if(this._mailAddressDomainIsNothing()){var h=neo.denbun.getText("メールアドレス/ドメイン");var i=neo.denbun.getText("$$を入力してください。");f=neo.core.replace(i,h);g.push(f)}return g},_mailAddressDomainIsNothing:function(){var f=this._getElInputOf("subject");var g=f.val();if(g.length<1){return true}return false},_getDataToGetSetting:function(){var f={cmd:"mailtroubleentry",id:this._getJunkSettingId()};if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailshareacctrouble";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_getDataToSetSetting:function(){var f=this.__call("_getDataToSetSetting",arguments);if(this._getJunkSettingId()){f.id=this._getJunkSettingId()}if(DENBUN_MODE_XNEO){if(this.getShareAccId()){f.cmd="mailcmdshareacctrouble";f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId()}}return f},_setToForm:function(f){b.setResponseToForm(this,f)},cancel:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL,f,false);return}}d.openPage(d.PAGE_SETTING_JUNKMAIL,null,false)},_load:function(){this._initJunkSettingId();this._setPageTitleToPage();this._setRemoveButtonVisibility();if(this._getJunkSettingId()){this.__call("_load",arguments)}else{this._setDefaultsToForm();this._enableOkButton()}},_setPageTitleToPage:function(){var f="";if(this._getJunkSettingId()){f=neo.denbun.getText("迷惑メール設定の変更")}else{f=neo.denbun.getText("迷惑メール設定の登録")}this._setPageTitle(f)},_setRemoveButtonVisibility:function(){if(this._getJunkSettingId()){this._showRemoveButton()}else{this._hideRemoveButton()}},_setDefaultsToForm:function(){var f=a.defaults;b.setFormValues(this,f)},remove:function(){var g=d.getText("削除してよろしいですか？");var f=this;d.confirm(g,{onok:function(){var h=f._getJunkSettingId();if(DENBUN_MODE_XNEO){if(f.getShareAccId()){b.deleteShareAccountJunkSetting(h,function(){var i={};i[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL,i)},f.getShareAccId());return}}b.deleteJunkSetting(h,function(){d.openPage(d.PAGE_SETTING_JUNKMAIL)})}})},onsuccessSetSetting:function(){if(DENBUN_MODE_XNEO){if(this.getShareAccId()){var f={};f[d.PARAM_SHARE_ACCOUNT_ID]=this.getShareAccId();d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT_JUNKMAIL,f);return}}d.openPage(d.PAGE_SETTING_JUNKMAIL)},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AddressVisualSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.AddressVisualSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_getClsThisPage:function(){return"page-setting_addressvisual-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(true);a.toggleVisibilityRemoveToolbarButton(false)},_getDataToGetSetting:function(){var f={cmd:"addrgenprivate"};return f},_setToForm:function(g){var f=c(g).children();a.setResponseToForm(this,g)},onsuccessSetSetting:function(){d.comSetting.getAddressSetting();this.__call("onsuccessSetSetting",arguments)},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.PersonalAddressDeleteSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.PersonalAddressDeleteSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{constructor:function(){}},properties:{_elCheckAllDelete:null,_getElCheckAllDelete:function(){return this._elCheckAllDelete||this._initElCheckAllDelete()},_initElCheckAllDelete:function(){var f=this._getElForm();return this._elCheckAllDelete=f.find(".setting_personaladdressdelete_checkalldelete")},_elAllDelete:null,_getElAllDelete:function(){return this._elAllDelete||this._initElAllDelete()},_initElAllDelete:function(){var f=this._getElForm();return this._elAllDelete=f.find(".setting_personaladdressdelete_alldelete")},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElCheckAllDelete();this.__bind(f,"click","CheckAllDelete");f=this._getElAllDelete();this.__bind(f,"click","AllDelete")},_getClsThisPage:function(){return"page-setting_personaladdressdelete-item"},_load:function(){this._uncheckAllDeleteCheckBox();this._disableAllDeleteButton()},_uncheckAllDeleteCheckBox:function(){var f=this._getElCheckAllDelete();f.attr("checked",false)},_enableAllDeleteButton:function(){var f=this._getElAllDelete();f.attr("disabled",false)},_disableAllDeleteButton:function(){var f=this._getElAllDelete();f.attr("disabled",true)},_deleteAllPersonalAddress:function(){var f={getSendData:function(){var h={cmd:"addrcmddelete"};return h},onsuccess:function(){d.openPage(d.PAGE_SETTING_INDEX)}};var g=new d.Ajax(f);g.initialize();g.sendRequest();d.app.setSettingModified()},onclickCheckAllDelete:function(g,h){var f=c(h);var i=f.attr("checked");if(i){this._enableAllDeleteButton()}else{this._disableAllDeleteButton()}},onclickAllDelete:function(f,g){this._deleteAllPersonalAddress()},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.PublicAddressDeleteSettingPage");if(!e){return}var d=neo.denbun;var b=d.Setting;var a=neo.denbun.Setting.PublicAddressDeleteSettingPage=new neo.core.Class({superClass:b.SettingPage,classProperties:{constructor:function(){}},properties:{_elCheckAllDelete:null,_getElCheckAllDelete:function(){return this._elCheckAllDelete||this._initElCheckAllDelete()},_initElCheckAllDelete:function(){var f=this._getElForm();return this._elCheckAllDelete=f.find(".setting_publicaddressdelete_checkalldelete")},_elAllDelete:null,_getElAllDelete:function(){return this._elAllDelete||this._initElAllDelete()},_initElAllDelete:function(){var f=this._getElForm();return this._elAllDelete=f.find(".setting_publicaddressdelete_alldelete")},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElCheckAllDelete();this.__bind(f,"click","CheckAllDelete");f=this._getElAllDelete();this.__bind(f,"click","AllDelete")},_getClsThisPage:function(){return"page-setting_publicaddressdelete-item"},_load:function(){this._uncheckAllDeleteCheckBox();this._disableAllDeleteButton()},_uncheckAllDeleteCheckBox:function(){var f=this._getElCheckAllDelete();f.attr("checked",false)},_enableAllDeleteButton:function(){var f=this._getElAllDelete();f.attr("disabled",false)},_disableAllDeleteButton:function(){var f=this._getElAllDelete();f.attr("disabled",true)},_deleteAllPublicAddress:function(){var f={getSendData:function(){var h={cmd:"addrcmddeletepublic"};return h},onsuccess:function(){d.openPage(d.PAGE_SETTING_INDEX)}};var g=new d.Ajax(f);g.initialize();g.sendRequest();d.app.setSettingModified()},onclickCheckAllDelete:function(g,h){var f=c(h);var i=f.attr("checked");if(i){this._enableAllDeleteButton()}else{this._disableAllDeleteButton()}},onclickAllDelete:function(f,g){this._deleteAllPublicAddress()},banpei:null}});a.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AddressImportSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.AddressImportSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{VAL_ADDRESS_TYPE_PERSONAL:"1",FIELD_NAME_ADDRESS_TYPE:"select_address_type",constructor:function(){}},properties:{_elUp:null,_getElUp:function(){return this._elUp||this._initElUp()},_initElUp:function(){var f=this._getElForm();return this._elUp=f.find(".setting_addressimport-up")},_elDown:null,_getElDown:function(){return this._elDown||this._initElDown()},_initElDown:function(){var f=this._getElForm();return this._elDown=f.find(".setting_addressimport-down")},_elRestoreDefault:null,_getElRestoreDefault:function(){return this._elRestoreDefault||this._initElRestoreDefault()},_initElRestoreDefault:function(){var f=this._getElForm();return this._elRestoreDefault=f.find(".setting_addressimport_restoredefault")},_elCsvExport:null,_getElCsvExport:function(){return this._elCsvExport||this._initElCsvExport()},_initElCsvExport:function(){var f=this._getElForm();return this._elCsvExport=f.find(".setting_addressimport_csvimport")},_elList:null,_getElList:function(){return this._elList||this._initElList()},_initElList:function(){var f=this._getElForm();return this._elList=f.find(".setting_addressimport_list")},_list:null,_getList:function(){return this._list||this._initList()},_initList:function(){var f={elList:this._getElList()};var g=new a.SettingAddressImportExportList(f);g.initialize();return this._list=g},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElUp();this.__bind(f,"click","Up");f=this._getElDown();this.__bind(f,"click","Down");f=this._getElRestoreDefault();this.__bind(f,"click","RestoreDefault");f=this._getElCsvExport();this.__bind(f,"click","CsvImport")},_getClsThisPage:function(){return"page-setting_addressimport-item"},_load:function(){var g=this._getList();g.load();this._refreshAddressTypeStatus();if(DENBUN_MODE_XNEO){var f=this._getElForm();f.find('[name="title_except"]').attr("checked",false);this._initEncodeType()}},_restoreDefault:function(){var f=this._getList();f.restoreDefault()},_refreshAddressTypeStatus:function(){var j=this._getElInputOf(b.FIELD_NAME_ADDRESS_TYPE);var f=j.parent();var h=d.comSetting.hasAuthorityToImportPublicAddress();var i=false;if(!h){i=true}j.attr("disabled",i);f.toggleClass(d.CLS_DISABLED,i);if(i){var g=j.filter('[value="'+b.VAL_ADDRESS_TYPE_PERSONAL+'"]');g.attr("checked",true)}},_importCsv:function(){var h=this._getElInputOf(b.FIELD_NAME_ADDRESS_TYPE).filter(":checked");var q=c("#dlg-addresscsvimport_input");var t=c("#dlg-addresscsvimport_input_template").clone();var l="./"+d.getUrl(d.CGI_EMLC);var g=t.find("form");g.attr("action",l);var i="addrimport"+h.val();var k=t.find('[name="cmd"]');k.val(i);if(DENBUN_MODE_XNEO){var r=this._getElForm();var j="0";if(r.find('[name="title_except"]').attr("checked")){j="1"}t.find('[name="title_except"]').val(j);var o=r.find('[name="char_code"]').val();var f=r.find('[name="char_sep"]').val();t.find('[name="char_code"]').val(o);t.find('[name="char_sep"]').val(f)}var u={content:q,title:d.getText("インポート"),buttons:{}};u.buttons[d.getText("閉じる")]=function(){this.close()};var s=new neo.denbun.Dialog(u);s.initialize();s.open();var m=q.find("iframe:first");var n=m.contents()[0];n.open();n.write(["<html>","<head>","<title>","</title>","</head>",'<body style="text-align:center;">',t.wrap("<div />").html(),"</body>","</html>"].join(""));n.close();if(d.isAndroid()){var p=c(n).find("body");p.css("font-size","12px");p.find('input[type="file"]').width(330)}d.app.setSettingModified()},moveListItem:function(f){var h=this._getList();var i=h.getSelectedItemId();if(!i){var g=d.getText("項目を選択してください。");d.alert(g);return}h.moveListItem(i,f)},onclickUp:function(f,g){this.moveListItem(a.SettingAddressImportExportList.MOVEITEM_UP)},onclickDown:function(f,g){this.moveListItem(a.SettingAddressImportExportList.MOVEITEM_DOWN)},onclickRestoreDefault:function(f,g){this._restoreDefault()},onclickCsvImport:function(f,g){if(DENBUN_MODE_XNEO){this._setCookiesEncodeType()}this._importCsv()},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.AddressExportSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.AddressExportSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{VAL_ADDRESS_TYPE_PERSONAL:"1",FIELD_NAME_ADDRESS_TYPE:"select_address_type",constructor:function(){}},properties:{_elUp:null,_getElUp:function(){return this._elUp||this._initElUp()},_initElUp:function(){var f=this._getElForm();return this._elUp=f.find(".setting_addressexport-up")},_elDown:null,_getElDown:function(){return this._elDown||this._initElDown()},_initElDown:function(){var f=this._getElForm();return this._elDown=f.find(".setting_addressexport-down")},_elRestoreDefault:null,_getElRestoreDefault:function(){return this._elRestoreDefault||this._initElRestoreDefault()},_initElRestoreDefault:function(){var f=this._getElForm();return this._elRestoreDefault=f.find(".setting_addressexport_restoredefault")},_elCsvExport:null,_getElCsvExport:function(){return this._elCsvExport||this._initElCsvExport()},_initElCsvExport:function(){var f=this._getElForm();return this._elCsvExport=f.find(".setting_addressexport_csvexport")},_elList:null,_getElList:function(){return this._elList||this._initElList()},_initElList:function(){var f=this._getElForm();return this._elList=f.find(".setting_addressexport_list")},_list:null,_getList:function(){return this._list||this._initList()},_initList:function(){var f={elList:this._getElList()};var g=new a.SettingAddressImportExportList(f);g.initialize();return this._list=g},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElUp();this.__bind(f,"click","Up");f=this._getElDown();this.__bind(f,"click","Down");f=this._getElRestoreDefault();this.__bind(f,"click","RestoreDefault");f=this._getElCsvExport();this.__bind(f,"click","CsvExport")},_getClsThisPage:function(){return"page-setting_addressexport-item"},_load:function(){var f=this._getList();f.load();if(DENBUN_MODE_XNEO){this._refreshAddressTypeStatus();this._initEncodeType()}},_restoreDefault:function(){var f=this._getList();f.restoreDefault()},_refreshAddressTypeStatus:function(){var j=this._getElInputOf(b.FIELD_NAME_ADDRESS_TYPE);var f=j.parent();var i=false;i=d.comSetting.hasAuthorityToExportPublicAddress();var h=false;if(!i){h=true}j.attr("disabled",h);f.toggleClass(d.CLS_DISABLED,h);if(h){var g=j.filter('[value="'+b.VAL_ADDRESS_TYPE_PERSONAL+'"]');g.attr("checked",true)}},_exportCsv:function(){var f=this._buildUrlToDownload();window.open(f)},_buildUrlToDownload:function(){var f="address.csv";var j=d.getUrl(d.CGI_EMLC);if(c.browser.webkit){j+="/"+f}var l=this._getCmd();var k="cmd="+l;if(DENBUN_MODE_XNEO){var g=this._getElForm();var i=neo.core.joinParam({char_code:g.find('[name="char_code"]').val(),char_sep:g.find('[name="char_sep"]').val()});k=k+"&"+i}var h=j+"?"+k;return h},_getCmd:function(){var h=this._getElInputOf("select_address_type").filter(":checked");var f=h.val();var g="addrexport"+f;return g},moveListItem:function(f){var h=this._getList();var i=h.getSelectedItemId();if(!i){var g=d.getText("項目を選択してください。");d.alert(g);return}h.moveListItem(i,f)},onclickUp:function(f,g){this.moveListItem(a.SettingAddressImportExportList.MOVEITEM_UP)},onclickDown:function(f,g){this.moveListItem(a.SettingAddressImportExportList.MOVEITEM_DOWN)},onclickRestoreDefault:function(f,g){this._restoreDefault()},onclickCsvExport:function(f,g){if(DENBUN_MODE_XNEO){this._setCookiesEncodeType()}this._exportCsv()},banpei:null}});b.constructor()})(jQuery);(function(c){var e=neo.core.readyNamespace("neo.denbun.Setting.VacuumSettingPage");if(!e){return}var d=neo.denbun;var a=d.Setting;var b=neo.denbun.Setting.VacuumSettingPage=new neo.core.Class({superClass:a.SettingPage,classProperties:{constructor:function(){}},properties:{_elCheckVacuum:null,_getElCheckVacuum:function(){return this._elCheckVacuum||this._initElCheckVacuum()},_initElCheckVacuum:function(){var f=this._getElForm();return this._elCheckVacuum=f.find(".setting_vacuum_checkvacuum")},_elVacuumOk:null,_getElVacuumOk:function(){return this._elVacuumOk||this._initElVacuumOk()},_initElVacuumOk:function(){var f=this._getElForm();return this._elVacuumOk=f.find(".setting_vacuum_ok")},_dlgProcessing:null,_getDlgProcessing:function(){return this._dlgProcessing},_initDlgProcessing:function(){var f=d.getText("最適化中...");var g=d.prevent(f);return this._dlgProcessing=g},_ajaxStartVacuum:null,_getAjaxStartVacuum:function(){return this._ajaxStartVacuum||this._initAjaxStartVacuum()},_initAjaxStartVacuum:function(){var f=this;var g={getSendData:function(){var i={cmd:"mailvacuum",exec:1};if(DENBUN_MODE_XNEO){if(f.getShareAccId()){i.cmd="mailcmdshareaccvacuum";i[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId()}}return i},onsuccess:this.__closure(this.onsuccessStartVacuum),onerror:this.__closure(this.onerrorStartVacuum)};var h=new d.Ajax(g);h.initialize();return this._ajaxStartVacuum=h},_ajaxCheckVacuum:null,_getAjaxCheckVacuum:function(){return this._ajaxCheckVacuum||this._initAjaxCheckVacuum()},_initAjaxCheckVacuum:function(){var f=this;var g={getSendData:function(){var i={cmd:"mailvacuum"};if(DENBUN_MODE_XNEO){if(f.getShareAccId()){i.cmd="mailcmdshareaccvacuum";i[d.PARAM_SHARE_ACCOUNT_ID]=f.getShareAccId()}}return i},onsuccess:this.__closure(this.onsuccessCheckVacuum),onerror:this.__closure(this.onerrorCheckVacuum)};var h=new d.Ajax(g);h.initialize();return this._ajaxCheckVacuum=h},_hook:function(){var f;this.__call("_hook",arguments);f=this._getElCheckVacuum();this.__bind(f,"click","CheckVacuum");f=this._getElVacuumOk();this.__bind(f,"click","VacuumOk")},_getClsThisPage:function(){return"page-setting_vacuum-item"},_updateToolbarMenuVisiblity:function(){a.toggleVisibilityOkAndCancelToolbarButton(false);a.toggleVisibilityRemoveToolbarButton(false);if(DENBUN_MODE_XNEO){if(this.getShareAccId()){a.toggleVisibilityCancelToolbarButton(true)}}},_load:function(){this._uncheckVacuumCheckBox();this._disableVacuumButton()},_uncheckVacuumCheckBox:function(){var f=this._getElCheckVacuum();f.attr("checked",false)},_enableVacuumButton:function(){var f=this._getElVacuumOk();f.attr("disabled",false)},_disableVacuumButton:function(){var f=this._getElVacuumOk();f.attr("disabled",true)},_execVacuum:function(){var f=this._getAjaxStartVacuum();f.sendRequest();this._openDlgProcessing()},_openDlgProcessing:function(){var f=this._initDlgProcessing();f.open()},_closeDlgProcessing:function(){var f=this._getDlgProcessing();f.close()},_kickCheckVacuum:function(){var h=2000;var g=this._getAjaxCheckVacuum();var f=setTimeout(function(){g.sendRequest()},h)},_isVacuumComplete:function(g){var h="1";var f=g.find("running");return(f.text()!=h)},onclickCheckVacuum:function(g,h){var f=c(h);var i=f.attr("checked");if(i){this._enableVacuumButton()}else{this._disableVacuumButton()}},onclickVacuumOk:function(f,g){this._execVacuum()},onsuccessStartVacuum:function(g,f,h){this._kickCheckVacuum()},onerrorStartVacuum:function(){this._closeDlgProcessing()},onsuccessCheckVacuum:function(h,g,i){var f=c(h).find("result");if(this._isVacuumComplete(f)){this._closeDlgProcessing();if(DENBUN_MODE_XNEO){if(this.getShareAccId()){d.openPage(d.PAGE_SETTING_SHARE_ACCOUNT);return}}if(DENBUN_MODE_XNEO){d.app.setSettingModified()}d.openPage(d.PAGE_SETTING_INDEX)}else{this._kickCheckVacuum()}},onerrorCheckVacuum:function(){this._closeDlgProcessing()},banpei:null}});b.constructor()})(jQuery);