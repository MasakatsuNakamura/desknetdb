/*
 * desknet's NEO
 * https://www.desknets.com/
 * Copyright (C)2012-2016 NEOJAPAN Inc. All Rights Reserved.
 * 本製品は日本国著作権法および国際条約により保護されています。 
 * 本製品の全部または一部を無断で複製したり、無断で複製物を頒 
 * 布すると著作権の侵害となりますのでご注意ください。 
 */
(function(a){(function(b){desknets.flow={MODULE_MAIN_FLOW:"zflow",MODULE_API_FLOW:"zrflow",CMD_FORMPART_ADD:"flowcmdaddformpart",CMD_FORMPART_REMOVE:"flowcmddelformpart",CMD_FLOWEDITFORMATDISPTMPATTACH:"flowcmdeditformatdisptmpattach",CMD_FLOWEDITFORMATADDATTACH:"flowcmdformataddattach",CMD_FLOWEDITFORMATDELATTACH:"flowcmdformatdelattach",CMD_FLOWEDITFORMATSETSORT:"flowcmdeditformatsetsort",CMD_FLOWAPPLICATEPREVIEW:"flowcmdpreviewapplicate",CMD_ROUTENODE_ADD:"flowcmdaddroutepart",CMD_ROUTENODE_REMOVE:"flowcmddelroutepart",CMD_ROUTENODE_MODTITLE:"flowcmdmodrouteparttitle",CMD_ROUTENODE_MODCOND:"flowcmdmodroutepartcond",CMD_ROUTENODE_MODUSER:"flowcmdmodrouteparttarget",CMD_ROUTENODE_MODGROUP:"flowcmdmodrouteparttarget",CMD_ROUTENODE_MODROLE:"flowcmdmodrouteparttarget",CMD_ROUTENODE_ANAME:"flowcmdmodroutepartgname",CMD_ROUTENODE_MODAUSERS:"flowcmdmodrouteparttarget",CMD_ROUTENODE_REMOVEAUSERS:"flowcmddelrouteparttarget",CMD_ROUTENODE_MODBRANCH:"flowcmdmodroutepartbranch",CMD_ROUTENODE_MODHIERARCHY:"flowcmdmodrouteparthierarchy",CMD_ROUTENODE_MODEXCEPTAPPLICANT:"flowcmdmodroutepartexapplicant",CMD_FLOWEDITROUTESETSORT:"flowcmdeditroutesetsort",CMD_FLOWEDITROUTE:"flowcmdeditroute",CMD_FLOWROUTELIST:"flowcmdroutelist",PAGE_FLOWLIST:"flowindex",PAGE_FLOWENTRY:"flowentry",PAGE_FLOWDISP:"flowdisp",PAGE_FLOWSEARCH:"flowsearch",CMD_FLOWLIST:"flowcmdindex",CMD_FLOWENTRY:"flowcmdentry",CMD_FLOWENTRYDRAFT:"flowcmdentrydraft",CMD_FLOWCONFIRM:"flowcmdconfirm",CMD_FLOWCMDDEL:"flowcmddel",CMD_FLOWCMDDELCONF:"flowcmddelconf",CMD_FLOWCMDDRAFTDEL:"flowcmddraftdel",CMD_FLOWCMDNOTICEDEL:"flowcmdnoticedel",CMD_FLOWCMDNOTICEDELCONF:"flowcmdnoticedelconf",CMD_FLOWUNREAD:"flowcmdunread",CMD_FLOWCOMPLETE:"flowcmdcomplete",CMD_FLOWCANCEL:"flowcmdcomplete",CMD_FLOWCANCELCONF:"flowcmdcompleteconf",CMD_FLOWSEARCH:"flowcmdsearch",CMD_FLOWSEARCHINDEX:"flowcmdsearchindex",CMD_FLOWSTOPSEARCH:"flowcmdsearchstop",CMD_FLOWDISP:"flowcmddisp",CMD_FLOWCABATTACHCOPY:"flowcmdcabattachcopy",CMD_FLOWCONNECTAPP:"flowcmdconnectapp",CMD_FLOWAPPROVAL:"flowcmdapproval",CMD_FLOWDENIAL:"flowcmddenial",CMD_FLOWPRINT:"flowcmdprint",CMD_FLOWREFATTACH:"flowcmddispattach",CMD_FLOWADDATTACH:"flowcmdaddattach",CMD_FLOWDELATTACH:"flowcmddelattach",CMD_FLOWDISPFORMATATTACH:"flowcmddispformatattach",CMS_FLOWMSETREFATTACH:"flowmsetcmddispattach",CMD_FLOWTMPFILEADDATTACH:"flowcmdtmpfileaddattach",CMD_FLOWTMPFILEDELATTACH:"flowcmdtmpfiledelattach",CMD_FLOWTMPFILEDISPATTACH:"flowcmdtmpfiledispattach",CMD_FLOWENTRYFROMRESAVE:"flowcmdentryformresave",CMD_FLOWEDITFORMATCOPYTEMP:"flowcmdeditformatcopytemp",CMD_FLOWEDITFORMAT:"flowcmdeditformat",CMD_FLOWEDITROUTECOPYTEMP:"flowcmdeditroutecopytemp",CMD_FLOWEDITFORMATSAVE:"flowcmdeditformatsave",CMD_FLOWEDITROUTESAVE:"flowcmdeditroutesave",CMD_FLOWEDITROUTECOPY:"flowcmdeditroutecopy",CMD_FLOWSELECTROUTE:"flowcmdselectroute",CMD_FLOWSELECTFORMAT:"flowcmdselectformat",CMD_FLOWUSERFORMATPREVIEW:"flowcmduserformatpreview",CMD_FLOWFORMATPREVIEW:"flowcmdformatpreview",TEMPFILE_FLOWENTRY:"fent",TEMPFILE_FLOWENTRYFORMUPDATE:"fupdent",TEMPFILE_FLOWFORMENTRY:"ffentry",PRM_VAL_ALLUNREAD:"all",PRM_VAL_ALLCOMPLETE:"all",FID_RECV:"0",FID_SEND:"2",FID_DRAFT:"3",init:function(){var d=this;var c=b("#jco-pv-funcid").val();if(d.isFlowCmd(c)){desknets.pageframe.setFuncSel(c)}if(c==desknets.flow.PAGE_FLOWLIST){desknets.hashobserver.init(desknets.flow);desknets.flow.flowindex.init()}if(d.isFlowCmd(c)&&c.indexOf("flowpset")!=0&&c.indexOf("flowmset")!=0){desknets.flow.subwin.init()}},isFlowCmd:function(d){var c=this;if(d.indexOf("flow">=0)){return true}return false},ajaxFormatGet:function(e,f){var c=desknets.getUrl(desknets.flow.MODULE_API_FLOW);var d={cmd:desknets.flow.CMD_FLOWFORMATPREVIEW,id:e};desknets.ajax.rest({url:c,data:d,type:"POST",success:f})},ajaxUserFormatGet:function(e,f){var c=desknets.getUrl(desknets.flow.MODULE_API_FLOW);var d={cmd:desknets.flow.CMD_FLOWUSERFORMATPREVIEW,id:e};desknets.ajax.rest({url:c,data:d,type:"POST",success:f})},getAttExtListCmd:function(c){return"flow"+c},preparedCmdDispRest:function(e){var g;var f=e;g=f.history_list;if(!!g){if(!g.item){g.item=[]}if(!b.isArray(g.item)){g.item=[g.item]}}g=f.route_list;if(!!g){if(!g.item){g.item=[]}if(!b.isArray(g.item)){g.item=[g.item]}b.each(f.route_list["item"],function(h,i){if(!!i.list){g=i.list;if(!g.item){g.item=[]}if(!b.isArray(g.item)){g.item=[g.item]}}})}g=f.signs;if(!!g){if(!g.item){g.item=[]}if(!b.isArray(g.item)){g.item=[g.item]}var c=f.signs["item"].length%5;if(c!=0){c=5-c}for(var d=0;d<c;d++){f.signs["item"].push({})}}return f},getRouteStatusByValue:function(c){var d="";switch(c.sts){case"0":d="";break;case"1":d=desknets.Resource.flow.route_sts_application;break;case"2":switch(c.ROUTE_CLASS_KIND){case"1":d=desknets.Resource.flow.route_sts_approval1;break;case"2":d=desknets.Resource.flow.route_sts_approval2;break;case"3":d=desknets.Resource.flow.route_sts_approval3;break;default:d="unknown";break}break;case"3":case"9":d=desknets.Resource.flow.route_sts_denial;break;case"4":d=desknets.Resource.flow.route_sts_reapproval;break;case"5":d="";break;case"6":d=desknets.Resource.flow.revocation;break;case"7":d=desknets.Resource.flow.forcedend;break}return d},getRouteConditionByValue:function(d){var c="";switch(d){case"0":c=desknets.Resource.flow.approval_all;break;case"1":c=desknets.Resource.flow.approval_harf;break;case"2":c=desknets.Resource.flow.approval_majority;break;case"3":c=desknets.Resource.flow.approval_one;break}return c},getStatusByValue:function(d){var c="";switch(d){case"2":c=desknets.Resource.flow.wait_approval;break;case"3":case"9":c=desknets.Resource.flow.rejected;break;case"4":c=desknets.Resource.flow.approval;break;case"6":c=desknets.Resource.flow.revocation;break;case"7":c=desknets.Resource.flow.revocation;break;case"8":c=desknets.Resource.flow.revocation;break;case"10":c=desknets.Resource.flow.forcedend;break;default:break}return c},"":{}};desknets.flow.input={};desknets.flow.input.format={};desknets.flow.route={}})(jQuery);desknets.sp.flow={init:function(){desknets.sp.mobjPages["flow-page"]=desknets.sp.flow.list;desknets.sp.mobjPages["flowhist-page"]=desknets.sp.flow.histlist;desknets.sp.mobjPages["flowplan-page"]=desknets.sp.flow.planlist;desknets.sp.mobjPages["flowref-page"]=desknets.sp.flow.flowref;desknets.sp.mobjPages["flowrefhist-page"]=desknets.sp.flow.flowrefhist;desknets.sp.mobjPages["d-flowread-page"]=desknets.sp.flow.flowread;desknets.sp.mobjPages["d-flowapproval-page"]=desknets.sp.flow.flowapproval;desknets.sp.mobjPages["d-flowapprovalng-page"]=desknets.sp.flow.flowapprovalng;desknets.sp.mobjPages["neotwi-page"]=desknets.sp.Neotwi;var c=[];var b=desknets.sp.getPrm();if(neo.isSet(b.id)){c=["flowref-page"]}desknets.sp.initSetEvents(c)},getRequestURL:function(){return desknets.sp.getUrl(desknets.flow.MODULE_API_FLOW)},};desknets.page(desknets.sp.flow,"ComList",desknets.sp.ListSetPage,{init:function(c){var b=this;b.callBase("init",c);b.$mRootElement.find(".jflow-list").bind("vclick",function(d){d.preventDefault();desknets.sp.flow.list.invalidate();desknets.sp.changePage("flow",{transition:"fade"})});b.$mRootElement.find(".jflow-hist").bind("vclick",function(d){d.preventDefault();desknets.sp.flow.histlist.invalidate();desknets.sp.changePage("flowhist",{transition:"fade"})});b.$mRootElement.find(".jflow-plan").bind("vclick",function(d){d.preventDefault();desknets.sp.flow.planlist.invalidate();desknets.sp.changePage("flowplan",{transition:"fade"})});b.initFlow()},initFlow:function(){var b=this},getListRequestURL:function(){return desknets.sp.flow.getRequestURL()},getListRequestData:function(c,d){var b=this;return{cmd:desknets.flow.CMD_FLOWLIST,row:c,num:d,}},getAjaxId:function(){return"dnsp-flow"},setUpListItem:function(e,d){var c=this;c.callBase("setUpListItem",e,d);var b="";if(e.important=="1"){d.find(".co-importance.high").remove();d.find(".co-importance.low").remove()}else{if(e.important=="2"){d.find(".co-importance.haste").remove();d.find(".co-importance.low").remove()}else{if(e.important=="4"){d.find(".co-importance.haste").remove();d.find(".co-importance.high").remove()}else{d.find(".co-importance").remove()}}}d.find("h3").append(desknets.tmpl.escapeWord(e.Name));d.find(".jflow-user").html(desknets.tmpl.escapeWord(e.applicant));d.find(".ui-li-aside").find("span").html(desknets.tmpl.escapeWord(e.days_elapsed));d.find(".flow-readedcnt").html(desknets.tmpl.escapeWord(e.readedcnt)+"/"+desknets.tmpl.escapeWord(e.notificationcnt))},openListItem:function(c,d){var b=this;desknets.sp.flow.flowref.setPage(d);desknets.sp.changePage("flowref")},});desknets.page(desknets.sp.flow,"list",desknets.sp.flow.ComList,{initFlow:function(){var b=this;b.$mRootElement.find(".jflow-read").bind("vclick",function(d){d.preventDefault();var c=b.getChkId();if(c!==false){desknets.sp.flow.flowread.setPage(c);desknets.sp.changePage("d-flowread")}else{b._listChgClick()}})},setUpListItem:function(d,c){var b=this;b.callBase("setUpListItem",d,c);if(d.unreadflg=="1"){c.addClass("new")}if(d.elapsed_warn_flg=="1"){c.find(".ui-li-aside").addClass("flow-elapsed-warn")}c.find("input[type=checkbox]").attr("id","info-chk-list-"+d.id);c.find("label").attr("for","info-chk-list-"+d.id)},getListRequestData:function(d,e){var b=this;var c=b.callBase("getListRequestData",d,e);c.stsid="0";return c},openListItem:function(c,d){var b=this;if(!b.mboSet){c.removeClass("new")}desknets.sp.flow.flowref.veiwApp="1";b.callBase("openListItem",c,d)},});desknets.page(desknets.sp.flow,"flowread",desknets.sp.EntryPage,{replaceItems:function(){var b=this;b.pageViewEnd()},getEntriesFromReferItem:function(){var b=this;var c={};c.cmd=desknets.flow.CMD_FLOWUNREAD;c.id=b.msId;return c},getSubmitRequestURL:function(){return desknets.sp.flow.getRequestURL()},completeToSendEntries:function(){var b=this;desknets.sp.flow.list.invalidate();b.$mRootElement.dialog("close")}});desknets.page(desknets.sp.flow,"histlist",desknets.sp.flow.ComList,{getListRequestData:function(d,e){var b=this;var c=b.callBase("getListRequestData",d,e);c.stsid="1";return c},openListItem:function(c,d){var b=this;desknets.sp.flow.flowref.veiwApp="0";b.callBase("openListItem",c,d)},});desknets.page(desknets.sp.flow,"planlist",desknets.sp.flow.ComList,{getListRequestData:function(d,e){var b=this;var c=b.callBase("getListRequestData",d,e);c.stsid="4";return c},openListItem:function(c,d){var b=this;desknets.sp.flow.flowref.veiwApp="0";b.callBase("openListItem",c,d)},});desknets.page(desknets.sp.flow,"flowref",desknets.sp.RefPage,{veiwApp:"0",mboBack:false,initPage:function(){var b=this;b.callBase("initPage");if(!neo.isSet(b.msId,{blank:false})){var c=desknets.sp.getPrm();if(neo.isSet(c.id)){desknets.sp.flow.flowref.veiwApp="1";desknets.sp.flow.flowref.setPage(c.id)}else{desknets.sp.resetPage()}}b.$mRootElement.find(".jflow-refhist").bind("vclick",function(d){d.preventDefault();desknets.sp.flow.flowrefhist.setPage(b.msId);desknets.sp.changePage("flowrefhist")});b.$mRootElement.find(".jflow-app").bind("vclick",function(d){d.preventDefault();desknets.sp.flow.flowapproval.setPage(b.msId);desknets.sp.changePage("d-flowapproval")})},showingPage:function(){var b=this;if(b.veiwApp==="1"||b.veiwApp==="0"){var c=false;if(b.veiwApp==="1"){c=true}b.viewApproval(c);b.veiwApp="2"}},viewApproval:function(c){var b=this;if(c){b.$mRootElement.find(".jflow-btn-app-on").show();b.$mRootElement.find(".jflow-btn-app-off").hide()}else{b.$mRootElement.find(".jflow-btn-app-off").show();b.$mRootElement.find(".jflow-btn-app-on").hide()}},getReferRequestURL:function(){return desknets.sp.flow.getRequestURL()},getReferRequestData:function(){var b=this;var c={cmd:desknets.flow.CMD_FLOWDISP,formType:"3",id:b.msId,};return c},setUpReferItem:function(e){var l=this;l.setUpText(".jflow-entry",e.entry);l.setUpText(".jflow-no",e.no);l.$mRootElement.find(".jflow-date").html(desknets.dateTime.dispDateTime(e.date,"dateTimeFormat"));l.setUpText(".jflow-sts",desknets.flow.getStatusByValue(e.sts));var k={cmd:desknets.flow.CMD_FLOWREFATTACH,id:l.msId};l.setUpFile(".jflow-attach",e.attach,k);l.$mRootElement.find(".co-importance").hide();if(e.important=="1"){l.$mRootElement.find(".co-importance.haste").show()}else{if(e.important=="2"){l.$mRootElement.find(".co-importance.high").show()}else{if(e.important=="4"){l.$mRootElement.find(".co-importance.low").show()}}}l.setUpText(".jflow-subject",e.subject);var g=new RegExp('href="zflow.',"ig");var j=e.memo.replace(g,'href="'+desknets.sp.MODULE_MAIN+".");var f=new RegExp('src="zflow.',"ig");j=j.replace(f,'src="'+desknets.sp.MODULE_MAIN+".");var b=new RegExp('src="/'+desknets.DIR_RESHOME+"/","ig");j=j.replace(b,'src="'+desknets.sp.msTemplatePath);var h="cmd="+desknets.flow.CMD_FLOWDISPFORMATATTACH;if(!desknets.sp.isAttachDownload(h)){var d=a("<div/>").append(j);var i=d.find("a");var c=d.find("img");a.each(i,function(o,m){var p=a(this);if(p.attr("href").indexOf(h)<0){return true}var n=a("<span/>").html(p.html());p.after(n);p.remove()});a.each(c,function(o,p){var n=a(this);var m=n.attr("src");if(m.indexOf(desknets.sp.MODULE_MAIN+".")==0){m=m+"&image=1";n.attr("src",m)}});j=d.html()}l.$mRootElement.find(".co-content").html(j);l.viewApproval(l.chkApproval(e))},chkApproval:function(d){var l=this;var h=desknets.sp.ajax.getItems(d.route_list.item);desknets.sp.flow.flowapprovalng.mboPrev=false;var c="0";desknets.sp.flow.flowapprovalng.mboStart=true;var b=h.length;for(var i=0;i<b;i++){var j=h[i];if(j.is_input==="1"){if(i>0){desknets.sp.flow.flowapprovalng.mboPrev=true}desknets.sp.flow.flowapproval.msClass=j.ROUTE_CLASS_KIND;desknets.sp.flow.flowapproval.msBackRouteId=c;return true}else{if(neo.isSet(j.list)){var g=desknets.sp.ajax.getItems(j.list.item);var k=g.length;for(var e=0;e<k;e++){var f=g[e];if(f.is_input==="1"){if(j.rtnpoint=="0"){desknets.sp.flow.flowapprovalng.mboStart=true;desknets.sp.flow.flowapprovalng.mboPrev=false}else{desknets.sp.flow.flowapprovalng.mboStart=false;desknets.sp.flow.flowapprovalng.mboPrev=true}desknets.sp.flow.flowapproval.msClass=j.ROUTE_CLASS_KIND;desknets.sp.flow.flowapproval.msBackRouteId=c;return true}}}}c=j.id}return false},});desknets.page(desknets.sp.flow,"flowrefhist",desknets.sp.RefPage,{$_Tmpl:null,init:function(c){var b=this;b.callBase("init",c);b.$_Tmpl=b.$mRootElement.find(".co-list-history").find("li").remove()},getReferRequestURL:function(){return desknets.sp.flow.getRequestURL()},getReferRequestData:function(){var b=this;var c={cmd:desknets.flow.CMD_FLOWDISP,formType:"3",id:b.msId,};return c},setUpReferItem:function(g){var c=this;var d=c.$mRootElement.find(".co-list-history");d.empty();var b=c.$_Tmpl.clone();b.find("h3").html("&nbsp;");b.find("p").html(desknets.tmpl.escapeWord(g.entry)+"&nbsp;-&nbsp;"+desknets.dateTime.dispDateTime(g.date));b.find("span").html(desknets.Resource.flow.route_sts_application);b.appendTo(d);var h=desknets.sp.ajax.getItems(g.route_list.item);var e=h.length;for(var f=0;f<e;f++){c.setUpReferRow(d,g,h[f])}d.enhanceWithin();d.listview("refresh")},setUpReferRow:function(d,c,j){var k=this;var f=k.$_Tmpl.clone();var e=desknets.tmpl.escapeWord(j.comment);if(e==""){e="&nbsp;"}f.find("h3").html(e);var g=desknets.tmpl.escapeWord(j.Name);if(neo.isSet(j.absence)){g=g+"("+desknets.Resource.flow.spabsence+desknets.tmpl.escapeWord(j.absence)+")"}if(neo.isSet(j.date)){g=g+"&nbsp;-&nbsp;"+desknets.dateTime.dispDateTime(j.date)}f.find("p").html(g);if(neo.isSet(j.date)&&j.sts=="2"){if(j.ROUTE_CLASS_KIND=="1"){f.find("span").html(desknets.Resource.flow.route_sts_approval1)}else{if(j.ROUTE_CLASS_KIND=="3"){f.find("span").html(desknets.Resource.flow.route_sts_approval3)}else{f.find("span").html(desknets.Resource.flow.route_sts_approval2)}}}else{if(neo.isSet(j.date)&&j.sts=="3"){f.find("span").html(desknets.Resource.flow.route_sts_denial)}else{f.find("span").remove()}}f.appendTo(d);var i=desknets.sp.ajax.getJsonItems(j);var b=i.length;for(var h=0;h<b;h++){k.setUpReferSubRow(d,i[h])}},setUpReferSubRow:function(e,c){var d=this;var b=d.$_Tmpl.clone();b.addClass("sub");var f=desknets.tmpl.escapeWord(c.comment);if(f==""){f="&nbsp;"}b.find("h3").html(f);var g=desknets.tmpl.escapeWord(c.Name);if(neo.isSet(c.date)){g=g+"&nbsp;-&nbsp;"+desknets.dateTime.dispDateTime(c.date)}b.find("p").html(g);if(neo.isSet(c.date)&&c.sts=="2"){if(c.ROUTE_CLASS_KIND=="1"){b.find("span").html(desknets.Resource.flow.route_sts_approval1)}else{if(c.ROUTE_CLASS_KIND=="3"){b.find("span").html(desknets.Resource.flow.route_sts_approval3)}else{b.find("span").html(desknets.Resource.flow.route_sts_approval2)}}}else{if(neo.isSet(c.date)&&c.sts=="3"){b.find("span").html(desknets.Resource.flow.route_sts_denial)}else{b.find("span").remove()}}b.appendTo(e)},});desknets.page(desknets.sp.flow,"flowapproval",desknets.sp.EntryPage,{mboClear:true,mboNg:false,msRtnPoint:"",msClass:"",msBackRouteId:"",init:function(c){var b=this;b.callBase("init",c);b.$mRootElement.find(".jflow-ok").bind("vclick",function(d){d.preventDefault();b.sendEntries()});b.$mRootElement.find(".jflow-ng").bind("vclick",function(d){d.preventDefault();desknets.sp.changePage("d-flowapprovalng")})},showingPage:function(){var b=this;if(b.mboClear){b.mboClear=false;b.$mRootElement.find("textarea").val("");if(b.msClass=="1"){b.$mRootElement.find(".jflow-ok").html(desknets.Resource.flow.route_sts_approval1)}else{if(b.msClass=="3"){b.$mRootElement.find(".jflow-ok").html(desknets.Resource.flow.route_sts_approval3)}else{b.$mRootElement.find(".jflow-ok").html(desknets.Resource.flow.route_sts_approval2)}}}},setPage:function(c){var b=this;b.callBase("setPage",c);b.mboClear=true;b.mboNg=false;b.sRtnPoint=""},setApprovalNg:function(c){var b=this;b.mboNg=true;b.msRtnPoint=c;b.sendEntries()},replaceItems:function(){var b=this;b.pageViewEnd()},getSubmitRequestURL:function(){return desknets.sp.flow.getRequestURL()},getEntriesFromReferItem:function(){var b=this;var c={};c.id=b.msId;c.memo=b.$mRootElement.find("textarea").val();if(b.mboNg){c.cmd=desknets.flow.CMD_FLOWDENIAL;c.rtnpoint="0";if(b.msRtnPoint=="prev"){c.rtnpoint=b.msBackRouteId}}else{c.cmd=desknets.flow.CMD_FLOWAPPROVAL}return c},completeToSendEntries:function(){var b=this;desknets.sp.flow.flowref.invalidate();desknets.sp.flow.list.invalidate();b.$mRootElement.dialog("close")},});desknets.page(desknets.sp.flow,"flowapprovalng",desknets.sp.ComPage,{$mOptionStart:null,$mOptionPrev:null,mboStart:false,mboPrev:false,init:function(c){var b=this;b.callBase("init",c);b.$mOptionStart=b.$mRootElement.find("select[name=rtnpoint] option[value=start]").remove();b.$mOptionPrev=b.$mRootElement.find("select[name=rtnpoint] option[value=prev]").remove();b.$mRootElement.find(".jflow-ok").bind("vclick",function(d){d.preventDefault();b.setFlowApprovalNg()})},showing:function(){var b=this;var c=b.$mRootElement.find('select[name="rtnpoint"]');c.html("");if(b.mboStart){c.append(b.$mOptionStart);c.val("start")}if(b.mboPrev){c.append(b.$mOptionPrev);c.val("prev")}c.selectmenu("refresh")},show:function(){var b=this;b.pageViewEnd()},setFlowApprovalNg:function(){var b=this;b.$mRootElement.dialog("close");desknets.sp.flow.flowapproval.setApprovalNg(b.$mRootElement.find('select[name="rtnpoint"]').val())},});desknets.sp.flow.init()})(jQuery);